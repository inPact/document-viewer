!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=3)}([function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a,o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",c="__lodash_hash_undefined__",l=500,d="__lodash_placeholder__",f=1,_=2,v=4,h=1,p=2,T=1,E=2,m=4,A=8,g=16,O=32,y=64,N=128,R=256,C=512,D=30,I="...",S=800,M=16,b=1,P=2,L=1/0,x=9007199254740991,U=1.7976931348623157e308,w=NaN,H=4294967295,F=H-1,k=H>>>1,$=[["ary",N],["bind",T],["bindKey",E],["curry",A],["curryRight",g],["flip",C],["partial",O],["partialRight",y],["rearg",R]],V="[object Arguments]",Y="[object Array]",j="[object AsyncFunction]",G="[object Boolean]",B="[object Date]",X="[object DOMException]",q="[object Error]",z="[object Function]",W="[object GeneratorFunction]",Z="[object Map]",K="[object Number]",Q="[object Null]",J="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",ae="[object Undefined]",oe="[object WeakMap]",ue="[object WeakSet]",se="[object ArrayBuffer]",ce="[object DataView]",le="[object Float32Array]",de="[object Float64Array]",fe="[object Int8Array]",_e="[object Int16Array]",ve="[object Int32Array]",he="[object Uint8Array]",pe="[object Uint8ClampedArray]",Te="[object Uint16Array]",Ee="[object Uint32Array]",me=/\b__p \+= '';/g,Ae=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oe=/&(?:amp|lt|gt|quot|#39);/g,ye=/[&<>"']/g,Ne=RegExp(Oe.source),Re=RegExp(ye.source),Ce=/<%-([\s\S]+?)%>/g,De=/<%([\s\S]+?)%>/g,Ie=/<%=([\s\S]+?)%>/g,Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pe=/[\\^$.*+?()[\]{}|]/g,Le=RegExp(Pe.source),xe=/^\s+|\s+$/g,Ue=/^\s+/,we=/\s+$/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,ke=/,? & /,$e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/\\(\\)?/g,Ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,Ge=/^[-+]0x[0-9a-f]+$/i,Be=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,We=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Je="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Je+"]",nt="["+Qe+"]",rt="\\d+",it="[\\u2700-\\u27bf]",at="[a-z\\xdf-\\xf6\\xf8-\\xff]",ot="[^\\ud800-\\udfff"+Je+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ut="\\ud83c[\\udffb-\\udfff]",st="[^\\ud800-\\udfff]",ct="(?:\\ud83c[\\udde6-\\uddff]){2}",lt="[\\ud800-\\udbff][\\udc00-\\udfff]",dt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ft="(?:"+at+"|"+ot+")",_t="(?:"+dt+"|"+ot+")",vt="(?:"+nt+"|"+ut+")"+"?",ht="[\\ufe0e\\ufe0f]?"+vt+("(?:\\u200d(?:"+[st,ct,lt].join("|")+")[\\ufe0e\\ufe0f]?"+vt+")*"),pt="(?:"+[it,ct,lt].join("|")+")"+ht,Tt="(?:"+[st+nt+"?",nt,ct,lt,et].join("|")+")",Et=RegExp("['’]","g"),mt=RegExp(nt,"g"),At=RegExp(ut+"(?="+ut+")|"+Tt+ht,"g"),gt=RegExp([dt+"?"+at+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,dt,"$"].join("|")+")",_t+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,dt+ft,"$"].join("|")+")",dt+"?"+ft+"+(?:['’](?:d|ll|m|re|s|t|ve))?",dt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,pt].join("|"),"g"),Ot=RegExp("[\\u200d\\ud800-\\udfff"+Qe+"\\ufe0e\\ufe0f]"),yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Nt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rt=-1,Ct={};Ct[le]=Ct[de]=Ct[fe]=Ct[_e]=Ct[ve]=Ct[he]=Ct[pe]=Ct[Te]=Ct[Ee]=!0,Ct[V]=Ct[Y]=Ct[se]=Ct[G]=Ct[ce]=Ct[B]=Ct[q]=Ct[z]=Ct[Z]=Ct[K]=Ct[J]=Ct[te]=Ct[ne]=Ct[re]=Ct[oe]=!1;var Dt={};Dt[V]=Dt[Y]=Dt[se]=Dt[ce]=Dt[G]=Dt[B]=Dt[le]=Dt[de]=Dt[fe]=Dt[_e]=Dt[ve]=Dt[Z]=Dt[K]=Dt[J]=Dt[te]=Dt[ne]=Dt[re]=Dt[ie]=Dt[he]=Dt[pe]=Dt[Te]=Dt[Ee]=!0,Dt[q]=Dt[z]=Dt[oe]=!1;var It={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},St=parseFloat,Mt=parseInt,bt="object"==typeof e&&e&&e.Object===Object&&e,Pt="object"==typeof self&&self&&self.Object===Object&&self,Lt=bt||Pt||Function("return this")(),xt=t&&!t.nodeType&&t,Ut=xt&&"object"==typeof r&&r&&!r.nodeType&&r,wt=Ut&&Ut.exports===xt,Ht=wt&&bt.process,Ft=function(){try{var e=Ut&&Ut.require&&Ut.require("util").types;return e||Ht&&Ht.binding&&Ht.binding("util")}catch(e){}}(),kt=Ft&&Ft.isArrayBuffer,$t=Ft&&Ft.isDate,Vt=Ft&&Ft.isMap,Yt=Ft&&Ft.isRegExp,jt=Ft&&Ft.isSet,Gt=Ft&&Ft.isTypedArray;function Bt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Xt(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function qt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function zt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Wt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Zt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Kt(e,t){return!!(null==e?0:e.length)&&sn(e,t,0)>-1}function Qt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Jt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function en(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function tn(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function nn(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function rn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var an=fn("length");function on(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function un(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function sn(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):un(e,ln,n)}function cn(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function ln(e){return e!=e}function dn(e,t){var n=null==e?0:e.length;return n?hn(e,t)/n:w}function fn(e){return function(t){return null==t?a:t[e]}}function _n(e){return function(t){return null==e?a:e[t]}}function vn(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function hn(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function pn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Tn(e){return function(t){return e(t)}}function En(e,t){return Jt(t,function(t){return e[t]})}function mn(e,t){return e.has(t)}function An(e,t){for(var n=-1,r=e.length;++n<r&&sn(t,e[n],0)>-1;);return n}function gn(e,t){for(var n=e.length;n--&&sn(t,e[n],0)>-1;);return n}var On=_n({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),yn=_n({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nn(e){return"\\"+It[e]}function Rn(e){return Ot.test(e)}function Cn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Dn(e,t){return function(n){return e(t(n))}}function In(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==d||(e[n]=d,a[i++]=n)}return a}function Sn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function bn(e){return Rn(e)?function(e){var t=At.lastIndex=0;for(;At.test(e);)++t;return t}(e):an(e)}function Pn(e){return Rn(e)?function(e){return e.match(At)||[]}(e):function(e){return e.split("")}(e)}var Ln=_n({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var xn=function e(t){var n,r=(t=null==t?Lt:xn.defaults(Lt.Object(),t,xn.pick(Lt,Nt))).Array,i=t.Date,Qe=t.Error,Je=t.Function,et=t.Math,tt=t.Object,nt=t.RegExp,rt=t.String,it=t.TypeError,at=r.prototype,ot=Je.prototype,ut=tt.prototype,st=t["__core-js_shared__"],ct=ot.toString,lt=ut.hasOwnProperty,dt=0,ft=(n=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",_t=ut.toString,vt=ct.call(tt),ht=Lt._,pt=nt("^"+ct.call(lt).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=wt?t.Buffer:a,At=t.Symbol,Ot=t.Uint8Array,It=Tt?Tt.allocUnsafe:a,bt=Dn(tt.getPrototypeOf,tt),Pt=tt.create,xt=ut.propertyIsEnumerable,Ut=at.splice,Ht=At?At.isConcatSpreadable:a,Ft=At?At.iterator:a,an=At?At.toStringTag:a,_n=function(){try{var e=Fa(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Un=t.clearTimeout!==Lt.clearTimeout&&t.clearTimeout,wn=i&&i.now!==Lt.Date.now&&i.now,Hn=t.setTimeout!==Lt.setTimeout&&t.setTimeout,Fn=et.ceil,kn=et.floor,$n=tt.getOwnPropertySymbols,Vn=Tt?Tt.isBuffer:a,Yn=t.isFinite,jn=at.join,Gn=Dn(tt.keys,tt),Bn=et.max,Xn=et.min,qn=i.now,zn=t.parseInt,Wn=et.random,Zn=at.reverse,Kn=Fa(t,"DataView"),Qn=Fa(t,"Map"),Jn=Fa(t,"Promise"),er=Fa(t,"Set"),tr=Fa(t,"WeakMap"),nr=Fa(tt,"create"),rr=tr&&new tr,ir={},ar=lo(Kn),or=lo(Qn),ur=lo(Jn),sr=lo(er),cr=lo(tr),lr=At?At.prototype:a,dr=lr?lr.valueOf:a,fr=lr?lr.toString:a;function _r(e){if(Iu(e)&&!Tu(e)&&!(e instanceof Tr)){if(e instanceof pr)return e;if(lt.call(e,"__wrapped__"))return fo(e)}return new pr(e)}var vr=function(){function e(){}return function(t){if(!Du(t))return{};if(Pt)return Pt(t);e.prototype=t;var n=new e;return e.prototype=a,n}}();function hr(){}function pr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Tr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function Er(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function mr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ar(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function gr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ar;++t<n;)this.add(e[t])}function Or(e){var t=this.__data__=new mr(e);this.size=t.size}function yr(e,t){var n=Tu(e),r=!n&&pu(e),i=!n&&!r&&gu(e),a=!n&&!r&&!i&&wu(e),o=n||r||i||a,u=o?pn(e.length,rt):[],s=u.length;for(var c in e)!t&&!lt.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ba(c,s))||u.push(c);return u}function Nr(e){var t=e.length;return t?e[gi(0,t-1)]:a}function Rr(e,t){return uo(na(e),xr(t,0,e.length))}function Cr(e){return uo(na(e))}function Dr(e,t,n){(n===a||_u(e[t],n))&&(n!==a||t in e)||Pr(e,t,n)}function Ir(e,t,n){var r=e[t];lt.call(e,t)&&_u(r,n)&&(n!==a||t in e)||Pr(e,t,n)}function Sr(e,t){for(var n=e.length;n--;)if(_u(e[n][0],t))return n;return-1}function Mr(e,t,n,r){return kr(e,function(e,i,a){t(r,e,n(e),a)}),r}function br(e,t){return e&&ra(t,is(t),e)}function Pr(e,t,n){"__proto__"==t&&_n?_n(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Lr(e,t){for(var n=-1,i=t.length,o=r(i),u=null==e;++n<i;)o[n]=u?a:Ju(e,t[n]);return o}function xr(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function Ur(e,t,n,r,i,o){var u,s=t&f,c=t&_,l=t&v;if(n&&(u=i?n(e,r,i,o):n(e)),u!==a)return u;if(!Du(e))return e;var d=Tu(e);if(d){if(u=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return na(e,u)}else{var h=Va(e),p=h==z||h==W;if(gu(e))return Zi(e,s);if(h==J||h==V||p&&!i){if(u=c||p?{}:ja(e),!s)return c?function(e,t){return ra(e,$a(e),t)}(e,function(e,t){return e&&ra(t,as(t),e)}(u,e)):function(e,t){return ra(e,ka(e),t)}(e,br(u,e))}else{if(!Dt[h])return i?e:{};u=function(e,t,n){var r,i,a,o=e.constructor;switch(t){case se:return Ki(e);case G:case B:return new o(+e);case ce:return function(e,t){var n=t?Ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case le:case de:case fe:case _e:case ve:case he:case pe:case Te:case Ee:return Qi(e,n);case Z:return new o;case K:case re:return new o(e);case te:return(a=new(i=e).constructor(i.source,je.exec(i))).lastIndex=i.lastIndex,a;case ne:return new o;case ie:return r=e,dr?tt(dr.call(r)):{}}}(e,h,s)}}o||(o=new Or);var T=o.get(e);if(T)return T;if(o.set(e,u),Lu(e))return e.forEach(function(r){u.add(Ur(r,t,n,r,e,o))}),u;if(Su(e))return e.forEach(function(r,i){u.set(i,Ur(r,t,n,i,e,o))}),u;var E=d?a:(l?c?ba:Ma:c?as:is)(e);return qt(E||e,function(r,i){E&&(r=e[i=r]),Ir(u,i,Ur(r,t,n,i,e,o))}),u}function wr(e,t,n){var r=n.length;if(null==e)return!r;for(e=tt(e);r--;){var i=n[r],o=t[i],u=e[i];if(u===a&&!(i in e)||!o(u))return!1}return!0}function Hr(e,t,n){if("function"!=typeof e)throw new it(s);return ro(function(){e.apply(a,n)},t)}function Fr(e,t,n,r){var i=-1,a=Kt,u=!0,s=e.length,c=[],l=t.length;if(!s)return c;n&&(t=Jt(t,Tn(n))),r?(a=Qt,u=!1):t.length>=o&&(a=mn,u=!1,t=new gr(t));e:for(;++i<s;){var d=e[i],f=null==n?d:n(d);if(d=r||0!==d?d:0,u&&f==f){for(var _=l;_--;)if(t[_]===f)continue e;c.push(d)}else a(t,f,r)||c.push(d)}return c}_r.templateSettings={escape:Ce,evaluate:De,interpolate:Ie,variable:"",imports:{_:_r}},_r.prototype=hr.prototype,_r.prototype.constructor=_r,pr.prototype=vr(hr.prototype),pr.prototype.constructor=pr,Tr.prototype=vr(hr.prototype),Tr.prototype.constructor=Tr,Er.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},Er.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Er.prototype.get=function(e){var t=this.__data__;if(nr){var n=t[e];return n===c?a:n}return lt.call(t,e)?t[e]:a},Er.prototype.has=function(e){var t=this.__data__;return nr?t[e]!==a:lt.call(t,e)},Er.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nr&&t===a?c:t,this},mr.prototype.clear=function(){this.__data__=[],this.size=0},mr.prototype.delete=function(e){var t=this.__data__,n=Sr(t,e);return!(n<0||(n==t.length-1?t.pop():Ut.call(t,n,1),--this.size,0))},mr.prototype.get=function(e){var t=this.__data__,n=Sr(t,e);return n<0?a:t[n][1]},mr.prototype.has=function(e){return Sr(this.__data__,e)>-1},mr.prototype.set=function(e,t){var n=this.__data__,r=Sr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Ar.prototype.clear=function(){this.size=0,this.__data__={hash:new Er,map:new(Qn||mr),string:new Er}},Ar.prototype.delete=function(e){var t=wa(this,e).delete(e);return this.size-=t?1:0,t},Ar.prototype.get=function(e){return wa(this,e).get(e)},Ar.prototype.has=function(e){return wa(this,e).has(e)},Ar.prototype.set=function(e,t){var n=wa(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},gr.prototype.add=gr.prototype.push=function(e){return this.__data__.set(e,c),this},gr.prototype.has=function(e){return this.__data__.has(e)},Or.prototype.clear=function(){this.__data__=new mr,this.size=0},Or.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Or.prototype.get=function(e){return this.__data__.get(e)},Or.prototype.has=function(e){return this.__data__.has(e)},Or.prototype.set=function(e,t){var n=this.__data__;if(n instanceof mr){var r=n.__data__;if(!Qn||r.length<o-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ar(r)}return n.set(e,t),this.size=n.size,this};var kr=oa(qr),$r=oa(zr,!0);function Vr(e,t){var n=!0;return kr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Yr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],u=t(o);if(null!=u&&(s===a?u==u&&!Uu(u):n(u,s)))var s=u,c=o}return c}function jr(e,t){var n=[];return kr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Gr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=Ga),i||(i=[]);++a<o;){var u=e[a];t>0&&n(u)?t>1?Gr(u,t-1,n,r,i):en(i,u):r||(i[i.length]=u)}return i}var Br=ua(),Xr=ua(!0);function qr(e,t){return e&&Br(e,t,is)}function zr(e,t){return e&&Xr(e,t,is)}function Wr(e,t){return Zt(t,function(t){return Nu(e[t])})}function Zr(e,t){for(var n=0,r=(t=Xi(t,e)).length;null!=e&&n<r;)e=e[co(t[n++])];return n&&n==r?e:a}function Kr(e,t,n){var r=t(e);return Tu(e)?r:en(r,n(e))}function Qr(e){return null==e?e===a?ae:Q:an&&an in tt(e)?function(e){var t=lt.call(e,an),n=e[an];try{e[an]=a;var r=!0}catch(e){}var i=_t.call(e);return r&&(t?e[an]=n:delete e[an]),i}(e):function(e){return _t.call(e)}(e)}function Jr(e,t){return e>t}function ei(e,t){return null!=e&&lt.call(e,t)}function ti(e,t){return null!=e&&t in tt(e)}function ni(e,t,n){for(var i=n?Qt:Kt,o=e[0].length,u=e.length,s=u,c=r(u),l=1/0,d=[];s--;){var f=e[s];s&&t&&(f=Jt(f,Tn(t))),l=Xn(f.length,l),c[s]=!n&&(t||o>=120&&f.length>=120)?new gr(s&&f):a}f=e[0];var _=-1,v=c[0];e:for(;++_<o&&d.length<l;){var h=f[_],p=t?t(h):h;if(h=n||0!==h?h:0,!(v?mn(v,p):i(d,p,n))){for(s=u;--s;){var T=c[s];if(!(T?mn(T,p):i(e[s],p,n)))continue e}v&&v.push(p),d.push(h)}}return d}function ri(e,t,n){var r=null==(e=eo(e,t=Xi(t,e)))?e:e[co(yo(t))];return null==r?a:Bt(r,e,n)}function ii(e){return Iu(e)&&Qr(e)==V}function ai(e,t,n,r,i){return e===t||(null==e||null==t||!Iu(e)&&!Iu(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var u=Tu(e),s=Tu(t),c=u?Y:Va(e),l=s?Y:Va(t),d=(c=c==V?J:c)==J,f=(l=l==V?J:l)==J,_=c==l;if(_&&gu(e)){if(!gu(t))return!1;u=!0,d=!1}if(_&&!d)return o||(o=new Or),u||wu(e)?Ia(e,t,n,r,i,o):function(e,t,n,r,i,a,o){switch(n){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case se:return!(e.byteLength!=t.byteLength||!a(new Ot(e),new Ot(t)));case G:case B:case K:return _u(+e,+t);case q:return e.name==t.name&&e.message==t.message;case te:case re:return e==t+"";case Z:var u=Cn;case ne:var s=r&h;if(u||(u=Sn),e.size!=t.size&&!s)return!1;var c=o.get(e);if(c)return c==t;r|=p,o.set(e,t);var l=Ia(u(e),u(t),r,i,a,o);return o.delete(e),l;case ie:if(dr)return dr.call(e)==dr.call(t)}return!1}(e,t,c,n,r,i,o);if(!(n&h)){var v=d&&lt.call(e,"__wrapped__"),T=f&&lt.call(t,"__wrapped__");if(v||T){var E=v?e.value():e,m=T?t.value():t;return o||(o=new Or),i(E,m,n,r,o)}}return!!_&&(o||(o=new Or),function(e,t,n,r,i,o){var u=n&h,s=Ma(e),c=s.length,l=Ma(t).length;if(c!=l&&!u)return!1;for(var d=c;d--;){var f=s[d];if(!(u?f in t:lt.call(t,f)))return!1}var _=o.get(e);if(_&&o.get(t))return _==t;var v=!0;o.set(e,t),o.set(t,e);for(var p=u;++d<c;){f=s[d];var T=e[f],E=t[f];if(r)var m=u?r(E,T,f,t,e,o):r(T,E,f,e,t,o);if(!(m===a?T===E||i(T,E,n,r,o):m)){v=!1;break}p||(p="constructor"==f)}if(v&&!p){var A=e.constructor,g=t.constructor;A!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof A&&A instanceof A&&"function"==typeof g&&g instanceof g)&&(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,i,o))}(e,t,n,r,ai,i))}function oi(e,t,n,r){var i=n.length,o=i,u=!r;if(null==e)return!o;for(e=tt(e);i--;){var s=n[i];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],l=e[c],d=s[1];if(u&&s[2]){if(l===a&&!(c in e))return!1}else{var f=new Or;if(r)var _=r(l,d,c,e,t,f);if(!(_===a?ai(d,l,h|p,r,f):_))return!1}}return!0}function ui(e){return!(!Du(e)||(t=e,ft&&ft in t))&&(Nu(e)?pt:Xe).test(lo(e));var t}function si(e){return"function"==typeof e?e:null==e?Ms:"object"==typeof e?Tu(e)?vi(e[0],e[1]):_i(e):ks(e)}function ci(e){if(!Za(e))return Gn(e);var t=[];for(var n in tt(e))lt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function li(e){if(!Du(e))return function(e){var t=[];if(null!=e)for(var n in tt(e))t.push(n);return t}(e);var t=Za(e),n=[];for(var r in e)("constructor"!=r||!t&&lt.call(e,r))&&n.push(r);return n}function di(e,t){return e<t}function fi(e,t){var n=-1,i=mu(e)?r(e.length):[];return kr(e,function(e,r,a){i[++n]=t(e,r,a)}),i}function _i(e){var t=Ha(e);return 1==t.length&&t[0][2]?Qa(t[0][0],t[0][1]):function(n){return n===e||oi(n,e,t)}}function vi(e,t){return qa(e)&&Ka(t)?Qa(co(e),t):function(n){var r=Ju(n,e);return r===a&&r===t?es(n,e):ai(t,r,h|p)}}function hi(e,t,n,r,i){e!==t&&Br(t,function(o,u){if(Du(o))i||(i=new Or),function(e,t,n,r,i,o,u){var s=to(e,n),c=to(t,n),l=u.get(c);if(l)Dr(e,n,l);else{var d=o?o(s,c,n+"",e,t,u):a,f=d===a;if(f){var _=Tu(c),v=!_&&gu(c),h=!_&&!v&&wu(c);d=c,_||v||h?Tu(s)?d=s:Au(s)?d=na(s):v?(f=!1,d=Zi(c,!0)):h?(f=!1,d=Qi(c,!0)):d=[]:bu(c)||pu(c)?(d=s,pu(s)?d=Gu(s):Du(s)&&!Nu(s)||(d=ja(c))):f=!1}f&&(u.set(c,d),i(d,c,r,o,u),u.delete(c)),Dr(e,n,d)}}(e,t,u,n,hi,r,i);else{var s=r?r(to(e,u),o,u+"",e,t,i):a;s===a&&(s=o),Dr(e,u,s)}},as)}function pi(e,t){var n=e.length;if(n)return Ba(t+=t<0?n:0,n)?e[t]:a}function Ti(e,t,n){var r=-1;return t=Jt(t.length?t:[Ms],Tn(Ua())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(fi(e,function(e,n,i){return{criteria:Jt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,u=n.length;++r<o;){var s=Ji(i[r],a[r]);if(s){if(r>=u)return s;var c=n[r];return s*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)})}function Ei(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],u=Zr(e,o);n(u,o)&&Ci(a,Xi(o,e),u)}return a}function mi(e,t,n,r){var i=r?cn:sn,a=-1,o=t.length,u=e;for(e===t&&(t=na(t)),n&&(u=Jt(e,Tn(n)));++a<o;)for(var s=0,c=t[a],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==e&&Ut.call(u,s,1),Ut.call(e,s,1);return e}function Ai(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;Ba(i)?Ut.call(e,i,1):Fi(e,i)}}return e}function gi(e,t){return e+kn(Wn()*(t-e+1))}function Oi(e,t){var n="";if(!e||t<1||t>x)return n;do{t%2&&(n+=e),(t=kn(t/2))&&(e+=e)}while(t);return n}function yi(e,t){return io(Ja(e,t,Ms),e+"")}function Ni(e){return Nr(_s(e))}function Ri(e,t){var n=_s(e);return uo(n,xr(t,0,n.length))}function Ci(e,t,n,r){if(!Du(e))return e;for(var i=-1,o=(t=Xi(t,e)).length,u=o-1,s=e;null!=s&&++i<o;){var c=co(t[i]),l=n;if(i!=u){var d=s[c];(l=r?r(d,c,s):a)===a&&(l=Du(d)?d:Ba(t[i+1])?[]:{})}Ir(s,c,l),s=s[c]}return e}var Di=rr?function(e,t){return rr.set(e,t),e}:Ms,Ii=_n?function(e,t){return _n(e,"toString",{configurable:!0,enumerable:!1,value:Ds(t),writable:!0})}:Ms;function Si(e){return uo(_s(e))}function Mi(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function bi(e,t){var n;return kr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Pi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=k){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!Uu(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return Li(e,t,Ms,n)}function Li(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,u=t!=t,s=null===t,c=Uu(t),l=t===a;i<o;){var d=kn((i+o)/2),f=n(e[d]),_=f!==a,v=null===f,h=f==f,p=Uu(f);if(u)var T=r||h;else T=l?h&&(r||_):s?h&&_&&(r||!v):c?h&&_&&!v&&(r||!p):!v&&!p&&(r?f<=t:f<t);T?i=d+1:o=d}return Xn(o,F)}function xi(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],u=t?t(o):o;if(!n||!_u(u,s)){var s=u;a[i++]=0===o?0:o}}return a}function Ui(e){return"number"==typeof e?e:Uu(e)?w:+e}function wi(e){if("string"==typeof e)return e;if(Tu(e))return Jt(e,wi)+"";if(Uu(e))return fr?fr.call(e):"";var t=e+"";return"0"==t&&1/e==-L?"-0":t}function Hi(e,t,n){var r=-1,i=Kt,a=e.length,u=!0,s=[],c=s;if(n)u=!1,i=Qt;else if(a>=o){var l=t?null:Oa(e);if(l)return Sn(l);u=!1,i=mn,c=new gr}else c=t?[]:s;e:for(;++r<a;){var d=e[r],f=t?t(d):d;if(d=n||0!==d?d:0,u&&f==f){for(var _=c.length;_--;)if(c[_]===f)continue e;t&&c.push(f),s.push(d)}else i(c,f,n)||(c!==s&&c.push(f),s.push(d))}return s}function Fi(e,t){return null==(e=eo(e,t=Xi(t,e)))||delete e[co(yo(t))]}function ki(e,t,n,r){return Ci(e,t,n(Zr(e,t)),r)}function $i(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Mi(e,r?0:a,r?a+1:i):Mi(e,r?a+1:0,r?i:a)}function Vi(e,t){var n=e;return n instanceof Tr&&(n=n.value()),tn(t,function(e,t){return t.func.apply(t.thisArg,en([e],t.args))},n)}function Yi(e,t,n){var i=e.length;if(i<2)return i?Hi(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var u=e[a],s=-1;++s<i;)s!=a&&(o[a]=Fr(o[a]||u,e[s],t,n));return Hi(Gr(o,1),t,n)}function ji(e,t,n){for(var r=-1,i=e.length,o=t.length,u={};++r<i;){var s=r<o?t[r]:a;n(u,e[r],s)}return u}function Gi(e){return Au(e)?e:[]}function Bi(e){return"function"==typeof e?e:Ms}function Xi(e,t){return Tu(e)?e:qa(e,t)?[e]:so(Bu(e))}var qi=yi;function zi(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:Mi(e,t,n)}var Wi=Un||function(e){return Lt.clearTimeout(e)};function Zi(e,t){if(t)return e.slice();var n=e.length,r=It?It(n):new e.constructor(n);return e.copy(r),r}function Ki(e){var t=new e.constructor(e.byteLength);return new Ot(t).set(new Ot(e)),t}function Qi(e,t){var n=t?Ki(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ji(e,t){if(e!==t){var n=e!==a,r=null===e,i=e==e,o=Uu(e),u=t!==a,s=null===t,c=t==t,l=Uu(t);if(!s&&!l&&!o&&e>t||o&&u&&c&&!s&&!l||r&&u&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||s&&n&&i||!u&&i||!c)return-1}return 0}function ea(e,t,n,i){for(var a=-1,o=e.length,u=n.length,s=-1,c=t.length,l=Bn(o-u,0),d=r(c+l),f=!i;++s<c;)d[s]=t[s];for(;++a<u;)(f||a<o)&&(d[n[a]]=e[a]);for(;l--;)d[s++]=e[a++];return d}function ta(e,t,n,i){for(var a=-1,o=e.length,u=-1,s=n.length,c=-1,l=t.length,d=Bn(o-s,0),f=r(d+l),_=!i;++a<d;)f[a]=e[a];for(var v=a;++c<l;)f[v+c]=t[c];for(;++u<s;)(_||a<o)&&(f[v+n[u]]=e[a++]);return f}function na(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function ra(e,t,n,r){var i=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var s=t[o],c=r?r(n[s],e[s],s,n,e):a;c===a&&(c=e[s]),i?Pr(n,s,c):Ir(n,s,c)}return n}function ia(e,t){return function(n,r){var i=Tu(n)?Xt:Mr,a=t?t():{};return i(n,e,Ua(r,2),a)}}function aa(e){return yi(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,u=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,u&&Xa(n[0],n[1],u)&&(o=i<3?a:o,i=1),t=tt(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function oa(e,t){return function(n,r){if(null==n)return n;if(!mu(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=tt(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function ua(e){return function(t,n,r){for(var i=-1,a=tt(t),o=r(t),u=o.length;u--;){var s=o[e?u:++i];if(!1===n(a[s],s,a))break}return t}}function sa(e){return function(t){var n=Rn(t=Bu(t))?Pn(t):a,r=n?n[0]:t.charAt(0),i=n?zi(n,1).join(""):t.slice(1);return r[e]()+i}}function ca(e){return function(t){return tn(Ns(ps(t).replace(Et,"")),e,"")}}function la(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=vr(e.prototype),r=e.apply(n,t);return Du(r)?r:n}}function da(e){return function(t,n,r){var i=tt(t);if(!mu(t)){var o=Ua(n,3);t=is(t),n=function(e){return o(i[e],e,i)}}var u=e(t,n,r);return u>-1?i[o?t[u]:u]:a}}function fa(e){return Sa(function(t){var n=t.length,r=n,i=pr.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new it(s);if(i&&!u&&"wrapper"==La(o))var u=new pr([],!0)}for(r=u?r:n;++r<n;){var c=La(o=t[r]),l="wrapper"==c?Pa(o):a;u=l&&za(l[0])&&l[1]==(N|A|O|R)&&!l[4].length&&1==l[9]?u[La(l[0])].apply(u,l[3]):1==o.length&&za(o)?u[c]():u.thru(o)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Tu(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}})}function _a(e,t,n,i,o,u,s,c,l,d){var f=t&N,_=t&T,v=t&E,h=t&(A|g),p=t&C,m=v?a:la(e);return function T(){for(var E=arguments.length,A=r(E),g=E;g--;)A[g]=arguments[g];if(h)var O=xa(T),y=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(A,O);if(i&&(A=ea(A,i,o,h)),u&&(A=ta(A,u,s,h)),E-=y,h&&E<d){var N=In(A,O);return Aa(e,t,_a,T.placeholder,n,A,N,c,l,d-E)}var R=_?n:this,C=v?R[e]:e;return E=A.length,c?A=function(e,t){for(var n=e.length,r=Xn(t.length,n),i=na(e);r--;){var o=t[r];e[r]=Ba(o,n)?i[o]:a}return e}(A,c):p&&E>1&&A.reverse(),f&&l<E&&(A.length=l),this&&this!==Lt&&this instanceof T&&(C=m||la(C)),C.apply(R,A)}}function va(e,t){return function(n,r){return function(e,t,n,r){return qr(e,function(e,i,a){t(r,n(e),i,a)}),r}(n,e,t(r),{})}}function ha(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=wi(n),r=wi(r)):(n=Ui(n),r=Ui(r)),i=e(n,r)}return i}}function pa(e){return Sa(function(t){return t=Jt(t,Tn(Ua())),yi(function(n){var r=this;return e(t,function(e){return Bt(e,r,n)})})})}function Ta(e,t){var n=(t=t===a?" ":wi(t)).length;if(n<2)return n?Oi(t,e):t;var r=Oi(t,Fn(e/bn(t)));return Rn(t)?zi(Pn(r),0,e).join(""):r.slice(0,e)}function Ea(e){return function(t,n,i){return i&&"number"!=typeof i&&Xa(t,n,i)&&(n=i=a),t=$u(t),n===a?(n=t,t=0):n=$u(n),function(e,t,n,i){for(var a=-1,o=Bn(Fn((t-e)/(n||1)),0),u=r(o);o--;)u[i?o:++a]=e,e+=n;return u}(t,n,i=i===a?t<n?1:-1:$u(i),e)}}function ma(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ju(t),n=ju(n)),e(t,n)}}function Aa(e,t,n,r,i,o,u,s,c,l){var d=t&A;t|=d?O:y,(t&=~(d?y:O))&m||(t&=~(T|E));var f=[e,t,i,d?o:a,d?u:a,d?a:o,d?a:u,s,c,l],_=n.apply(a,f);return za(e)&&no(_,f),_.placeholder=r,ao(_,e,t)}function ga(e){var t=et[e];return function(e,n){if(e=ju(e),n=null==n?0:Xn(Vu(n),292)){var r=(Bu(e)+"e").split("e");return+((r=(Bu(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Oa=er&&1/Sn(new er([,-0]))[1]==L?function(e){return new er(e)}:Us;function ya(e){return function(t){var n=Va(t);return n==Z?Cn(t):n==ne?Mn(t):function(e,t){return Jt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Na(e,t,n,i,o,u,c,l){var f=t&E;if(!f&&"function"!=typeof e)throw new it(s);var _=i?i.length:0;if(_||(t&=~(O|y),i=o=a),c=c===a?c:Bn(Vu(c),0),l=l===a?l:Vu(l),_-=o?o.length:0,t&y){var v=i,h=o;i=o=a}var p=f?a:Pa(e),C=[e,t,n,i,o,v,h,u,c,l];if(p&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<(T|E|N),o=r==N&&n==A||r==N&&n==R&&e[7].length<=t[8]||r==(N|R)&&t[7].length<=t[8]&&n==A;if(!a&&!o)return e;r&T&&(e[2]=t[2],i|=n&T?0:m);var u=t[3];if(u){var s=e[3];e[3]=s?ea(s,u,t[4]):u,e[4]=s?In(e[3],d):t[4]}(u=t[5])&&(s=e[5],e[5]=s?ta(s,u,t[6]):u,e[6]=s?In(e[5],d):t[6]),(u=t[7])&&(e[7]=u),r&N&&(e[8]=null==e[8]?t[8]:Xn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(C,p),e=C[0],t=C[1],n=C[2],i=C[3],o=C[4],!(l=C[9]=C[9]===a?f?0:e.length:Bn(C[9]-_,0))&&t&(A|g)&&(t&=~(A|g)),t&&t!=T)D=t==A||t==g?function(e,t,n){var i=la(e);return function o(){for(var u=arguments.length,s=r(u),c=u,l=xa(o);c--;)s[c]=arguments[c];var d=u<3&&s[0]!==l&&s[u-1]!==l?[]:In(s,l);return(u-=d.length)<n?Aa(e,t,_a,o.placeholder,a,s,d,a,a,n-u):Bt(this&&this!==Lt&&this instanceof o?i:e,this,s)}}(e,t,l):t!=O&&t!=(T|O)||o.length?_a.apply(a,C):function(e,t,n,i){var a=t&T,o=la(e);return function t(){for(var u=-1,s=arguments.length,c=-1,l=i.length,d=r(l+s),f=this&&this!==Lt&&this instanceof t?o:e;++c<l;)d[c]=i[c];for(;s--;)d[c++]=arguments[++u];return Bt(f,a?n:this,d)}}(e,t,n,i);else var D=function(e,t,n){var r=t&T,i=la(e);return function t(){return(this&&this!==Lt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ao((p?Di:no)(D,C),e,t)}function Ra(e,t,n,r){return e===a||_u(e,ut[n])&&!lt.call(r,n)?t:e}function Ca(e,t,n,r,i,o){return Du(e)&&Du(t)&&(o.set(t,e),hi(e,t,a,Ca,o),o.delete(t)),e}function Da(e){return bu(e)?a:e}function Ia(e,t,n,r,i,o){var u=n&h,s=e.length,c=t.length;if(s!=c&&!(u&&c>s))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var d=-1,f=!0,_=n&p?new gr:a;for(o.set(e,t),o.set(t,e);++d<s;){var v=e[d],T=t[d];if(r)var E=u?r(T,v,d,t,e,o):r(v,T,d,e,t,o);if(E!==a){if(E)continue;f=!1;break}if(_){if(!rn(t,function(e,t){if(!mn(_,t)&&(v===e||i(v,e,n,r,o)))return _.push(t)})){f=!1;break}}else if(v!==T&&!i(v,T,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function Sa(e){return io(Ja(e,a,Eo),e+"")}function Ma(e){return Kr(e,is,ka)}function ba(e){return Kr(e,as,$a)}var Pa=rr?function(e){return rr.get(e)}:Us;function La(e){for(var t=e.name+"",n=ir[t],r=lt.call(ir,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function xa(e){return(lt.call(_r,"placeholder")?_r:e).placeholder}function Ua(){var e=_r.iteratee||bs;return e=e===bs?si:e,arguments.length?e(arguments[0],arguments[1]):e}function wa(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ha(e){for(var t=is(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ka(i)]}return t}function Fa(e,t){var n=function(e,t){return null==e?a:e[t]}(e,t);return ui(n)?n:a}var ka=$n?function(e){return null==e?[]:(e=tt(e),Zt($n(e),function(t){return xt.call(e,t)}))}:Ys,$a=$n?function(e){for(var t=[];e;)en(t,ka(e)),e=bt(e);return t}:Ys,Va=Qr;function Ya(e,t,n){for(var r=-1,i=(t=Xi(t,e)).length,a=!1;++r<i;){var o=co(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Cu(i)&&Ba(o,i)&&(Tu(e)||pu(e))}function ja(e){return"function"!=typeof e.constructor||Za(e)?{}:vr(bt(e))}function Ga(e){return Tu(e)||pu(e)||!!(Ht&&e&&e[Ht])}function Ba(e,t){var n=typeof e;return!!(t=null==t?x:t)&&("number"==n||"symbol"!=n&&ze.test(e))&&e>-1&&e%1==0&&e<t}function Xa(e,t,n){if(!Du(n))return!1;var r=typeof t;return!!("number"==r?mu(n)&&Ba(t,n.length):"string"==r&&t in n)&&_u(n[t],e)}function qa(e,t){if(Tu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Uu(e))||Me.test(e)||!Se.test(e)||null!=t&&e in tt(t)}function za(e){var t=La(e),n=_r[t];if("function"!=typeof n||!(t in Tr.prototype))return!1;if(e===n)return!0;var r=Pa(n);return!!r&&e===r[0]}(Kn&&Va(new Kn(new ArrayBuffer(1)))!=ce||Qn&&Va(new Qn)!=Z||Jn&&"[object Promise]"!=Va(Jn.resolve())||er&&Va(new er)!=ne||tr&&Va(new tr)!=oe)&&(Va=function(e){var t=Qr(e),n=t==J?e.constructor:a,r=n?lo(n):"";if(r)switch(r){case ar:return ce;case or:return Z;case ur:return"[object Promise]";case sr:return ne;case cr:return oe}return t});var Wa=st?Nu:js;function Za(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ut)}function Ka(e){return e==e&&!Du(e)}function Qa(e,t){return function(n){return null!=n&&n[e]===t&&(t!==a||e in tt(n))}}function Ja(e,t,n){return t=Bn(t===a?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=Bn(i.length-t,0),u=r(o);++a<o;)u[a]=i[t+a];a=-1;for(var s=r(t+1);++a<t;)s[a]=i[a];return s[t]=n(u),Bt(e,this,s)}}function eo(e,t){return t.length<2?e:Zr(e,Mi(t,0,-1))}function to(e,t){if("__proto__"!=t)return e[t]}var no=oo(Di),ro=Hn||function(e,t){return Lt.setTimeout(e,t)},io=oo(Ii);function ao(e,t,n){var r=t+"";return io(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(He,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return qt($,function(n){var r="_."+n[0];t&n[1]&&!Kt(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Fe);return t?t[1].split(ke):[]}(r),n)))}function oo(e){var t=0,n=0;return function(){var r=qn(),i=M-(r-n);if(n=r,i>0){if(++t>=S)return arguments[0]}else t=0;return e.apply(a,arguments)}}function uo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=gi(n,i),u=e[o];e[o]=e[n],e[n]=u}return e.length=t,e}var so=function(e){var t=uu(e,function(e){return n.size===l&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(be,function(e,n,r,i){t.push(r?i.replace(Ve,"$1"):n||e)}),t});function co(e){if("string"==typeof e||Uu(e))return e;var t=e+"";return"0"==t&&1/e==-L?"-0":t}function lo(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function fo(e){if(e instanceof Tr)return e.clone();var t=new pr(e.__wrapped__,e.__chain__);return t.__actions__=na(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var _o=yi(function(e,t){return Au(e)?Fr(e,Gr(t,1,Au,!0)):[]}),vo=yi(function(e,t){var n=yo(t);return Au(n)&&(n=a),Au(e)?Fr(e,Gr(t,1,Au,!0),Ua(n,2)):[]}),ho=yi(function(e,t){var n=yo(t);return Au(n)&&(n=a),Au(e)?Fr(e,Gr(t,1,Au,!0),a,n):[]});function po(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Vu(n);return i<0&&(i=Bn(r+i,0)),un(e,Ua(t,3),i)}function To(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=Vu(n),i=n<0?Bn(r+i,0):Xn(i,r-1)),un(e,Ua(t,3),i,!0)}function Eo(e){return null!=e&&e.length?Gr(e,1):[]}function mo(e){return e&&e.length?e[0]:a}var Ao=yi(function(e){var t=Jt(e,Gi);return t.length&&t[0]===e[0]?ni(t):[]}),go=yi(function(e){var t=yo(e),n=Jt(e,Gi);return t===yo(n)?t=a:n.pop(),n.length&&n[0]===e[0]?ni(n,Ua(t,2)):[]}),Oo=yi(function(e){var t=yo(e),n=Jt(e,Gi);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?ni(n,a,t):[]});function yo(e){var t=null==e?0:e.length;return t?e[t-1]:a}var No=yi(Ro);function Ro(e,t){return e&&e.length&&t&&t.length?mi(e,t):e}var Co=Sa(function(e,t){var n=null==e?0:e.length,r=Lr(e,t);return Ai(e,Jt(t,function(e){return Ba(e,n)?+e:e}).sort(Ji)),r});function Do(e){return null==e?e:Zn.call(e)}var Io=yi(function(e){return Hi(Gr(e,1,Au,!0))}),So=yi(function(e){var t=yo(e);return Au(t)&&(t=a),Hi(Gr(e,1,Au,!0),Ua(t,2))}),Mo=yi(function(e){var t=yo(e);return t="function"==typeof t?t:a,Hi(Gr(e,1,Au,!0),a,t)});function bo(e){if(!e||!e.length)return[];var t=0;return e=Zt(e,function(e){if(Au(e))return t=Bn(e.length,t),!0}),pn(t,function(t){return Jt(e,fn(t))})}function Po(e,t){if(!e||!e.length)return[];var n=bo(e);return null==t?n:Jt(n,function(e){return Bt(t,a,e)})}var Lo=yi(function(e,t){return Au(e)?Fr(e,t):[]}),xo=yi(function(e){return Yi(Zt(e,Au))}),Uo=yi(function(e){var t=yo(e);return Au(t)&&(t=a),Yi(Zt(e,Au),Ua(t,2))}),wo=yi(function(e){var t=yo(e);return t="function"==typeof t?t:a,Yi(Zt(e,Au),a,t)}),Ho=yi(bo);var Fo=yi(function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,Po(e,n)});function ko(e){var t=_r(e);return t.__chain__=!0,t}function $o(e,t){return t(e)}var Vo=Sa(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Lr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Tr&&Ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:$o,args:[i],thisArg:a}),new pr(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(a),e})):this.thru(i)});var Yo=ia(function(e,t,n){lt.call(e,n)?++e[n]:Pr(e,n,1)});var jo=da(po),Go=da(To);function Bo(e,t){return(Tu(e)?qt:kr)(e,Ua(t,3))}function Xo(e,t){return(Tu(e)?zt:$r)(e,Ua(t,3))}var qo=ia(function(e,t,n){lt.call(e,n)?e[n].push(t):Pr(e,n,[t])});var zo=yi(function(e,t,n){var i=-1,a="function"==typeof t,o=mu(e)?r(e.length):[];return kr(e,function(e){o[++i]=a?Bt(t,e,n):ri(e,t,n)}),o}),Wo=ia(function(e,t,n){Pr(e,n,t)});function Zo(e,t){return(Tu(e)?Jt:fi)(e,Ua(t,3))}var Ko=ia(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Qo=yi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Xa(e,t[0],t[1])?t=[]:n>2&&Xa(t[0],t[1],t[2])&&(t=[t[0]]),Ti(e,Gr(t,1),[])}),Jo=wn||function(){return Lt.Date.now()};function eu(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Na(e,N,a,a,a,a,t)}function tu(e,t){var n;if("function"!=typeof t)throw new it(s);return e=Vu(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var nu=yi(function(e,t,n){var r=T;if(n.length){var i=In(n,xa(nu));r|=O}return Na(e,r,t,n,i)}),ru=yi(function(e,t,n){var r=T|E;if(n.length){var i=In(n,xa(ru));r|=O}return Na(t,r,e,n,i)});function iu(e,t,n){var r,i,o,u,c,l,d=0,f=!1,_=!1,v=!0;if("function"!=typeof e)throw new it(s);function h(t){var n=r,o=i;return r=i=a,d=t,u=e.apply(o,n)}function p(e){var n=e-l;return l===a||n>=t||n<0||_&&e-d>=o}function T(){var e=Jo();if(p(e))return E(e);c=ro(T,function(e){var n=t-(e-l);return _?Xn(n,o-(e-d)):n}(e))}function E(e){return c=a,v&&r?h(e):(r=i=a,u)}function m(){var e=Jo(),n=p(e);if(r=arguments,i=this,l=e,n){if(c===a)return function(e){return d=e,c=ro(T,t),f?h(e):u}(l);if(_)return c=ro(T,t),h(l)}return c===a&&(c=ro(T,t)),u}return t=ju(t)||0,Du(n)&&(f=!!n.leading,o=(_="maxWait"in n)?Bn(ju(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),m.cancel=function(){c!==a&&Wi(c),d=0,r=l=i=c=a},m.flush=function(){return c===a?u:E(Jo())},m}var au=yi(function(e,t){return Hr(e,1,t)}),ou=yi(function(e,t,n){return Hr(e,ju(t)||0,n)});function uu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(uu.Cache||Ar),n}function su(e){if("function"!=typeof e)throw new it(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}uu.Cache=Ar;var cu=qi(function(e,t){var n=(t=1==t.length&&Tu(t[0])?Jt(t[0],Tn(Ua())):Jt(Gr(t,1),Tn(Ua()))).length;return yi(function(r){for(var i=-1,a=Xn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Bt(e,this,r)})}),lu=yi(function(e,t){var n=In(t,xa(lu));return Na(e,O,a,t,n)}),du=yi(function(e,t){var n=In(t,xa(du));return Na(e,y,a,t,n)}),fu=Sa(function(e,t){return Na(e,R,a,a,a,t)});function _u(e,t){return e===t||e!=e&&t!=t}var vu=ma(Jr),hu=ma(function(e,t){return e>=t}),pu=ii(function(){return arguments}())?ii:function(e){return Iu(e)&&lt.call(e,"callee")&&!xt.call(e,"callee")},Tu=r.isArray,Eu=kt?Tn(kt):function(e){return Iu(e)&&Qr(e)==se};function mu(e){return null!=e&&Cu(e.length)&&!Nu(e)}function Au(e){return Iu(e)&&mu(e)}var gu=Vn||js,Ou=$t?Tn($t):function(e){return Iu(e)&&Qr(e)==B};function yu(e){if(!Iu(e))return!1;var t=Qr(e);return t==q||t==X||"string"==typeof e.message&&"string"==typeof e.name&&!bu(e)}function Nu(e){if(!Du(e))return!1;var t=Qr(e);return t==z||t==W||t==j||t==ee}function Ru(e){return"number"==typeof e&&e==Vu(e)}function Cu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=x}function Du(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Iu(e){return null!=e&&"object"==typeof e}var Su=Vt?Tn(Vt):function(e){return Iu(e)&&Va(e)==Z};function Mu(e){return"number"==typeof e||Iu(e)&&Qr(e)==K}function bu(e){if(!Iu(e)||Qr(e)!=J)return!1;var t=bt(e);if(null===t)return!0;var n=lt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ct.call(n)==vt}var Pu=Yt?Tn(Yt):function(e){return Iu(e)&&Qr(e)==te};var Lu=jt?Tn(jt):function(e){return Iu(e)&&Va(e)==ne};function xu(e){return"string"==typeof e||!Tu(e)&&Iu(e)&&Qr(e)==re}function Uu(e){return"symbol"==typeof e||Iu(e)&&Qr(e)==ie}var wu=Gt?Tn(Gt):function(e){return Iu(e)&&Cu(e.length)&&!!Ct[Qr(e)]};var Hu=ma(di),Fu=ma(function(e,t){return e<=t});function ku(e){if(!e)return[];if(mu(e))return xu(e)?Pn(e):na(e);if(Ft&&e[Ft])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ft]());var t=Va(e);return(t==Z?Cn:t==ne?Sn:_s)(e)}function $u(e){return e?(e=ju(e))===L||e===-L?(e<0?-1:1)*U:e==e?e:0:0===e?e:0}function Vu(e){var t=$u(e),n=t%1;return t==t?n?t-n:t:0}function Yu(e){return e?xr(Vu(e),0,H):0}function ju(e){if("number"==typeof e)return e;if(Uu(e))return w;if(Du(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Du(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(xe,"");var n=Be.test(e);return n||qe.test(e)?Mt(e.slice(2),n?2:8):Ge.test(e)?w:+e}function Gu(e){return ra(e,as(e))}function Bu(e){return null==e?"":wi(e)}var Xu=aa(function(e,t){if(Za(t)||mu(t))ra(t,is(t),e);else for(var n in t)lt.call(t,n)&&Ir(e,n,t[n])}),qu=aa(function(e,t){ra(t,as(t),e)}),zu=aa(function(e,t,n,r){ra(t,as(t),e,r)}),Wu=aa(function(e,t,n,r){ra(t,is(t),e,r)}),Zu=Sa(Lr);var Ku=yi(function(e,t){e=tt(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&Xa(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],u=as(o),s=-1,c=u.length;++s<c;){var l=u[s],d=e[l];(d===a||_u(d,ut[l])&&!lt.call(e,l))&&(e[l]=o[l])}return e}),Qu=yi(function(e){return e.push(a,Ca),Bt(us,a,e)});function Ju(e,t,n){var r=null==e?a:Zr(e,t);return r===a?n:r}function es(e,t){return null!=e&&Ya(e,t,ti)}var ts=va(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_t.call(t)),e[t]=n},Ds(Ms)),ns=va(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_t.call(t)),lt.call(e,t)?e[t].push(n):e[t]=[n]},Ua),rs=yi(ri);function is(e){return mu(e)?yr(e):ci(e)}function as(e){return mu(e)?yr(e,!0):li(e)}var os=aa(function(e,t,n){hi(e,t,n)}),us=aa(function(e,t,n,r){hi(e,t,n,r)}),ss=Sa(function(e,t){var n={};if(null==e)return n;var r=!1;t=Jt(t,function(t){return t=Xi(t,e),r||(r=t.length>1),t}),ra(e,ba(e),n),r&&(n=Ur(n,f|_|v,Da));for(var i=t.length;i--;)Fi(n,t[i]);return n});var cs=Sa(function(e,t){return null==e?{}:function(e,t){return Ei(e,t,function(t,n){return es(e,n)})}(e,t)});function ls(e,t){if(null==e)return{};var n=Jt(ba(e),function(e){return[e]});return t=Ua(t),Ei(e,n,function(e,n){return t(e,n[0])})}var ds=ya(is),fs=ya(as);function _s(e){return null==e?[]:En(e,is(e))}var vs=ca(function(e,t,n){return t=t.toLowerCase(),e+(n?hs(t):t)});function hs(e){return ys(Bu(e).toLowerCase())}function ps(e){return(e=Bu(e))&&e.replace(We,On).replace(mt,"")}var Ts=ca(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Es=ca(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ms=sa("toLowerCase");var As=ca(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var gs=ca(function(e,t,n){return e+(n?" ":"")+ys(t)});var Os=ca(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ys=sa("toUpperCase");function Ns(e,t,n){return e=Bu(e),(t=n?a:t)===a?function(e){return yt.test(e)}(e)?function(e){return e.match(gt)||[]}(e):function(e){return e.match($e)||[]}(e):e.match(t)||[]}var Rs=yi(function(e,t){try{return Bt(e,a,t)}catch(e){return yu(e)?e:new Qe(e)}}),Cs=Sa(function(e,t){return qt(t,function(t){t=co(t),Pr(e,t,nu(e[t],e))}),e});function Ds(e){return function(){return e}}var Is=fa(),Ss=fa(!0);function Ms(e){return e}function bs(e){return si("function"==typeof e?e:Ur(e,f))}var Ps=yi(function(e,t){return function(n){return ri(n,e,t)}}),Ls=yi(function(e,t){return function(n){return ri(e,n,t)}});function xs(e,t,n){var r=is(t),i=Wr(t,r);null!=n||Du(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Wr(t,is(t)));var a=!(Du(n)&&"chain"in n&&!n.chain),o=Nu(e);return qt(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=na(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,en([this.value()],arguments))})}),e}function Us(){}var ws=pa(Jt),Hs=pa(Wt),Fs=pa(rn);function ks(e){return qa(e)?fn(co(e)):function(e){return function(t){return Zr(t,e)}}(e)}var $s=Ea(),Vs=Ea(!0);function Ys(){return[]}function js(){return!1}var Gs=ha(function(e,t){return e+t},0),Bs=ga("ceil"),Xs=ha(function(e,t){return e/t},1),qs=ga("floor");var zs,Ws=ha(function(e,t){return e*t},1),Zs=ga("round"),Ks=ha(function(e,t){return e-t},0);return _r.after=function(e,t){if("function"!=typeof t)throw new it(s);return e=Vu(e),function(){if(--e<1)return t.apply(this,arguments)}},_r.ary=eu,_r.assign=Xu,_r.assignIn=qu,_r.assignInWith=zu,_r.assignWith=Wu,_r.at=Zu,_r.before=tu,_r.bind=nu,_r.bindAll=Cs,_r.bindKey=ru,_r.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Tu(e)?e:[e]},_r.chain=ko,_r.chunk=function(e,t,n){t=(n?Xa(e,t,n):t===a)?1:Bn(Vu(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,u=0,s=r(Fn(i/t));o<i;)s[u++]=Mi(e,o,o+=t);return s},_r.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},_r.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return en(Tu(n)?na(n):[n],Gr(t,1))},_r.cond=function(e){var t=null==e?0:e.length,n=Ua();return e=t?Jt(e,function(e){if("function"!=typeof e[1])throw new it(s);return[n(e[0]),e[1]]}):[],yi(function(n){for(var r=-1;++r<t;){var i=e[r];if(Bt(i[0],this,n))return Bt(i[1],this,n)}})},_r.conforms=function(e){return function(e){var t=is(e);return function(n){return wr(n,e,t)}}(Ur(e,f))},_r.constant=Ds,_r.countBy=Yo,_r.create=function(e,t){var n=vr(e);return null==t?n:br(n,t)},_r.curry=function e(t,n,r){var i=Na(t,A,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},_r.curryRight=function e(t,n,r){var i=Na(t,g,a,a,a,a,a,n=r?a:n);return i.placeholder=e.placeholder,i},_r.debounce=iu,_r.defaults=Ku,_r.defaultsDeep=Qu,_r.defer=au,_r.delay=ou,_r.difference=_o,_r.differenceBy=vo,_r.differenceWith=ho,_r.drop=function(e,t,n){var r=null==e?0:e.length;return r?Mi(e,(t=n||t===a?1:Vu(t))<0?0:t,r):[]},_r.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Mi(e,0,(t=r-(t=n||t===a?1:Vu(t)))<0?0:t):[]},_r.dropRightWhile=function(e,t){return e&&e.length?$i(e,Ua(t,3),!0,!0):[]},_r.dropWhile=function(e,t){return e&&e.length?$i(e,Ua(t,3),!0):[]},_r.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Xa(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=Vu(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:Vu(r))<0&&(r+=i),r=n>r?0:Yu(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},_r.filter=function(e,t){return(Tu(e)?Zt:jr)(e,Ua(t,3))},_r.flatMap=function(e,t){return Gr(Zo(e,t),1)},_r.flatMapDeep=function(e,t){return Gr(Zo(e,t),L)},_r.flatMapDepth=function(e,t,n){return n=n===a?1:Vu(n),Gr(Zo(e,t),n)},_r.flatten=Eo,_r.flattenDeep=function(e){return null!=e&&e.length?Gr(e,L):[]},_r.flattenDepth=function(e,t){return null!=e&&e.length?Gr(e,t=t===a?1:Vu(t)):[]},_r.flip=function(e){return Na(e,C)},_r.flow=Is,_r.flowRight=Ss,_r.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},_r.functions=function(e){return null==e?[]:Wr(e,is(e))},_r.functionsIn=function(e){return null==e?[]:Wr(e,as(e))},_r.groupBy=qo,_r.initial=function(e){return null!=e&&e.length?Mi(e,0,-1):[]},_r.intersection=Ao,_r.intersectionBy=go,_r.intersectionWith=Oo,_r.invert=ts,_r.invertBy=ns,_r.invokeMap=zo,_r.iteratee=bs,_r.keyBy=Wo,_r.keys=is,_r.keysIn=as,_r.map=Zo,_r.mapKeys=function(e,t){var n={};return t=Ua(t,3),qr(e,function(e,r,i){Pr(n,t(e,r,i),e)}),n},_r.mapValues=function(e,t){var n={};return t=Ua(t,3),qr(e,function(e,r,i){Pr(n,r,t(e,r,i))}),n},_r.matches=function(e){return _i(Ur(e,f))},_r.matchesProperty=function(e,t){return vi(e,Ur(t,f))},_r.memoize=uu,_r.merge=os,_r.mergeWith=us,_r.method=Ps,_r.methodOf=Ls,_r.mixin=xs,_r.negate=su,_r.nthArg=function(e){return e=Vu(e),yi(function(t){return pi(t,e)})},_r.omit=ss,_r.omitBy=function(e,t){return ls(e,su(Ua(t)))},_r.once=function(e){return tu(2,e)},_r.orderBy=function(e,t,n,r){return null==e?[]:(Tu(t)||(t=null==t?[]:[t]),Tu(n=r?a:n)||(n=null==n?[]:[n]),Ti(e,t,n))},_r.over=ws,_r.overArgs=cu,_r.overEvery=Hs,_r.overSome=Fs,_r.partial=lu,_r.partialRight=du,_r.partition=Ko,_r.pick=cs,_r.pickBy=ls,_r.property=ks,_r.propertyOf=function(e){return function(t){return null==e?a:Zr(e,t)}},_r.pull=No,_r.pullAll=Ro,_r.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?mi(e,t,Ua(n,2)):e},_r.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?mi(e,t,a,n):e},_r.pullAt=Co,_r.range=$s,_r.rangeRight=Vs,_r.rearg=fu,_r.reject=function(e,t){return(Tu(e)?Zt:jr)(e,su(Ua(t,3)))},_r.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=Ua(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Ai(e,i),n},_r.rest=function(e,t){if("function"!=typeof e)throw new it(s);return yi(e,t=t===a?t:Vu(t))},_r.reverse=Do,_r.sampleSize=function(e,t,n){return t=(n?Xa(e,t,n):t===a)?1:Vu(t),(Tu(e)?Rr:Ri)(e,t)},_r.set=function(e,t,n){return null==e?e:Ci(e,t,n)},_r.setWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:Ci(e,t,n,r)},_r.shuffle=function(e){return(Tu(e)?Cr:Si)(e)},_r.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Xa(e,t,n)?(t=0,n=r):(t=null==t?0:Vu(t),n=n===a?r:Vu(n)),Mi(e,t,n)):[]},_r.sortBy=Qo,_r.sortedUniq=function(e){return e&&e.length?xi(e):[]},_r.sortedUniqBy=function(e,t){return e&&e.length?xi(e,Ua(t,2)):[]},_r.split=function(e,t,n){return n&&"number"!=typeof n&&Xa(e,t,n)&&(t=n=a),(n=n===a?H:n>>>0)?(e=Bu(e))&&("string"==typeof t||null!=t&&!Pu(t))&&!(t=wi(t))&&Rn(e)?zi(Pn(e),0,n):e.split(t,n):[]},_r.spread=function(e,t){if("function"!=typeof e)throw new it(s);return t=null==t?0:Bn(Vu(t),0),yi(function(n){var r=n[t],i=zi(n,0,t);return r&&en(i,r),Bt(e,this,i)})},_r.tail=function(e){var t=null==e?0:e.length;return t?Mi(e,1,t):[]},_r.take=function(e,t,n){return e&&e.length?Mi(e,0,(t=n||t===a?1:Vu(t))<0?0:t):[]},_r.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Mi(e,(t=r-(t=n||t===a?1:Vu(t)))<0?0:t,r):[]},_r.takeRightWhile=function(e,t){return e&&e.length?$i(e,Ua(t,3),!1,!0):[]},_r.takeWhile=function(e,t){return e&&e.length?$i(e,Ua(t,3)):[]},_r.tap=function(e,t){return t(e),e},_r.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new it(s);return Du(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),iu(e,t,{leading:r,maxWait:t,trailing:i})},_r.thru=$o,_r.toArray=ku,_r.toPairs=ds,_r.toPairsIn=fs,_r.toPath=function(e){return Tu(e)?Jt(e,co):Uu(e)?[e]:na(so(Bu(e)))},_r.toPlainObject=Gu,_r.transform=function(e,t,n){var r=Tu(e),i=r||gu(e)||wu(e);if(t=Ua(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:Du(e)&&Nu(a)?vr(bt(e)):{}}return(i?qt:qr)(e,function(e,r,i){return t(n,e,r,i)}),n},_r.unary=function(e){return eu(e,1)},_r.union=Io,_r.unionBy=So,_r.unionWith=Mo,_r.uniq=function(e){return e&&e.length?Hi(e):[]},_r.uniqBy=function(e,t){return e&&e.length?Hi(e,Ua(t,2)):[]},_r.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?Hi(e,a,t):[]},_r.unset=function(e,t){return null==e||Fi(e,t)},_r.unzip=bo,_r.unzipWith=Po,_r.update=function(e,t,n){return null==e?e:ki(e,t,Bi(n))},_r.updateWith=function(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:ki(e,t,Bi(n),r)},_r.values=_s,_r.valuesIn=function(e){return null==e?[]:En(e,as(e))},_r.without=Lo,_r.words=Ns,_r.wrap=function(e,t){return lu(Bi(t),e)},_r.xor=xo,_r.xorBy=Uo,_r.xorWith=wo,_r.zip=Ho,_r.zipObject=function(e,t){return ji(e||[],t||[],Ir)},_r.zipObjectDeep=function(e,t){return ji(e||[],t||[],Ci)},_r.zipWith=Fo,_r.entries=ds,_r.entriesIn=fs,_r.extend=qu,_r.extendWith=zu,xs(_r,_r),_r.add=Gs,_r.attempt=Rs,_r.camelCase=vs,_r.capitalize=hs,_r.ceil=Bs,_r.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=ju(n))==n?n:0),t!==a&&(t=(t=ju(t))==t?t:0),xr(ju(e),t,n)},_r.clone=function(e){return Ur(e,v)},_r.cloneDeep=function(e){return Ur(e,f|v)},_r.cloneDeepWith=function(e,t){return Ur(e,f|v,t="function"==typeof t?t:a)},_r.cloneWith=function(e,t){return Ur(e,v,t="function"==typeof t?t:a)},_r.conformsTo=function(e,t){return null==t||wr(e,t,is(t))},_r.deburr=ps,_r.defaultTo=function(e,t){return null==e||e!=e?t:e},_r.divide=Xs,_r.endsWith=function(e,t,n){e=Bu(e),t=wi(t);var r=e.length,i=n=n===a?r:xr(Vu(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},_r.eq=_u,_r.escape=function(e){return(e=Bu(e))&&Re.test(e)?e.replace(ye,yn):e},_r.escapeRegExp=function(e){return(e=Bu(e))&&Le.test(e)?e.replace(Pe,"\\$&"):e},_r.every=function(e,t,n){var r=Tu(e)?Wt:Vr;return n&&Xa(e,t,n)&&(t=a),r(e,Ua(t,3))},_r.find=jo,_r.findIndex=po,_r.findKey=function(e,t){return on(e,Ua(t,3),qr)},_r.findLast=Go,_r.findLastIndex=To,_r.findLastKey=function(e,t){return on(e,Ua(t,3),zr)},_r.floor=qs,_r.forEach=Bo,_r.forEachRight=Xo,_r.forIn=function(e,t){return null==e?e:Br(e,Ua(t,3),as)},_r.forInRight=function(e,t){return null==e?e:Xr(e,Ua(t,3),as)},_r.forOwn=function(e,t){return e&&qr(e,Ua(t,3))},_r.forOwnRight=function(e,t){return e&&zr(e,Ua(t,3))},_r.get=Ju,_r.gt=vu,_r.gte=hu,_r.has=function(e,t){return null!=e&&Ya(e,t,ei)},_r.hasIn=es,_r.head=mo,_r.identity=Ms,_r.includes=function(e,t,n,r){e=mu(e)?e:_s(e),n=n&&!r?Vu(n):0;var i=e.length;return n<0&&(n=Bn(i+n,0)),xu(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&sn(e,t,n)>-1},_r.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Vu(n);return i<0&&(i=Bn(r+i,0)),sn(e,t,i)},_r.inRange=function(e,t,n){return t=$u(t),n===a?(n=t,t=0):n=$u(n),function(e,t,n){return e>=Xn(t,n)&&e<Bn(t,n)}(e=ju(e),t,n)},_r.invoke=rs,_r.isArguments=pu,_r.isArray=Tu,_r.isArrayBuffer=Eu,_r.isArrayLike=mu,_r.isArrayLikeObject=Au,_r.isBoolean=function(e){return!0===e||!1===e||Iu(e)&&Qr(e)==G},_r.isBuffer=gu,_r.isDate=Ou,_r.isElement=function(e){return Iu(e)&&1===e.nodeType&&!bu(e)},_r.isEmpty=function(e){if(null==e)return!0;if(mu(e)&&(Tu(e)||"string"==typeof e||"function"==typeof e.splice||gu(e)||wu(e)||pu(e)))return!e.length;var t=Va(e);if(t==Z||t==ne)return!e.size;if(Za(e))return!ci(e).length;for(var n in e)if(lt.call(e,n))return!1;return!0},_r.isEqual=function(e,t){return ai(e,t)},_r.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?ai(e,t,a,n):!!r},_r.isError=yu,_r.isFinite=function(e){return"number"==typeof e&&Yn(e)},_r.isFunction=Nu,_r.isInteger=Ru,_r.isLength=Cu,_r.isMap=Su,_r.isMatch=function(e,t){return e===t||oi(e,t,Ha(t))},_r.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,oi(e,t,Ha(t),n)},_r.isNaN=function(e){return Mu(e)&&e!=+e},_r.isNative=function(e){if(Wa(e))throw new Qe(u);return ui(e)},_r.isNil=function(e){return null==e},_r.isNull=function(e){return null===e},_r.isNumber=Mu,_r.isObject=Du,_r.isObjectLike=Iu,_r.isPlainObject=bu,_r.isRegExp=Pu,_r.isSafeInteger=function(e){return Ru(e)&&e>=-x&&e<=x},_r.isSet=Lu,_r.isString=xu,_r.isSymbol=Uu,_r.isTypedArray=wu,_r.isUndefined=function(e){return e===a},_r.isWeakMap=function(e){return Iu(e)&&Va(e)==oe},_r.isWeakSet=function(e){return Iu(e)&&Qr(e)==ue},_r.join=function(e,t){return null==e?"":jn.call(e,t)},_r.kebabCase=Ts,_r.last=yo,_r.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=Vu(n))<0?Bn(r+i,0):Xn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):un(e,ln,i,!0)},_r.lowerCase=Es,_r.lowerFirst=ms,_r.lt=Hu,_r.lte=Fu,_r.max=function(e){return e&&e.length?Yr(e,Ms,Jr):a},_r.maxBy=function(e,t){return e&&e.length?Yr(e,Ua(t,2),Jr):a},_r.mean=function(e){return dn(e,Ms)},_r.meanBy=function(e,t){return dn(e,Ua(t,2))},_r.min=function(e){return e&&e.length?Yr(e,Ms,di):a},_r.minBy=function(e,t){return e&&e.length?Yr(e,Ua(t,2),di):a},_r.stubArray=Ys,_r.stubFalse=js,_r.stubObject=function(){return{}},_r.stubString=function(){return""},_r.stubTrue=function(){return!0},_r.multiply=Ws,_r.nth=function(e,t){return e&&e.length?pi(e,Vu(t)):a},_r.noConflict=function(){return Lt._===this&&(Lt._=ht),this},_r.noop=Us,_r.now=Jo,_r.pad=function(e,t,n){e=Bu(e);var r=(t=Vu(t))?bn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ta(kn(i),n)+e+Ta(Fn(i),n)},_r.padEnd=function(e,t,n){e=Bu(e);var r=(t=Vu(t))?bn(e):0;return t&&r<t?e+Ta(t-r,n):e},_r.padStart=function(e,t,n){e=Bu(e);var r=(t=Vu(t))?bn(e):0;return t&&r<t?Ta(t-r,n)+e:e},_r.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),zn(Bu(e).replace(Ue,""),t||0)},_r.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Xa(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=$u(e),t===a?(t=e,e=0):t=$u(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Wn();return Xn(e+i*(t-e+St("1e-"+((i+"").length-1))),t)}return gi(e,t)},_r.reduce=function(e,t,n){var r=Tu(e)?tn:vn,i=arguments.length<3;return r(e,Ua(t,4),n,i,kr)},_r.reduceRight=function(e,t,n){var r=Tu(e)?nn:vn,i=arguments.length<3;return r(e,Ua(t,4),n,i,$r)},_r.repeat=function(e,t,n){return t=(n?Xa(e,t,n):t===a)?1:Vu(t),Oi(Bu(e),t)},_r.replace=function(){var e=arguments,t=Bu(e[0]);return e.length<3?t:t.replace(e[1],e[2])},_r.result=function(e,t,n){var r=-1,i=(t=Xi(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[co(t[r])];o===a&&(r=i,o=n),e=Nu(o)?o.call(e):o}return e},_r.round=Zs,_r.runInContext=e,_r.sample=function(e){return(Tu(e)?Nr:Ni)(e)},_r.size=function(e){if(null==e)return 0;if(mu(e))return xu(e)?bn(e):e.length;var t=Va(e);return t==Z||t==ne?e.size:ci(e).length},_r.snakeCase=As,_r.some=function(e,t,n){var r=Tu(e)?rn:bi;return n&&Xa(e,t,n)&&(t=a),r(e,Ua(t,3))},_r.sortedIndex=function(e,t){return Pi(e,t)},_r.sortedIndexBy=function(e,t,n){return Li(e,t,Ua(n,2))},_r.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Pi(e,t);if(r<n&&_u(e[r],t))return r}return-1},_r.sortedLastIndex=function(e,t){return Pi(e,t,!0)},_r.sortedLastIndexBy=function(e,t,n){return Li(e,t,Ua(n,2),!0)},_r.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Pi(e,t,!0)-1;if(_u(e[n],t))return n}return-1},_r.startCase=gs,_r.startsWith=function(e,t,n){return e=Bu(e),n=null==n?0:xr(Vu(n),0,e.length),t=wi(t),e.slice(n,n+t.length)==t},_r.subtract=Ks,_r.sum=function(e){return e&&e.length?hn(e,Ms):0},_r.sumBy=function(e,t){return e&&e.length?hn(e,Ua(t,2)):0},_r.template=function(e,t,n){var r=_r.templateSettings;n&&Xa(e,t,n)&&(t=a),e=Bu(e),t=zu({},t,r,Ra);var i,o,u=zu({},t.imports,r.imports,Ra),s=is(u),c=En(u,s),l=0,d=t.interpolate||Ze,f="__p += '",_=nt((t.escape||Ze).source+"|"+d.source+"|"+(d===Ie?Ye:Ze).source+"|"+(t.evaluate||Ze).source+"|$","g"),v="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Rt+"]")+"\n";e.replace(_,function(t,n,r,a,u,s){return r||(r=a),f+=e.slice(l,s).replace(Ke,Nn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),u&&(o=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+t.length,t}),f+="';\n";var h=t.variable;h||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(me,""):f).replace(Ae,"$1").replace(ge,"$1;"),f="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var p=Rs(function(){return Je(s,v+"return "+f).apply(a,c)});if(p.source=f,yu(p))throw p;return p},_r.times=function(e,t){if((e=Vu(e))<1||e>x)return[];var n=H,r=Xn(e,H);t=Ua(t),e-=H;for(var i=pn(r,t);++n<e;)t(n);return i},_r.toFinite=$u,_r.toInteger=Vu,_r.toLength=Yu,_r.toLower=function(e){return Bu(e).toLowerCase()},_r.toNumber=ju,_r.toSafeInteger=function(e){return e?xr(Vu(e),-x,x):0===e?e:0},_r.toString=Bu,_r.toUpper=function(e){return Bu(e).toUpperCase()},_r.trim=function(e,t,n){if((e=Bu(e))&&(n||t===a))return e.replace(xe,"");if(!e||!(t=wi(t)))return e;var r=Pn(e),i=Pn(t);return zi(r,An(r,i),gn(r,i)+1).join("")},_r.trimEnd=function(e,t,n){if((e=Bu(e))&&(n||t===a))return e.replace(we,"");if(!e||!(t=wi(t)))return e;var r=Pn(e);return zi(r,0,gn(r,Pn(t))+1).join("")},_r.trimStart=function(e,t,n){if((e=Bu(e))&&(n||t===a))return e.replace(Ue,"");if(!e||!(t=wi(t)))return e;var r=Pn(e);return zi(r,An(r,Pn(t))).join("")},_r.truncate=function(e,t){var n=D,r=I;if(Du(t)){var i="separator"in t?t.separator:i;n="length"in t?Vu(t.length):n,r="omission"in t?wi(t.omission):r}var o=(e=Bu(e)).length;if(Rn(e)){var u=Pn(e);o=u.length}if(n>=o)return e;var s=n-bn(r);if(s<1)return r;var c=u?zi(u,0,s).join(""):e.slice(0,s);if(i===a)return c+r;if(u&&(s+=c.length-s),Pu(i)){if(e.slice(s).search(i)){var l,d=c;for(i.global||(i=nt(i.source,Bu(je.exec(i))+"g")),i.lastIndex=0;l=i.exec(d);)var f=l.index;c=c.slice(0,f===a?s:f)}}else if(e.indexOf(wi(i),s)!=s){var _=c.lastIndexOf(i);_>-1&&(c=c.slice(0,_))}return c+r},_r.unescape=function(e){return(e=Bu(e))&&Ne.test(e)?e.replace(Oe,Ln):e},_r.uniqueId=function(e){var t=++dt;return Bu(e)+t},_r.upperCase=Os,_r.upperFirst=ys,_r.each=Bo,_r.eachRight=Xo,_r.first=mo,xs(_r,(zs={},qr(_r,function(e,t){lt.call(_r.prototype,t)||(zs[t]=e)}),zs),{chain:!1}),_r.VERSION="4.17.11",qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_r[e].placeholder=_r}),qt(["drop","take"],function(e,t){Tr.prototype[e]=function(n){n=n===a?1:Bn(Vu(n),0);var r=this.__filtered__&&!t?new Tr(this):this.clone();return r.__filtered__?r.__takeCount__=Xn(n,r.__takeCount__):r.__views__.push({size:Xn(n,H),type:e+(r.__dir__<0?"Right":"")}),r},Tr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),qt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==b||3==n;Tr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ua(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),qt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Tr.prototype[e]=function(){return this[n](1).value()[0]}}),qt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Tr.prototype[e]=function(){return this.__filtered__?new Tr(this):this[n](1)}}),Tr.prototype.compact=function(){return this.filter(Ms)},Tr.prototype.find=function(e){return this.filter(e).head()},Tr.prototype.findLast=function(e){return this.reverse().find(e)},Tr.prototype.invokeMap=yi(function(e,t){return"function"==typeof e?new Tr(this):this.map(function(n){return ri(n,e,t)})}),Tr.prototype.reject=function(e){return this.filter(su(Ua(e)))},Tr.prototype.slice=function(e,t){e=Vu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Tr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=Vu(t))<0?n.dropRight(-t):n.take(t-e)),n)},Tr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Tr.prototype.toArray=function(){return this.take(H)},qr(Tr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=_r[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(_r.prototype[t]=function(){var t=this.__wrapped__,u=r?[1]:arguments,s=t instanceof Tr,c=u[0],l=s||Tu(t),d=function(e){var t=i.apply(_r,en([e],u));return r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(s=l=!1);var f=this.__chain__,_=!!this.__actions__.length,v=o&&!f,h=s&&!_;if(!o&&l){t=h?t:new Tr(this);var p=e.apply(t,u);return p.__actions__.push({func:$o,args:[d],thisArg:a}),new pr(p,f)}return v&&h?e.apply(this,u):(p=this.thru(d),v?r?p.value()[0]:p.value():p)})}),qt(["pop","push","shift","sort","splice","unshift"],function(e){var t=at[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);_r.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Tu(i)?i:[],e)}return this[n](function(n){return t.apply(Tu(n)?n:[],e)})}}),qr(Tr.prototype,function(e,t){var n=_r[t];if(n){var r=n.name+"";(ir[r]||(ir[r]=[])).push({name:t,func:n})}}),ir[_a(a,E).name]=[{name:"wrapper",func:a}],Tr.prototype.clone=function(){var e=new Tr(this.__wrapped__);return e.__actions__=na(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=na(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=na(this.__views__),e},Tr.prototype.reverse=function(){if(this.__filtered__){var e=new Tr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Tr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Tu(e),r=t<0,i=n?e.length:0,a=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Xn(t,e+o);break;case"takeRight":e=Bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,u=a.end,s=u-o,c=r?u:o-1,l=this.__iteratees__,d=l.length,f=0,_=Xn(s,this.__takeCount__);if(!n||!r&&i==s&&_==s)return Vi(e,this.__actions__);var v=[];e:for(;s--&&f<_;){for(var h=-1,p=e[c+=t];++h<d;){var T=l[h],E=T.iteratee,m=T.type,A=E(p);if(m==P)p=A;else if(!A){if(m==b)continue e;break e}}v[f++]=p}return v},_r.prototype.at=Vo,_r.prototype.chain=function(){return ko(this)},_r.prototype.commit=function(){return new pr(this.value(),this.__chain__)},_r.prototype.next=function(){this.__values__===a&&(this.__values__=ku(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},_r.prototype.plant=function(e){for(var t,n=this;n instanceof hr;){var r=fo(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},_r.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Tr){var t=e;return this.__actions__.length&&(t=new Tr(this)),(t=t.reverse()).__actions__.push({func:$o,args:[Do],thisArg:a}),new pr(t,this.__chain__)}return this.thru(Do)},_r.prototype.toJSON=_r.prototype.valueOf=_r.prototype.value=function(){return Vi(this.__wrapped__,this.__actions__)},_r.prototype.first=_r.prototype.head,Ft&&(_r.prototype[Ft]=function(){return this}),_r}();Lt._=xn,(i=function(){return xn}.call(t,n,t,r))===a||(r.exports=i)}).call(this)}).call(this,n(1),n(2)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t);n(4);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"toFixedSafe",value:function(e,t){return e&&void 0!==e?e.toFixed(t):"--"}},{key:"currencyFraction",value:function(e,t){if(!t||e&&!isNaN(e)||(e=0),!isNaN(e)){var n=e/100,r=_this.toFixedSafe(n,2);return parseFloat(r)}}},{key:"isNegative",value:function(e){return parseInt(e)<0?"negative":""}},{key:"twoDecimals",value:function(e){return Number(e).toFixed(2)}},{key:"formatDateUS",value:function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())+" "+(t.getHours()>12?"PM":"AM")}},{key:"formatDateIL",value:function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()>10?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())}}])&&r(t.prototype,n),i&&r(t,i),e}();function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this.configure(t)}var t,n,r;return t=e,(n=[{key:"_translate",value:function(){var e,t;return{"en-US":(e={OTH:"OTH",MANUAL_ITEM_DISCOUNT:"Manual Discount",TOTAL_ORDER:"Subtotal",ORDER_DISCOUNT:"Order Discount",ECVLUSIVE_TAX:"Exclusive Tax",SERVICE_CHARGE:"Service Charge",TIP:"Tip",TOTAL_INC_VAT:"Check Total",CHANGE:"Change",INCLUSIVE_TAXES:"Inclusive Taxes",EXEMPTED_TAXES:"Exempted Taxes",EXEMPTED_TAX:"Tax Exempt",REVERSAL:"Reversal",RETURN:"Return",REFUND:"Refund",PRINT_BY_ORDER:"Order {{order_number}} on {{order_date}} {{order_time}}",WAITER_DINERS:"Server {{waiter}} Guests {{diners}}",TABLE_NUM:"Table {{table}}",TA:"TA",DELIVERY:"Delivery",INITIATED_DISCOUNT:"Initiated.D",CANCEL:"Cancel",CUSTOMER_NAME:"Name",LAST_4:"Last 4 Digits",AMOUNT:"Amount",CHARGE_ACCOUNT:"Charge Account",CASH:"Cash",GIFT_CARD:"Gift Card",GIFT_CARD_LOAD:"Charge Gift Card",CHEQUE:"Cheque",CREDIT:"Credit",CHARGE_ACCOUNT_REFUND:"Charge account refund",CASH_REFUND:"Cash Refund",CHEQUE_REFUND:"Cheque Refund",CREDIT_REFUND:"Credit Refund",OPEN:"Open",ORDER:"Order",CLOSE:"Close",PAYMENT:"Payment",OTH_ORDER_APPLIED:"Order OTH Requested",OTH_ORDER_APPROVED:"Order OTH Approved",OTH_ITEM_APPLIED:"Item OTH Requested",OTH_ITEM_APPROVED:"Item OTH Approved",CANCEL_ITEM_APPLIED:"Cancel Item Requested",CANCEL_ITEM_APPROVED:"Cancel Item Approved",RETURN_ITEM_APPLIED:"Return Item Requested",RETURN_ITEM_APPROVED:"Return Item Approved",PERCENT_OFF_ORDER:"% Off Order",AMOUNT_OFF_ORDER:" Off Order",PERCENT_OFF_ITEM:"% Off Item",APPLIED_SEGMENTATION:"Tag Applied",APPROVED_SEGMENTATION:"Tag Approved",ORDER_TYPES_SEATED:"Seated",ORDER_TYPES_TA:"TA",ORDER_TYPES_DELIVERY:"Delivery",ORDER_TYPES_REFUND:"Refund",ORDER_TYPES_OTC:"OTC",ORDER_TYPES_MEDIAEXCHANGE:"Media Exchange",OTH_TYPE_COMPENSATION:"Compensation",OTH_TYPE_CONSERVATION:"Conservation",OTH_TYPE_ORGANIZATIONAL:"Staff",CreditSlip:"Credit Slip",GiftCardCreditSlip:"Gift Card Slip",TransactionType:"TRANSACTION TYPE",CardType:"Card Type",CardNumber:"CARD No.",CardHolder:"Card Holder",Date:"Date/Time",Merchant:"MERCHANT CODE",Sequence:"SEQUENCE No.",Response:"RESPONSE CODE",Approval:"APPROVAL No.",Entry:"ENTRY METHOD",Amount:"Amount",CheckTotal:"Check Total",Tip:"Tip",Total:"TOTAL",Signature:"Signature",PrintCopy:"Print Copy",Check:"Check",Server:"Server",Table:"Table",Purchase:"PURCHASE",CustomerCopy:"Customer Copy",BN_NUMBER:"B.N.",PHONE:"Phone",INVOICE:"Invoice",RECEIPT:"Receipt",FOR:"For",CHARGE_TRANSACTION:"Charge Transaction",ALL_ORDER_OTH:"Order OTH",ORDER_TYPE:"Order"},a(e,"ORDER_TYPES_SEATED","Seated"),a(e,"ORDER_TYPES_TA","TA"),a(e,"ORDER_TYPES_DELIVERY","Delivery"),a(e,"ORDER_TYPES_REFUND","Refund"),a(e,"ORDER_TYPES_OTC","OTC"),a(e,"ORDER_TYPES_MEDIAEXCHANGE","Media Exchange"),a(e,"CHECK","Check"),a(e,"ORDER","Order"),a(e,"title","Orders Viewer"),a(e,"printer","Printings"),a(e,"printerName","Printer"),a(e,"documentType","Document type"),a(e,"orderState","Order State"),a(e,"general","General"),a(e,"tip_behavior","Tip behavior"),a(e,"amount","Amount"),a(e,"tip","Tip"),a(e,"discount","Discount"),a(e,"optimization","Optimization"),a(e,"time_line","Timeline"),a(e,"action","Action"),a(e,"data","Data"),a(e,"at","At"),a(e,"by","By"),a(e,"orders","Items"),a(e,"item","Item"),a(e,"price","Price"),a(e,"no_orders","No items"),a(e,"cancelled_items","Returns & Voids"),a(e,"no_cancelled_items","No Returns / Voids"),a(e,"unassigned_items","Unassigned Items"),a(e,"no_unassigned_items","No Unassigned Items"),a(e,"payments","Payments"),a(e,"no_payments","No Payments"),a(e,"tender_type","Payment Type"),a(e,"last_4","Last 4 Digits"),a(e,"face_value","Face Value"),a(e,"change","Change"),a(e,"no_changes","No Change"),a(e,"discounts","Discounts"),a(e,"discount_type","Discount Type"),a(e,"reason","Reason"),a(e,"no_discounts","No Discounts"),a(e,"promotions","Promotions"),a(e,"promotion","Promotion"),a(e,"no_promotions","No Promotions"),a(e,"redeem_code","Code"),a(e,"return_type","Return Type"),a(e,"return","Return"),a(e,"comment","Comment"),a(e,"applied","Requested By"),a(e,"approved","Approved"),a(e,"oth","OTH"),a(e,"charge_account","Charge Account"),a(e,"cash","Cash"),a(e,"cheque","Cheque"),a(e,"credit","Credit"),a(e,"giftCard","Gift Card"),a(e,"giftCardLoad","Charge Gift Card"),a(e,"charge_account_refund","Charge Account Refund"),a(e,"cash_refund","Cash Refund"),a(e,"cheque_refund","Cheque Refund"),a(e,"credit_refund","Credit Refund"),a(e,"refund","Refund"),a(e,"TA","TA"),a(e,"delivery","Delivery"),a(e,"order","Order"),a(e,"delivery_note","Delivery Note"),a(e,"refund_note","Refund Note"),a(e,"invoice","Invoice"),a(e,"refund_invoice","Refund invoice"),a(e,"cancel","Cancel"),a(e,"return","Return"),a(e,"open","Open"),a(e,"close","Close"),a(e,"payment","Payment"),a(e,"cancel_item_applied","Cancel Item Requested"),a(e,"cancel_item_approved","Cancel Item Approved"),a(e,"return_item_applied","Return Item Requested"),a(e,"return_item_approved","Return Item Approved"),a(e,"oth_item_applied","Item OTH Requested"),a(e,"oth_item_approved","Item OTH Approved"),a(e,"oth_order_applied","Order OTH Requested"),a(e,"oth_order_approved","Order OTH Approved"),a(e,"percent_off_order","% Off Order"),a(e,"amount_off_order"," Off Order"),a(e,"percent_off_item","% Off Item"),a(e,"amount_off_item"," Off Item"),a(e,"delivery_note_number","Delivery Note "),a(e,"refund_note_number","Refund Note "),a(e,"invoice_number","Invoice "),a(e,"credit_invoice_number","Credit Invoice "),a(e,"forcedClosed","Forced Closed"),a(e,"clubMembers","Club Members"),a(e,"orderer_name","Name"),a(e,"orderer_phone","Phone"),a(e,"orderer_delivery_summary","Address"),a(e,"orderer_delivery_notes","Notes"),a(e,"orderer_courier","Delivery Person"),a(e,"orderer_floor","FL"),a(e,"orderer_apartment","A"),a(e,"total_inc_vat","Check Total"),a(e,"total_order","Subtotal"),a(e,"payments_print","Payments"),a(e,"paid","Paid"),a(e,"bn-number","BN"),a(e,"phone","Phone"),a(e,"print_date","Printed on"),a(e,"print_by_order","Order {{order_number}} on {{order_date}} {{order_time}}"),a(e,"copy","Copy"),a(e,"order_number","Order"),a(e,"table","Table"),a(e,"waiter_diners","Server {{waiter}} Diners {{diners}} Table {{table}}"),a(e,"oth_print","OTH"),a(e,"all_order_oth","Order OTH"),a(e,"order_discount","Order Discount"),a(e,"manual_item_discount","Manual Discount"),a(e,"print_date_document","{{document_type}} created on {{order_date}} time {{order_time}}"),a(e,"print_date_deliveryNote","Delivery note created on {{order_date}} time {{order_time}}"),a(e,"print_date_invoice","Invoice created on {{order_date}} time {{order_time}}"),a(e,"diner","Diner"),a(e,"paid_by","Paid using"),a(e,"refunded_by","Refund using"),a(e,"charge_account_name","Charge account name"),a(e,"company","Company"),a(e,"customer_id","Customer ID"),a(e,"customer_name","Name"),a(e,"card_number","Card Number"),a(e,"order_search_comment","Search is by order closing time"),a(e,"from","From"),a(e,"to","To"),a(e,"appliedSegmentation","Tag Applied"),a(e,"approvedSegmentation","Tag Approved"),a(e,"exclusive_tax","Exclusive Tax"),a(e,"inclusive_tax","Inclusive Tax"),a(e,"inclusive_taxes","Inclusive Taxes"),a(e,"exempted_tax","Tax Exempt"),a(e,"exempted_taxes","Exempted Taxes"),a(e,"total_sales_amount","Total Sales"),a(e,"included","Included"),a(e,"Owner","Owner"),a(e,"reversal","Reversal"),a(e,"kickout","Kickout"),a(e,"Kicked_out","Kicked out"),a(e,"service_charge","Service Charge"),a(e,"type","Type"),a(e,"waiter"," waiter"),a(e,"Diners","Guests"),a(e,"RETURN_TRANSACTION","Return Transaction"),a(e,"BUSINESS_MEAL","Business meal"),a(e,"BEFORE_VAT","before VAT"),a(e,"INCLUDE_VAT","include VAT"),a(e,"VAT","VAT"),a(e,"RETURND_IN_CHARCHACCOUNT_FROM","Returned in charge account from"),a(e,"RETURNED_IN_CREDIT_FROM","Returned in credit from"),a(e,"PAID_IN_CREDIT_FROM","Paid in credit from"),a(e,"TRANSACTION_TIME","Transaction Time"),a(e,"TRANSACTION_NO","Transaction no."),a(e,"APPROVAL_NO","Approval no."),a(e,"TOTAL_AMOUNT","Total amount"),a(e,"PAID_IN_CHARCHACCOUNT_FROM","Paid in charge account from"),a(e,"CHARGE_ACCOUNT_NAME","Charge account name"),a(e,"PAID_GIFTCARD","Paid by gift card"),a(e,"CARD_NO","Card number"),a(e,"PAID_CASH","Paid in cash"),a(e,"RETURNED_CASH","Returned in cash"),a(e,"TOTAL_CASHBACK","Change"),a(e,"PAID_CHEQUE","Paid by cheque"),a(e,"RETURNED_CHEQUE","Returned in cheque"),a(e,"chargeAccountRefundInvoice","Refund Invoice"),a(e,"transactTimeText","DATE/TIME"),e),"he-IL":(t={OTH:"על חשבון הבית",MANUAL_ITEM_DISCOUNT:"הנחה יזומה",TOTAL_ORDER:'סה"כ הזמנה',ORDER_DISCOUNT:"הנחת חשבון",ECVLUSIVE_TAX:"מס שנוסף להזמנה",SERVICE_CHARGE:"Service Charge",TIP:"תשר",TOTAL_INC_VAT:'סה"כ לתשלום',CHANGE:"עודף",INCLUSIVE_TAXES:"Inclusive Taxes",EXEMPTED_TAXES:"Exempted Taxes",EXEMPTED_TAX:"Tax Exempt",REVERSAL:"ביטול",RETURN:"החזרה",REFUND:"החזר",Server:"מלצר",PRINT_BY_ORDER:"לפי הזמנה מס' {{order_number}} בתאריך {{order_date}} בשעה {{order_time}}",WAITER_DINERS:"מלצר {{waiter}} סועדים {{diners}}",TABLE_NUM:"שולחן {{table}}",TA:"TA",DELIVERY:"משלוחים",INITIATED_DISCOUNT:"הנחה יזומה",CANCEL:"ביטול",CUSTOMER_NAME:"שם",LAST_4:"4 ספרות",AMOUNT:"סכום",CHARGE_ACCOUNT:"הקפה",CASH:"מזומן",GIFT_CARD:"כרטיס תשלום",GIFT_CARD_LOAD:"טעינת כרטיס תשלום",CHEQUE:"המחאה",CREDIT:"אשראי",CHARGE_ACCOUNT_REFUND:"החזר הקפה",CASH_REFUND:"החזר מזומן",CHEQUE_REFUND:"החזר המחאה",CREDIT_REFUND:"החזר אשראי",OPEN:"פתיחה",ORDER:"הזמנה",CLOSE:"סגירה",PAYMENT:"תשלום",OTH_ORDER_APPLIED:"בקשה ל-OTH חשבון",OTH_ORDER_APPROVED:"אישור OTH חשבון",OTH_ITEM_APPLIED:"בקשה ל-OTH פריט",OTH_ITEM_APPROVED:"אישור OTH פריט",CANCEL_ITEM_APPLIED:"בקשה לביטול פריט",CANCEL_ITEM_APPROVED:"אישור ביטול פריט",RETURN_ITEM_APPLIED:"בקשה להחזרת פריט",RETURN_ITEM_APPROVED:"אישור החזרת פריט",PERCENT_OFF_ORDER:"% הנחת הזמנה",AMOUNT_OFF_ORDER:" הנחת סכום הזמנה",PERCENT_OFF_ITEM:"% הנחת פריט",APPLIED_SEGMENTATION:"בקשה לתיוג",APPROVED_SEGMENTATION:"אישור תיוג",ORDER_TYPE:"הזמנת",ORDER_TYPES_SEATED:"ישיבה",ORDER_TYPES_TA:" TA",ORDER_TYPES_DELIVERY:"משלוח",ORDER_TYPES_REFUND:"החזר",ORDER_TYPES_OTC:"דלפק (OTC)",ORDER_TYPES_MEDIAEXCHANGE:"טעינת כרטיס",OTH_TYPE_COMPENSATION:"פיצוי לקוחות",OTH_TYPE_CONSERVATION:"שימור לקוחות",OTH_TYPE_ORGANIZATIONAL:"עובדים",BN_NUMBER:"ח.פ.",PHONE:"טל'",INVOICE:"חשבונית מס",RECEIPT:"קבלה",FOR:"עבור",BN_OR_SN:"ח.פ / ת.ז",ALL_ORDER_OTH:"הזמנה על חשבון הבית",CHARGE_TRANSACTION:"עסקת חיוב הקפה"},a(t,"ORDER_TYPES_SEATED","ישיבה"),a(t,"ORDER_TYPES_TA"," TA"),a(t,"ORDER_TYPES_DELIVERY","משלוח"),a(t,"ORDER_TYPES_REFUND","החזר"),a(t,"ORDER_TYPES_OTC","דלפק (OTC)"),a(t,"ORDER_TYPES_MEDIAEXCHANGE","טעינת כרטיס"),a(t,"CHECK","חשבון"),a(t,"title","איתור הזמנה"),a(t,"orderState","מצב הזמנה"),a(t,"general","כללי"),a(t,"tip_behavior","סוג טיפ"),a(t,"printerName","מדפסת"),a(t,"documentType","סוג הדפסה"),a(t,"printer","הדפסות"),a(t,"amount","סכום"),a(t,"tip","תשר"),a(t,"discount","הנחה"),a(t,"optimization","אופטימיזציה"),a(t,"time_line","ציר זמן"),a(t,"action","פעולה"),a(t,"data","מידע"),a(t,"at","זמן"),a(t,"by",'ע"י'),a(t,"orders","מנות"),a(t,"item","פריט"),a(t,"price","מחיר"),a(t,"no_orders","אין מנות"),a(t,"cancelled_items","ביטולים והחזרות"),a(t,"no_cancelled_items","אין ביטולים והחזרות"),a(t,"unassigned_items","פריטים לא משוייכים"),a(t,"no_unassigned_items","אין פריטים לא משוייכים"),a(t,"payments","תשלומים"),a(t,"no_payments","אין תשלומים"),a(t,"tender_type","סוג תשלום"),a(t,"last_4","4 ספרות"),a(t,"face_value","ערך נקוב"),a(t,"change","עודף"),a(t,"no_changes","אין תשלומים"),a(t,"discounts","הנחות"),a(t,"discount_type","סוג הנחה"),a(t,"reason","סיבה"),a(t,"no_discounts","אין הנחות"),a(t,"promotions","מבצעים"),a(t,"promotion","מבצע"),a(t,"no_promotions","אין מבצעים"),a(t,"redeem_code","קוד"),a(t,"return_type","סוג ביטול"),a(t,"return","ביטול"),a(t,"comment","הערה"),a(t,"applied",'בקשה ע"י'),a(t,"approved",'אישור ע"י'),a(t,"oth","OTH"),a(t,"charge_account","הקפה"),a(t,"cash","מזומן"),a(t,"cheque","המחאה"),a(t,"credit","אשראי"),a(t,"giftCard","כרטיס תשלום"),a(t,"giftCardLoad","טעינת כרטיס תשלום"),a(t,"charge_account_refund","החזר הקפה"),a(t,"cash_refund","החזר מזומן"),a(t,"cheque_refund","החזר המחאה"),a(t,"credit_refund","החזר אשראי"),a(t,"refund","החזר"),a(t,"TA","TA"),a(t,"delivery","משלוח"),a(t,"order","הזמנה"),a(t,"delivery_note","תעודת משלוח"),a(t,"refund_note","תעודת החזר"),a(t,"invoice","חשבונית"),a(t,"refund_invoice","חשבונית החזר"),a(t,"cancel","ביטול"),a(t,"return","החזרה"),a(t,"open","פתיחה"),a(t,"close","סגירה"),a(t,"payment","תשלום"),a(t,"cancel_item_applied","בקשה לביטול פריט"),a(t,"cancel_item_approved","אישור ביטול פריט"),a(t,"return_item_applied","בקשה להחזרת פריט"),a(t,"return_item_approved","אישור החזרת פריט"),a(t,"oth_item_applied","בקשה ל-OTH פריט"),a(t,"oth_item_approved","אישור OTH פריט"),a(t,"oth_order_applied","בקשה ל-OTH חשבון"),a(t,"oth_order_approved","אישור OTH חשבון"),a(t,"percent_off_order","% הנחת הזמנה"),a(t,"amount_off_order"," הנחת סכום הזמנה"),a(t,"percent_off_item","% הנחת פריט"),a(t,"amount_off_item"," הנחת סכום פריט"),a(t,"delivery_note_number","תעודת משלוח מס "),a(t,"refund_note_number","תעודת זיכוי מס "),a(t,"invoice_number","חשבונית מס קבלה מס "),a(t,"credit_invoice_number","חשבונית זיכוי מס "),a(t,"forcedClosed","Forced Closed"),a(t,"clubMembers","חברי מועדון"),a(t,"orderer_name","שם"),a(t,"orderer_phone","טלפון"),a(t,"orderer_delivery_summary","כתובת"),a(t,"orderer_delivery_notes","הערות כתובת"),a(t,"orderer_courier","שליח"),a(t,"orderer_floor","ק"),a(t,"orderer_apartment","ד"),a(t,"total_inc_vat",'סה"כ לתשלום'),a(t,"total_order",'סה"כ הזמנה'),a(t,"payments_print","התקבל"),a(t,"bn-number","ח.פ."),a(t,"phone","טל'"),a(t,"print_date","הודפס בתאריך"),a(t,"print_by_order","לפי הזמנה מס' {{order_number}} בתאריך {{order_date}} בשעה {{order_time}}"),a(t,"copy","העתק"),a(t,"order_number","הזמנה מס'"),a(t,"table","שולחן"),a(t,"waiter_diners","מלצר {{waiter}} סועדים {{diners}} שולחן {{table}}"),a(t,"oth_print","על חשבון הבית"),a(t,"all_order_oth","הזמנה על חשבון הבית"),a(t,"order_discount","הנחת חשבון"),a(t,"manual_item_discount","הנחה יזומה"),a(t,"print_date_document","{{document_type}} הופקה בתאריך {{order_date}} בשעה {{order_time}}"),a(t,"print_date_deliveryNote","תעודת משלוח הופקה בתאריך {{order_date}} בשעה {{order_time}}"),a(t,"print_date_invoice","חשבונית הופקה בתאריך {{order_date}} בשעה {{order_time}}"),a(t,"diner","אירוח"),a(t,"paid_by","התקבל ב"),a(t,"refunded_by","הוחזר ב"),a(t,"charge_account_name","חשבון הקפה"),a(t,"company","חברה"),a(t,"customer_id","ח.פ / ת.ז"),a(t,"customer_name","שם"),a(t,"card_number","מספר כרטיס"),a(t,"order_search_comment","חיפוש ההזמנה הינו לפי שעת סגירתה"),a(t,"from","מ-"),a(t,"to","עד"),a(t,"appliedSegmentation","בקשה לתיוג"),a(t,"approvedSegmentation","אישור תיוג"),a(t,"exclusive_tax","מס שנוסף להזמנה"),a(t,"inclusive_tax","מס כלול"),a(t,"inclusive_taxes","מסים כלולים"),a(t,"total_sales_amount",'סה"כ הזמנה'),a(t,"included","כלול"),a(t,"Owner","Owner"),a(t,"reversal","ביטול"),a(t,"kickout","Kickout"),a(t,"Kicked_out","Kicked out"),a(t,"service_charge","Service Charge"),a(t,"type","סוג"),a(t,"waiter"," מלצר/ית"),a(t,"Diners","סועדים"),a(t,"RETURN_TRANSACTION","החזרת עסקה"),a(t,"BUSINESS_MEAL","ארוחה עסקית"),a(t,"BEFORE_VAT",'חייב במע"מ'),a(t,"INCLUDE_VAT",'כולל מע"מ'),a(t,"VAT",'מע"מ'),a(t,"RETURND_IN_CHARCHACCOUNT_FROM","הוחזר בהקפה מ "),a(t,"RETURNED_IN_CREDIT_FROM","הוחזר באשראי מ"),a(t,"PAID_IN_CREDIT_FROM","שולם באשראי מ"),a(t,"TRANSACTION_TIME","זמן העיסקה"),a(t,"TRANSACTION_NO","מספר עסקה"),a(t,"APPROVAL_NO","Approval no."),a(t,"APPROVAL_NO","מספר אישור"),a(t,"TOTAL_AMOUNT",'סה"כ לתשלום'),a(t,"PAID_IN_CHARCHACCOUNT_FROM","התקבל בהקפה מ "),a(t,"CHARGE_ACCOUNT_NAME","חשבון הקפה"),a(t,"PAID_GIFTCARD","התקבל בכרטיס מתנה"),a(t,"CARD_NO","מספר כרטיס"),a(t,"PAID_CASH","התקבל במזומן"),a(t,"RETURNED_CASH","הוחזר במזומן"),a(t,"TOTAL_CASHBACK","עודף"),a(t,"PAID_CHEQUE","התקבל בהמחאה"),a(t,"RETURNED_CHEQUE","הוחזר בהמחאה"),a(t,"chargeAccountRefundInvoice","חשבונית זיכוי"),t)}}},{key:"configure",value:function(e){e.local&&(this._options.local=e.local)}},{key:"getText",value:function(e,t,n){if(void 0!==e){var r=this._translate()[this._options.local][e];return void 0!==r?(void 0!==t&&void 0!==n&&t.length>0&&n.length>0&&t.forEach(function(e,t){r=r.replace("{{"+e+"}}",n[t])}),r):"[".concat(e,"]")}return"Missing Key"}}])&&o(t.prototype,n),r&&o(t,r),e}();function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._isUS,this._configure(t),this.$utils=new i,this.$translate=new u({local:t.local})}var t,n,r;return t=e,(n=[{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS),e.moment?moment=e.moment:moment=window.moment}},{key:"Enums",value:function(){var e;return{PaymentTypes:(e={OTH:"OTH",CreditCardPayment:"CreditCardPayment",ChargeAccountPayment:"ChargeAccountPayment",CashPayment:"CashPayment",ChequePayment:"ChequePayment"},s(e,"CreditCardPayment","CreditCardPayment"),s(e,"ChargeAccountRefund","ChargeAccountRefund"),s(e,"CashRefund","CashRefund"),s(e,"ChequeRefund","ChequeRefund"),s(e,"CreditCardRefund","CreditCardRefund"),e),OrderTypes:{Refund:"Refund",TA:"TA",Delivery:"Delivery",Seated:"Seated",OTC:"OTC"},ReturnTypes:{Cancellation:"cancellation",TransactionBased:"TRANSACTION BASED"},DiscountTypes:{OTH:"OTH"},OfferTypes:{Simple:"Simple",Combo:"Combo",ComplexOne:"Complex-One"},TransTypes:{Reversal:"Reversal",Return:"Return"},Sources:{TabitPay:"tabitPay"}}}},{key:"resolveItems",value:function(e,t){var n=this,r=!1;e.RETURN_TYPE===this.Enums().ReturnTypes.TransactionBased&&(r=!0);var i=t.ORDERED_OFFERS_LIST;r&&(i=t.RETURNED_OFFERS_LIST);var a=!1;t.EXEMPTED_TAXES&&t.EXEMPTED_TAXES.length>0&&this._isUS&&(a=!0);var o=[],u=[];return i&&i.length>0&&i.forEach(function(e){var t=0;if(t=e.SPLIT_DENOMINATOR&&e.SPLIT_NUMERATOR&&100!==e.SPLIT_DENOMINATOR&&100!==e.SPLIT_NUMERATOR?"".concat(e.SPLIT_NUMERATOR,"/").concat(e.SPLIT_DENOMINATOR):e.OFFER_QTY,e.OFFER_TYPE==n.Enums().OfferTypes.Simple){var i={isOffer:!0,name:e.OFFER_NAME,qty:t};e.ON_THE_HOUSE?(i.amount=n.$translate.getText("OTH"),u.push(i)):(e.OFFER_PRICE&&1===e.OFFER_QTY&&(i.amount=n.$utils.toFixedSafe(e.OFFER_PRICE,2),o.push(i)),e.OPEN_PRICE&&(i.amount=n.$utils.toFixedSafe(e.OFFER_PRICE,2),o.push(i))),e.ORDERED_OFFER_DISCOUNTS&&e.ORDERED_OFFER_DISCOUNTS.length>0&&e.ORDERED_OFFER_DISCOUNTS.forEach(function(e){o.push({isOfferDiscount:!0,name:e.DISCOUNT_NAME?e.DISCOUNT_NAME:n.$translate.getText("MANUAL_ITEM_DISCOUNT"),qty:null,amount:n.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})}),e.EXTRA_CHARGE_LIST&&e.EXTRA_CHARGE_LIST.length>0&&e.EXTRA_CHARGE_LIST.forEach(function(e){e.EXTRA_CHARGE_MODIFIERS_LIST&&e.EXTRA_CHARGE_MODIFIERS_LIST.length>0&&e.EXTRA_CHARGE_MODIFIERS_LIST.forEach(function(e){o.push({isItem:!0,name:e.MODIFIER_NAME,qty:null,amount:i.ON_THE_HOUSE?n.$translate.getText("OTH"):n.$utils.toFixedSafe(e.MODIFIER_PRICE,2)}),e.MODIFIER_DISCOUNTS&&e.MODIFIER_DISCOUNTS.length>0&&e.MODIFIER_DISCOUNTS.forEach(function(e){o.push({isItem:!0,name:e.DISCOUNT_NAME,qty:null,amount:i.ON_THE_HOUSE?n.$translate.getText("OTH"):n.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})})}),e.ITEM_DISCOUNTS&&e.ITEM_DISCOUNTS.length>0&&e.ITEM_DISCOUNTS.forEach(function(e){o.push({isItem:!0,name:e.DISCOUNT_NAME,qty:null,amount:n.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})})})}[n.Enums().OfferTypes.ComplexOne,n.Enums().OfferTypes.Combo].indexOf(e.OFFER_TYPE)>-1&&(o.push({isOffer:!0,name:e.OFFER_NAME,qty:t,amount:e.ON_THE_HOUSE?n.$translate.getText("OTH"):n.$utils.toFixedSafe(r?e.OFFER_AMOUNT:e.OFFER_CALC_AMT,2)}),r||e.ORDERED_ITEMS_LIST&&e.ORDERED_ITEMS_LIST.length>0&&e.ORDERED_ITEMS_LIST.forEach(function(e){o.push({isItem:!0,name:e.ITEM_NAME,qty:null,amount:null})}),r||e.EXTRA_CHARGE_LIST&&e.EXTRA_CHARGE_LIST.length>0&&e.EXTRA_CHARGE_LIST.forEach(function(e){e.EXTRA_CHARGE_MODIFIERS_LIST&&e.EXTRA_CHARGE_MODIFIERS_LIST.length>0?e.EXTRA_CHARGE_MODIFIERS_LIST.forEach(function(t){o.push({isItem:!0,name:t.MODIFIER_NAME,qty:null,amount:e.ON_THE_HOUSE?n.$translate.getText("OTH"):n.$utils.toFixedSafe(e.ITEM_AMOUNT,2)})}):e.ITEM_DISCOUNTS&&e.ITEM_DISCOUNTS.length>0?(o.push({isItem:!0,name:e.ITEM_NAME,qty:null,amount:n.$utils.toFixedSafe(e.ITEM_AMOUNT,2)}),e.ITEM_DISCOUNTS&&e.ITEM_DISCOUNTS.length>0&&e.ITEM_DISCOUNTS.forEach(function(e){o.push({isItem:!0,name:e.DISCOUNT_NAME,qty:null,amount:n.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})})):o.push({isItem:!0,name:e.ITEM_NAME,qty:null,amount:e.ON_THE_HOUSE?n.$translate.getText("OTH"):n.$utils.toFixedSafe(e.ITEM_AMOUNT,2)})}),e.ORDERED_OFFER_DISCOUNTS&&e.ORDERED_OFFER_DISCOUNTS.length>0&&e.ORDERED_OFFER_DISCOUNTS.forEach(function(e){o.push({isOfferDiscount:!0,name:e.DISCOUNT_NAME?e.DISCOUNT_NAME:n.$translate.getText("MANUAL_ITEM_DISCOUNT"),qty:null,amount:n.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})}))}),{items:o,oth:u,isReturnOrder:r,isTaxExempt:a}}},{key:"resolveChecksData",value:function(e){var t=e.printData.collections,n=e.printData.variables;if(0!==t.PAYMENT_LIST.length){var r={},i=this.resolveItems(n,t);r.items=i.items,r.oth=i.oth,r.isReturnOrder=i.isReturnOrder,r.isTaxExempt=i.isTaxExempt;var a=this.resolveTotals(n,t,!0);r.totals=a;var o=this.resolvePayments(n,t,!0);r.payments=o;var u=this.resolveTaxes(n,t,!0);return r.taxes=u,new function(e,t,n,r,i){this.collections=e,this.variables=t,this.data=n,this.print_by_order=r,this.waiter_diners=i}(t,n,r,this.resolvePrintByOrder(n),this.resolveWaiterDiners(n))}}},{key:"resolveTotals",value:function(e,t){var n=this,r=[];if(void 0!==e.TOTAL_SALES_AMOUNT&&(t.ORDER_DISCOUNTS_LIST&&t.ORDER_DISCOUNTS_LIST.length>0||void 0!==e.TOTAL_TIPS||this._isUS&&t.EXCLUSIVE_TAXES&&t.EXCLUSIVE_TAXES.length>0)&&r.push({name:this.$translate.getText("TOTAL_ORDER"),amount:this.$utils.toFixedSafe(e.TOTAL_SALES_AMOUNT,2)}),t.ORDER_DISCOUNTS_LIST&&t.ORDER_DISCOUNTS_LIST.length>0&&t.ORDER_DISCOUNTS_LIST.forEach(function(e){r.push({name:e.DISCOUNT_NAME?e.DISCOUNT_NAME:n.$translate.getText("ORDER_DISCOUNT"),amount:n.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})}),t.EXCLUSIVE_TAXES&&t.EXCLUSIVE_TAXES.length>0&&this._isUS&&t.EXCLUSIVE_TAXES.forEach(function(e){r.push({type:"exclusive_tax",name:e.NAME?e.NAME:n.$translate.getText("ECVLUSIVE_TAX"),amount:n.$utils.toFixedSafe(e.AMOUNT,2),rate:e.RATE})}),t.TIPS){var i=t.TIPS.filter(function(e){return"order"===e.SCOPE});i&&i.length>0&&i&&i.length>0&&this._isUS&&i.forEach(function(e){var t=e.NAME?e.NAME:n.$translate.getText("SERVICE_CHARGE"),i=e.PERCENT;void 0!==i&&(t=e.NAME?"".concat(e.NAME," ").concat(i,"%"):"".concat(n.$translate.getText("SERVICE_CHARGE")," ").concat(i,"%")),0!==e.AMOUNT&&r.push({type:"service_charge",name:t,amount:n.$utils.toFixedSafe(e.AMOUNT,2)})})}if(void 0!==e.TOTAL_TIPS_ON_PAYMENTS||void 0!==e.TOTAL_TIPS){var a=0;void 0!==e.TOTAL_TIPS_ON_PAYMENTS&&0!==e.TOTAL_TIPS_ON_PAYMENTS?a=e.TOTAL_TIPS_ON_PAYMENTS:void 0!==e.TOTAL_TIPS&&0!==e.TOTAL_TIPS&&(a=e.TOTAL_TIPS),a>0&&r.push({type:"tips",name:this.$translate.getText("TIP"),amount:this.$utils.toFixedSafe(a,2)}),t.PAYMENT_LIST[0].TRANS_TYPE===this.Enums().TransTypes.Return&&0!==t.PAYMENT_LIST[0].TIP_AMOUNT&&r.push({type:"tips",name:this.$translate.getText("TIP"),amount:this.$utils.toFixedSafe(-1*t.PAYMENT_LIST[0].TIP_AMOUNT,2)})}return this._isUS||r.push({name:this.$translate.getText("TOTAL_INC_VAT"),amount:this.$utils.toFixedSafe(e.TOTAL_IN_VAT||0,2)}),this._isUS&&r.push({name:this.$translate.getText("TOTAL_INC_VAT"),amount:this.$utils.toFixedSafe(e.TOTAL_AMOUNT||0,2)}),r}},{key:"filterOmittedPayments",value:function(e){var t=[];e.forEach(function(n){if("omitted"===n.PROVIDER_TRANS_STATUS&&n.CANCELED){var r=e.find(function(e){return!e.CANCELED&&"REFUND"===e.PAYMENT_TYPE&&e.P_AMOUNT===n.P_AMOUNT&&"omitted"===e.PROVIDER_TRANS_STATUS});r&&(t.push(n),t.push(r))}});return t.length>0&&t.forEach(function(t){var n=e.findIndex(function(e){return e.P_ID===t.P_ID});-1!==n&&e.splice(n,1)}),e}},{key:"resolvePayments",value:function(e,t){var n=this,r=this.filterOmittedPayments(t.PAYMENT_LIST),i=[];return r.forEach(function(e){i.push({name:n.resolvePaymentName(e),amount:e.PAYMENT_TYPE?n.$utils.toFixedSafe(-1*e.P_AMOUNT,2):n.$utils.toFixedSafe(e.P_AMOUNT,2),holderName:void 0!==e.CUSTOMER_NAME?e.CUSTOMER_NAME:""})}),i.push({type:"change",name:this.$translate.getText("CHANGE"),amount:this.$utils.toFixedSafe(e.CHANGE,2)}),i}},{key:"resolveTaxes",value:function(e,t){var n=this,r={InclusiveTaxes:[],ExemptedTaxes:[],ExemptedTaxData:[]};return t.INCLUSIVE_TAXES&&t.INCLUSIVE_TAXES.length>0&&this._isUS&&(r.InclusiveTaxes.push({type:"title",name:"".concat(this.$translate.getText("INCLUSIVE_TAXES"),":"),amount:void 0}),t.INCLUSIVE_TAXES.forEach(function(e){r.InclusiveTaxes.push({type:"inclusive_tax",name:e.NAME?e.NAME:n.$translate.getText("INCLUSIVE_TAXES"),amount:n.$utils.toFixedSafe(e.AMOUNT,2)})})),t.EXEMPTED_TAXES&&t.EXEMPTED_TAXES.length>0&&this._isUS&&(r.ExemptedTaxes.push({type:"title",name:"".concat(this.$translate.getText("EXEMPTED_TAXES"),":"),amount:void 0}),t.EXEMPTED_TAXES.forEach(function(e){r.ExemptedTaxes.push({type:"exempted_tax",name:e.NAME?e.NAME:n.$translate.getText("EXEMPTED_TAX"),amount:n.$utils.toFixedSafe(e.AMOUNT,2)})})),r}},{key:"resolvePaymentName",value:function(e){var t="";return"REFUND"===e.PAYMENT_TYPE&&(t=e.TRANS_TYPE===this.Enums().TransTypes.Reversal?this.$translate.getText("REVERSAL"):e.TRANS_TYPE===this.Enums().TransTypes.Return?this.$translate.getText("RETURN"):this.$translate.getText("REFUND")),"creditCard"===e.P_TENDER_TYPE||"gidtCard"===e.P_TENDER_TYPE?""!==t?"".concat(t," (").concat(e.CARD_TYPE," ").concat(e.LAST_4,")"):"".concat(e.CARD_TYPE," ").concat(e.LAST_4):"".concat(t," ").concat(e.P_NAME)}},{key:"resolvePrintByOrder",value:function(e){return this.$translate.getText("PRINT_BY_ORDER",["order_number","order_date","order_time"],[e.ORDER_NO,moment(e.CREATED_AT).format("DD/MM/YYYY"),moment(e.CREATED_AT).format("HH:mm:ss")])}},{key:"resolveWaiterDiners",value:function(e){var t="";void 0!==e.F_NAME&&(t+=e.F_NAME),void 0!==e.L_NAME&&(t+=" ".concat(e.L_NAME[0]));void 0!==e.TABLE_NO&&e.TABLE_NO;var n="";return n+=this.$translate.getText("WAITER_DINERS",["waiter","diners"],["".concat(t),e.NUMBER_OF_GUESTS])}},{key:"resolvePrintData",value:function(e,t){var n=e.collections,r=e.variables,i={},a=this.resolveItems(r,n);i.items=a.items,i.oth=a.oth,i.isReturnOrder=a.isReturnOrder,i.isTaxExempt=a.isTaxExempt;var o=this.resolveTotals(r,n,!0);i.totals=o;var u=this.resolvePayments(r,n,!0);i.payments=u;var s=this.resolveTaxes(r,n,!0);return i.taxes=s,i.isUS=t,new function(e,t,n,r,i){this.collections=e,this.variables=t,this.data=n,this.print_by_order=r,this.waiter_diners=i}(n,r,i,this.resolvePrintByOrder(r),this.resolveWaiterDiners(r))}}])&&c(t.prototype,n),r&&c(t,r),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$utils=new i}var t,n,r;return t=e,(n=[{key:"isNegative",value:function(e){return this.$utils.isNegative(e)}},{key:"addTaxDataFunc",value:function(e){var t=this,n=null;return e.data.taxes.InclusiveTaxes.length>0||void 0!==e.data.taxes.InclusiveTaxes[0]||e.data.taxes.ExemptedTaxes.length>0||void 0!==e.data.taxes.ExemptedTaxes[0]?((n=_doc.createElement("div")).id="taxDataDiv",e.data.totals&&e.data.totals.length>0&&e.data.totals.forEach(function(e){var r=_doc.createElement("div");r.id="totalItemDiv",r.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.name?e.name:" ")+e.rate+"%</div> <div class='total-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div></div>",n.appendChild(r)}),e.data.payments&&e.data.payments.length>0&&e.data.payments.forEach(function(e){var r=_doc.createElement("div");r.id="paymentItemDiv",r.innerHTML="<div class='itemDiv'><div class='payment-name'>"+(e.name?e.name:" ")+"</div> <div class='payment-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div></div><div class='itemDiv'>"+e.holderName+"</div > ",n.appendChild(r)}),(e.data.taxes.InclusiveTaxes&&e.data.taxes.InclusiveTaxes.length>0||e.data.taxes.ExemptedTaxes&&e.data.taxes.ExemptedTaxes.length>0)&&(e.data.taxes.InclusiveTaxes.length>0&&e.data.taxes.InclusiveTaxes.forEach(function(e){var r=_doc.createElement("div");r.id="incTaxItemDiv",r.innerHTML="<div class='itemDiv'><div class='incTax-name'>"+(e.name?e.name:" ")+"</div> <div class='incTax-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div>"+n.appendChild(r)}),e.data.taxes.ExemptedTaxes.length>0&&e.data.taxes.ExemptedTaxes.forEach(function(e){var r=_doc.createElement("div");r.id="exmTaxItemDiv",r.innerHTML="<div class='itemDiv'><div class='incTax-name'>"+(e.name?e.name:" ")+"</div> <div class='incTax-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div>"+n.appendChild(r)})),n):null}}])&&d(t.prototype,n),r&&d(t,r),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._configure(t),this._local,this._isUS,this._doc,this.$translate=new u({local:t.local}),this.$utils=new i,t&&t.local?this._local=t.local:this._local="he-IL"}var t,n,r;return t=e,(n=[{key:"isNegative",value:function(e){return this.$utils.isNegative(e)}},{key:"formatDateIL",value:function(e){return this.$utils.formatDateIL(e)}},{key:"formatDateUS",value:function(e){return this.$utils.formatDateUS(e)}},{key:"twoDecimals",value:function(e){return this.$utils.twoDecimals(e)}},{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS,"en-US"===e.local&&(this._options.isUS=!0)),e.moment?moment=e.moment:moment=window.moment}},{key:"createVatTemplate",value:function(e,t){var n=this;this._doc=t;var r=this._doc.createElement("div");r.id="vatTemplate";var i=this._doc.createElement("div");i.id="vatHeaderDiv";var a={};if(e.collections.DOCUMENT_ITEMS&&e.collections.DOCUMENT_ITEMS.length>0){(a=e.collections.DOCUMENT_ITEMS).forEach(function(t){var a=null,o=null,u=null;if(e.isRefund){var s=n.$translate.getText("refund");i.classList.add("bold"),a=s}else if(e.isRefund||"MULTI_DOC"!==e.variables.ORDER_DOCUMENT_PRINT){if(!e.isRefund&&"SINGLE_DOC"===e.variables.ORDER_DOCUMENT_PRINT){var c=n.$translate.getText("TOTAL_AMOUNT");i.classList.add("bold"),u=c}}else{var l=n.$translate.getText("BUSINESS_MEAL");i.classList.add("bold"),o=l}i.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==a?a:"")+(o||"")+(u||"")+"</div> <div class='total-amount "+n.isNegative(t.ITEM_AMOUNT)+"'>"+(t.ITEM_AMOUNT?Number(t.ITEM_AMOUNT).toFixed(2):"")+"</div></div>",r.appendChild(i)});var o=this.createVatDataTemplate(a,!0);r.appendChild(o)}else{var u=null,s=null,c=null;if(e.isRefund){var l=this.$translate.getText("refund");i.classList.add("bold"),u=l}else if(e.isRefund||"MULTI_DOC"!==e.variables.ORDER_DOCUMENT_PRINT){if(!e.isRefund&&"SINGLE_DOC"===e.variables.ORDER_DOCUMENT_PRINT){var d=this.$translate.getText("TOTAL_AMOUNT");i.classList.add("bold"),c=d}}else{var f=this.$translate.getText("BUSINESS_MEAL");i.classList.add("bold"),s=f}a.TOTAL_EX_VAT=e.variables.TOTAL_EX_VAT,a.TOTAL_INCLUDED_TAX=e.variables.TOTAL_INCLUDED_TAX,a.VAT_PERCENT=e.variables.VAT_PERCENT,a.TOTAL_IN_VAT=e.variables.TOTAL_IN_VAT,a.ITEM_AMOUNT=e.variables.TOTAL_AMOUNT,i.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==u?u:"")+(s||"")+(c||"")+"</div> <div class='total-amount "+this.isNegative(a.ITEM_AMOUNT)+"'>"+(a.ITEM_AMOUNT?Number(a.ITEM_AMOUNT).toFixed(2):"")+"</div></div>",r.appendChild(i);o=this.createVatDataTemplate(a,!1);r.appendChild(o)}return r}},{key:"createVatDataTemplate",value:function(e,t){var n=this._doc.createElement("div");n.id="VatDataTemplate";var r=this._doc.createElement("div");r.id="vatDataDiv",r.classList+=" padding-bottom",r.classList+=" padding-top",r.classList+=" tpl-body-div";var i=this.$translate.getText("BEFORE_VAT"),a=this.$translate.getText("VAT"),o=this.$translate.getText("INCLUDE_VAT"),u=this._doc.createElement("div"),s=this._doc.createElement("div"),c=this._doc.createElement("div");return t?(u.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e[0].ITEM_AMOUNT_EX_VAT?i:"")+"</div> <div class='total-amount "+this.isNegative(e[0].ITEM_AMOUNT_EX_VAT)+"'>"+(e[0].ITEM_AMOUNT_EX_VAT?Number(e[0].ITEM_AMOUNT_EX_VAT).toFixed(2):"")+"</div></div>",s.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e[0].ITEM_VAT_PERCENT?a:"")+" "+e[0].ITEM_VAT_PERCENT+"%</div> <div class='total-amount "+this.isNegative(e[0].ITEM_VAT_AMOUNT)+"'>"+(e[0].ITEM_VAT_AMOUNT?Number(e[0].ITEM_VAT_AMOUNT).toFixed(2):"")+"</div></div>",c.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e[0].ITEM_AMOUNT?o:"")+"</div> <div class='total-amount "+this.isNegative(e[0].ITEM_AMOUNT)+"'>"+(e[0].ITEM_AMOUNT?Number(e[0].ITEM_AMOUNT).toFixed(2):"")+"</div></div>"):(u.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.TOTAL_EX_VAT?i:"")+"</div> <div class='total-amount "+this.isNegative(e.TOTAL_EX_VAT)+"'>"+(e.TOTAL_EX_VAT?Number(e.TOTAL_EX_VAT).toFixed(2):"")+"</div></div>",s.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.TOTAL_INCLUDED_TAX?a:"")+" "+e.VAT_PERCENT+"%</div> <div class='total-amount "+this.isNegative(e.TOTAL_INCLUDED_TAX)+"'>"+(e.TOTAL_INCLUDED_TAX?this.twoDecimals(e.TOTAL_INCLUDED_TAX):"")+"</div></div>",c.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.TOTAL_IN_VAT?o:"")+"</div> <div class='total-amount "+this.isNegative(e.TOTAL_IN_VAT)+"'>"+(e.TOTAL_IN_VAT?this.twoDecimals(e.TOTAL_IN_VAT):"")+"</div></div>"),r.appendChild(u),r.appendChild(s),r.appendChild(c),n.appendChild(r),n}}])&&_(t.prototype,n),r&&_(t,r),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._local,this._isUS,this._doc,this._configure(t),this.$translate=new u({local:t.local}),this.$createVatTemplateService=new v(t),this.$utils=new i,t&&t.local?this._local=t.local:this._local="he-IL"}var t,n,r;return t=e,(n=[{key:"isNegative",value:function(e){return this.$utils.isNegative(e)}},{key:"formatDateIL",value:function(e){return this.$utils.formatDateIL(e)}},{key:"formatDateUS",value:function(e){return this.$utils.formatDateUS(e)}},{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS,"en-US"===e.local&&(this._options.isUS=!0)),e.moment?moment=e.moment:moment=window.moment}},{key:"createDeliveryNoteTransactionData",value:function(e,t){this._doc=t;var n=this._doc.createElement("div");n.id="deliveryNoteTransactionDiv";var r,i=this.$createVatTemplateService.createVatTemplate(e,this._doc);i.id="deliveryVat",i.classList+=" padding-bottom",i.classList+=" padding-top",i.classList+=" tpl-body-div",n.appendChild(i),e.collections.HOUSE_ACCOUNT_PAYMENTS[0]&&(r=e.collections.HOUSE_ACCOUNT_PAYMENTS[0]);var a=this._doc.createElement("div");if(a.id="dNoteChargeAccntDiv",!0===e.isRefund){var o=this.$translate.getText("RETURND_IN_CHARCHACCOUNT_FROM");(u=this._doc.createElement("div")).id="refundTextDiv",u.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r?o+" "+r.CHARGE_ACCOUNT_NAME:"")+"</div><div class='total-amount "+this.isNegative(r.P_AMOUNT)+"'>"+(r.P_AMOUNT?r.P_AMOUNT:"")+"</div></div>",u.classList+=" padding-bottom",u.classList+=" padding-top",u.classList+=" tpl-body-div",a.appendChild(u)}else if(!e.isRefund&&r&&r.P_AMOUNT){var u;o=this.$translate.getText("PAID_IN_CHARCHACCOUNT_FROM");(u=this._doc.createElement("div")).id="refundTextDiv",u.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r?o+" "+r.CHARGE_ACCOUNT_NAME:"")+"</div><div class='total-amount "+this.isNegative(r.P_AMOUNT)+"'>"+(r.P_AMOUNT?Number(r.P_AMOUNT).toFixed(2):"")+"</div > </div>",u.classList+=" padding-bottom",u.classList+=" padding-top",u.classList+=" tpl-body-div",a.appendChild(u)}if(r){if(r.P_CHANGE>0){var s=this.$translate.getText("TOTAL_CASHBACK"),c=this._doc.createElement("div");c.id="cashBackDiv",cashbackDiv.innerHTML="<div class='changeDiv'><div class='total-name'>"+(r?s:"")+"</div><div class='total-amount "+this.isNegative(r.P_CHANGE)+"'>"+(r.P_CHANGE?Number(r.P_CHANGE).toFixed(2):"")+"</div></div>",a.appendChild(c)}if(r.PROVIDER_TRANS_ID){var l=this.$translate.getText("CHARGE_TRANSACTION"),d=this._doc.createElement("div");d.id="providerTransDiv",d.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r?l:"")+"</div><div class='total-amount'>"+(r.PROVIDER_TRANS_ID?r.PROVIDER_TRANS_ID:"")+"</div></div>",a.appendChild(d)}if(r.CHARGE_ACCOUNT_NAME){var f=this.$translate.getText("CHARGE_ACCOUNT_NAME"),_=this._doc.createElement("div");_.id="cAccountNameDiv",_.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r?f:"")+" "+(r.CHARGE_ACCOUNT_NAME?r.CHARGE_ACCOUNT_NAME:"")+"</div></div>",a.appendChild(_)}if(r.COMPANY_NAME){var v=this.$translate.getText("company"),h=this._doc.createElement("div");h.id="companyNameDiv",h.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r?v:"")+": "+(r.COMPANY_NAME?r.COMPANY_NAME:"")+"</div></div>",a.appendChild(h)}if(r.LAST_4){var p=this.$translate.getText("LAST_4"),T=this._doc.createElement("div");T.id="lastFourDiv",T.innerHTML="<div class='itemDiv'><div class='item-name'>"+(r?p:" ")+"  "+(r.LAST_4?r.LAST_4:" ")+"</div>",a.appendChild(T)}if(r.PROVIDER_PAYMENT_DATE){e.collections.HOUSE_ACCOUNT_PAYMENTS[0];var E,m=r.PROVIDER_PAYMENT_DATE,A=this.$translate.getText("TRANSACTION_TIME"),g=this._doc.createElement("div");this._isUS?E=this.formatDateUS(m):this._isUS||(E=this.formatDateIL(m)),g.innerHTML="<div class='itemDiv'><div class='item-name'>"+(r?A:"")+" "+(r.PROVIDER_PAYMENT_DATE?E:"")+"</div>",a.appendChild(g)}}return a.classList+=" tpl-body-div",n.appendChild(a),n}}])&&h(t.prototype,n),r&&h(t,r),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._local,this._isUS,this._doc}var t,n,r;return t=e,(n=[{key:"createCreditSlip",value:function(e,t,n){this._doc=n;var r=this._doc.createElement("div");r.id="creditSlipDiv";var i=e.collections.PAYMENT_LIST&&e.collections.PAYMENT_LIST[0]?e.collections.PAYMENT_LIST[0]:null;if(i){var a=this._doc.createElement("div");a.id="transactionTypeDiv";var o=$translate.getText("TransactionType");a.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==o?o:"")+": "+(i.TRANS_TYPE?i.TRANS_TYPE:"")+"</div></div>",a.classList+=" padding-top",r.appendChild(a);var u=this._doc.createElement("div");u.id="cardTypeDiv";var s=$translate.getText("CardType");u.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==s?s:"")+": "+(i.CARD_TYPE?i.CARD_TYPE:"")+"</div></div>",r.appendChild(u);var c=this._doc.createElement("div");c.id="cardNumDiv";var l=$translate.getText("CardNumber");if(c.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==l?l:"")+": "+(i.CARD_NUMBER_MASKED?i.CARD_NUMBER_MASKED:"XXXX-"+i.LAST_4)+"</div></div>",r.appendChild(c),"creditCard"===i.P_TENDER_TYPE){var d=this._doc.createElement("div");d.id="pTenderTypeDiv";var f=$translate.getText("CardHolder");d.innerHTML="<div class='itemDiv'>"+(null!==f?f:"")+": "+(i.CUSTOMER_NAME?i.CUSTOMER_NAME:"")+"</div></div>",r.appendChild(d)}var _,v=i.PROVIDER_PAYMENT_DATE,h=$translate.getText("transactTimeText"),p=this._doc.createElement("div");this._isUS?_=formatDateUS(v):this._isUS||(_=formatDateIL(v)),p.innerHTML="<div class='itemDiv'><div class='total-name'>"+(h||"")+": "+(h?_:"")+"</div></div>",p.classList+=" padding-bottom",p.classList+=" tpl-body-div",r.appendChild(p);var T=this._doc.createElement("div");T.id="merchantDiv";var E=$translate.getText("Merchant");T.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==E?E:"")+": "+(i.MERCHANT_NUMBER?i.MERCHANT_NUMBER:"")+"</div></div>",T.classList+=" padding-top",r.appendChild(T);var m=this._doc.createElement("div");m.id="sequenceDiv";var A=$translate.getText("Sequence");m.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==A?A:"")+": "+ +(i.PROVIDER_TRANS_ID?i.PROVIDER_TRANS_ID:"")+"</div></div>",r.appendChild(m);var g=this._doc.createElement("div");g.id="responseDiv";var O=$translate.getText("Response"),y=i.PROVIDER_RESPONSE_MESSAGE?i.PROVIDER_RESPONSE_MESSAGE:"";g.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!=O?O:"")+": "+(i.PROVIDER_RESPONSE_CODE?i.PROVIDER_RESPONSE_CODE+"/"+y:"")+"</div></div>",r.appendChild(g);var N=this._doc.createElement("div");N.id="approvalDiv";var R=$translate.getText("Approval");N.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==R?R:"")+": "+(i.CONFIRMATION_NUMBER?i.CONFIRMATION_NUMBER:"")+"</div></div>",r.appendChild(N);var C=this._doc.createElement("div");C.classList+=" tpl-body-div",C.id="entryDiv";var D=$translate.getText("Entry");C.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==D?D:"")+": "+(i.ENTRY_METHOD?i.ENTRY_METHOD:"")+"</div></div>",C.classList+=" padding-bottom",C.classList+=" tpl-body-div",r.appendChild(C);var I=this._doc.createElement("div");I.id="checkTotalDiv";var S=$translate.getText("CheckTotal");I.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==S?S:"")+": </div ><div class='total-amount'>"+(i.P_AMOUNT_WO_TIP?Number(i.P_AMOUNT_WO_TIP).toFixed(2):"")+"</div></div>",I.classList+=" padding-top",r.appendChild(I);var M=this._doc.createElement("div");M.id="tipDiv";var b,P=$translate.getText("Tip");b=void 0!==i.TIP_AMOUNT&&null!==i.TIP_AMOUNT?i.TIP_AMOUNT:0,M.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==P?P:"")+": </div ><div class='total-amount'>"+(b?Number(b).toFixed(2):0)+"</div></div>",r.appendChild(M);var L=this._doc.createElement("div");L.id="totalDiv";var x=$translate.getText("Total");if(L.innerHTML="<div class='itemDiv'><div class='total-name'>"+(x||"")+": </div ><div class='total-amount'>"+(i.P_AMOUNT?Number(i.P_AMOUNT).toFixed(2):"")+"</div></div>",r.appendChild(L),t.md.signature){var U=t.md.signature,w=this._doc.createElement("div");w.id="signatureDiv",w.classList+=" signature-container";var H=this._doc.createElement("div");H.id="elementSVGDiv",H.classList+=" signature-container";var F=this._doc.createElement("div");F.id="newSVG",H.appendChild(F),F.outerHTML+="<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" id='svg' width='100%' height='100' transform='translate(0, 0)'  viewBox=\"0 0 500 150\" ></svg>";var k=H.getElementsByTagName("svg")[0];k.classList+=" signature-container",H.appendChild(k),w.appendChild(H);var $=w.getElementsByTagName("svg")[0];$.id="elementSVG";var V=makeSVG("path",{d:U,version:"1.1",xmlns:"http://www.w3.org/2000/svg",stroke:"#06067f","stroke-width":"2",height:"auto",transform:"translate(50,-80) scale(0.5,0.5)","stroke-linecap":"butt",fill:"none","stroke-linejoin":"miter"});V.setAttribute("width","50%"),V.setAttribute("height","auto"),$.setAttribute("width","100"),$.setAttribute("height","auto"),$.innerHTML="",$.appendChild(V),$.setAttribute("width","100%"),$.setAttribute("height","auto"),H.appendChild($),r.appendChild(w)}}return r}}])&&T(t.prototype,n),r&&T(t,r),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this._docData,this._docObj,this._printData,this._isUS,this._doc,this._local,this._configure(t),this.$translate=new u({local:t.local}),t&&t.local?this._local=t.local:this._local="he-IL",this.$billService=new l(this._options),this.$createVatTemplateService=new v(this._options),this.$createCreditSlipService=new E,this.$deliveryNoteTransactionService=new p(this._options),this.$addTaxData=new f;var n=document.implementation.createHTMLDocument("BillTemplate");this._doc=n;var r=this._doc.createElement("style");r.id="styleTag",this._doc.head.appendChild(r);var i=this._doc.createTextNode("\n        .templateDiv{\n            background-color:white;\n        }\n        ");r.appendChild(i)}var t,n,r;return t=e,(n=[{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS,"en-US"===e.local&&(this._options.isUS=!0)),e.moment?moment=e.moment:moment=window.moment}},{key:"createHTMLFromPrintDATA",value:function(e,t){var n=e.isRefund;this._docObj=e,this._dicData=t,this._printData=this.$billService.resolvePrintData(t.printData,this._isUS),this._printData.isRefund=n;var r=this.createDocTemplate(e);this._doc.body.appendChild(r);var i=this._doc;return(new XMLSerializer).serializeToString(i)}},{key:"createDocTemplate",value:function(e){var t=this._doc.createElement("div");t.id="docTemplate",t.classList.add("basicTemplate"),"he-IL"==this._local?(t.classList+=" rtl",t.classList.remove("ltr")):(t.classList+=" ltr",t.classList.remove("rtl"));var n,r=this.createHeader(this._printData);t.appendChild(r),"he-IL"==this._local&&"check"===e.documentType&&(n=!0);var i=e.md&&"creditCard"===e.type&&!e.isFullOrderBill&&!e.md.checkNumber&&!n;if(null!==i&&i){var a=this.$createCreditSlipService.createCreditSlip(this._printData,e,this._doc);t.appendChild(a)}else{if("REFUND"!==this._printData.variables.ORDER_TYPE.toUpperCase()){var o=this.createOrderPaymentData(this._printData);o.id="tplOrderPaymentData",o.hasChildNodes()&&(o.classList+=" body-div")}var u=this.createTotalsData(this._printData),s=this.createPaymentsData(this._printData);u.id="tplOrderTotals",s.id="tplOrderPayments",u.hasChildNodes()&&(u.classList+=" body-div tpl-body-div"),s.hasChildNodes()&&(s.classList+=" body-div tpl-body-div"),"REFUND"!==this._printData.variables.ORDER_TYPE.toUpperCase()&&t.appendChild(o),u.hasChildNodes()&&t.appendChild(u),s.hasChildNodes()&&t.appendChild(s)}return t}},{key:"createHeader",value:function(e){var t=this,n=this._doc.createElement("div");n.id="headerDiv";var r=this._doc.createElement("div");r.id="tplHeaderConstants",r.classList+=" rowPadding";["ORGANIZATION_NAME","ORGANIZATION_LEGAL_NAME","ORGANIZATION_ADDR_STREET","ORGANIZATION_ADDR_CITY","ORGANIZATION_TEL"].forEach(function(n){var i=t.placeHeaderData(e,n);r.appendChild(i)});var i=this._doc.createElement("div");i.id="tplHeader",i.setAttribute("style","text-align:center;"),i.classList+=" rowPadding";var a=this.createOrderHeader(e);a.id="orderHeader",a.classList+=" rowPadding";var o=this.createOrderInfoText(e);return o.id="tplOrderInfoText",i.appendChild(r),i.appendChild(a),i.appendChild(o),n.appendChild(i),n.classList.add("header-div"),n.classList.add("header-border"),n}},{key:"placeHeaderData",value:function(e,t){var n=this._doc.createElement("div");if(n.id="tplHeaderLine",e.variables.hasOwnProperty(t))switch(t){case"ORGANIZATION_NAME":n.innerHTML=e.variables.ORGANIZATION_NAME,n.classList+=" big-chars";break;case"ORGANIZATION_LEGAL_NAME":if(this._isUS)n.innerHTML=e.variables.ORGANIZATION_LEGAL_NAME;else{var r=this.$translate.getText("BN_NUMBER"),i=e.variables.ORGANIZATION_LEGAL_NAME+"-"+r+" "+e.variables.ORGANIZATION_BN_NUMBER;n.innerHTML=i}break;case"ORGANIZATION_ADDR_STREET":n.innerHTML=e.variables.ORGANIZATION_ADDR_STREET;break;case"ORGANIZATION_ADDR_CITY":n.innerHTML=e.variables.ORGANIZATION_ADDR_CITY;break;case"ORGANIZATION_TEL":var a=this.$translate.getText("PHONE")+" "+e.variables.ORGANIZATION_TEL;n.innerHTML=a}return n}},{key:"createOrderHeader",value:function(e){var t=this._doc.createElement("div");t.id="tplOrderHeader";var n=this._doc.createElement("div");n.id="tplOrderCustomer";var r=this._doc.createElement("div");r.id="tplOrderDateTime",r.classList.add("mystyle");var i=this._doc.createElement("div");i.id="tplOrderType",i.setAttribute("style","text-align:center;");var a=this._doc.createElement("div");a.id="tplOrderTable";var o=this._doc.createElement("div");o.id="tplOrderServerClients";var u=[n,r,i,a,o],s=[];return this.placeOrderHeaderData(e,u,s),this.appendChildren(t,s)}},{key:"placeOrderHeaderData",value:function(e,t,n){var r=this;t.forEach(function(t){var i=r.fillOrderHeaderData(e,t);n.push(i)})}},{key:"fillOrderHeaderData",value:function(e,t){switch(t.id){case"tplOrderCustomer":if(e.variables.CUSTOMER_ID){var n=this.$translate.getText("FOR"),r=this.$translate.getText("BN_OR_SN"),i=e.collections.PAYMENT_LIST[0].CUSTOMER_NAME,a=e.collections.PAYMENT_LIST[0].CUSTOMER_ID;t.innerText=n+": "+i+" "+r+": "+a}break;case"tplOrderDateTime":if(e.variables.CREATED_AT){var o=e.variables.CREATED_AT;this._isUS?t.innerHTML=this.formatDateUS(o):this._isUS||(t.innerHTML=this.formatDateIL(o)),t.setAttribute("class","med-chars")}break;case"tplOrderType":if(e.variables.ORDER_TYPE&&"REFUND"!==e.variables.ORDER_TYPE.toUpperCase()){var u=this.$translate.getText("ORDER_TYPE"),s="ORDER_TYPES_"+e.variables.ORDER_TYPE,c=this.$translate.getText(s);t.innerHTML="<div class='centralize' style='justify-content:center;'><span>"+u+"</span>&nbsp;<span>"+c+"</span > &nbsp; <span> #"+e.variables.ORDER_NO+"</span ></div > ",t.setAttribute("class","med-chars")}break;case"tplOrderTable":if("SEATED"===e.variables.ORDER_TYPE&&e.variables.TABLE_NO){var l=this.$translate.getText("table");t.innerHTML=l+" "+e.variables.TABLE_NO,t.setAttribute("class","med-chars")}break;case"tplOrderServerClients":if("invoice"!==this._dicData.documentType&&"deliveryNote"!==this._dicData.documentType){var d=this.$translate.getText("Server"),f=this.$translate.getText("Diners"),_=e.variables.F_NAME&&null!==e.variables.F_NAME?e.variables.F_NAME:"",v=e.variables.L_NAME&&null!==e.variables.L_NAME?e.variables.L_NAME:"";t.innerHTML="<span> "+d+": "+_+" "+v.substring(0,1)+" - "+f+": "+e.variables.NUMBER_OF_GUESTS+"</span>"}}return t}},{key:"createOrderInfoText",value:function(e){var t=this._doc.createElement("div");if(t.id="tplOrderInfoText","1"===e.variables.ORDER_ON_THE_HOUSE){var n=this._doc.createElement("div");n.id="allOrderOthTextDiv",n.innerHTML=this.$translate.getText("ALL_ORDER_OTH"),n.classList+=" othDiv",t.appendChild(n)}if(e.data.isReturnOrder){var r=this._doc.createElement("div");if(r.id="isReturnOrderTextDiv",r.innerHTML=this.$translate.getText("RETURN_TRANSACTION"),t.appendChild(r),e.variables.RETURN_COMMENT){var i=this._doc.createElement("div");i.id="returnOrderCommentDiv",i.innerHTML=e.variables.RETURN_COMMENT,t.appendChild(i)}}if(e.data.isTaxExempt){var a;if(e.variables.TAX_EXEMPTION_CODE)(a=this._doc.createElement("div")).id="isTaxExemptCodeDiv",a.innerHTML=e.variables.TAX_EXEMPTION_CODE,t.appendChild(a);if(e.variables.TAX_EXEMPTION_COMMENT)(a=this._doc.createElement("div")).id="isTaxExemptCodeDiv",a.innerHTML=e.variables.TAX_EXEMPTION_COMMENT,t.appendChild(a)}return t}},{key:"createOrderPaymentData",value:function(e){var t=this._doc.createElement("div"),n=this.$billService.resolveItems(e.variables,e.collections);t.classList+=" tpl-body-div";var r=this._doc.createElement("div");if(r.id="paymentDataDiv",r.classList+=" padding-top",r.classList+=" padding-bottom",t.appendChild(r),this._docObj&&"deliveryNote"!==this._dicData.documentType)this.fillItemsData(r,n,e),this.fillOthData(r,n);else if(this._docObj&&"deliveryNote"===this._dicData.documentType){this.fillItemsData(r,n,e),this.fillOthData(r,n);var i=this.$deliveryNoteTransactionService.createDeliveryNoteTransactionData(e,this._doc);t.appendChild(i)}return t}},{key:"fillItemsData",value:function(e,t,n){var r=this;n.isRefund||t.items.forEach(function(t){var n=r._doc.createElement("div");t.isOffer?(n.classList.add("bold"),t.space=""):t.isOffer||(n.classList.add("itemDiv"),t.qty="&nbsp;&nbsp;",t.space="&emsp;"),n.innerHTML="<div class='itemDiv'><div class='item-qty'>"+(t.qty?t.qty:" ")+"</div> <div class='item-name'>"+t.space+(t.name?t.name:"")+"</div> <div class='total-amount "+r.isNegative(t.amount)+"'>"+(t.amount?t.amount:"")+"</div></div>",e.appendChild(n)})}},{key:"fillOthData",value:function(e,t){var n=this;t.oth.forEach(function(t){var r=n._doc.createElement("div");t.isOffer?(r.classList.add("bold"),t.space=""):t.isOffer||(t.id="singleOthDiv",t.qty="&nbsp;&nbsp;",t.space="&emsp;"),r.innerHTML="<div class='itemDiv'><div class='item-qty'>"+(t.qty?t.qty:" ")+"</div> <div class='item-name'>"+t.space+(t.name?t.name:"")+"</div> <div class='total-amount "+n.isNegative(t.amount)+"'>"+(t.amount?t.amount:"")+"</div></div>",e.appendChild(r)})}},{key:"createCreditTemplate",value:function(e){var t=this._doc.createElement("div");t.id="CreditTemplate";var n=this._doc.createElement("div");n.id="CreditHeaderDiv";var r={};if(e.collections.CREDIT_PAYMENTS&&e.collections.CREDIT_PAYMENTS.length>0){var i=null,a=null,o=(r=e.collections.CREDIT_PAYMENTS[0]).ISSUER,u=r.P_AMOUNT;if(e.isRefund){var s=this.$translate.getText("RETURNED_IN_CREDIT_FROM");n.classList.add("bold"),i=s,n.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==i?i:"")+" "+(o||"")+"</div> <div class='total-amount "+this.isNegative(u)+"'>"+(u?Number(u).toFixed(2):"")+"</div></div>",t.appendChild(n)}else{var c=this.$translate.getText("PAID_IN_CREDIT_FROM");n.classList.add("bold"),a=c,n.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==a?a:"")+" "+(o||"")+"</div> <div class='total-amount "+this.isNegative(u)+"'>"+(u?Number(u).toFixed(2):"")+"</div></div>",t.appendChild(n)}var l=this.createCreditDataTemplate(r,e);t.appendChild(l)}return t}},{key:"createCreditDataTemplate",value:function(e,t){var n=this._doc.createElement("div");if(n.id="creditDataDiv",e){var r=this.$translate.getText(e.LAST_4?"LAST_4":""),i=this.$translate.getText(e.PROVIDER_PAYMENT_DATE?"TRANSACTION_TIME":""),a=this.$translate.getText(e.PROVIDER_TRANS_ID?"TRANSACTION_NO":""),o=this.$translate.getText(e.CONFIRMATION_NUMBER?"APPROVAL_NO":""),u=this.$translate.getText(t.variables.CHANGE?"TOTAL_CASHBACK":""),s=this._doc.createElement("div");r&&(s.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r||" ")+" "+(e.LAST_4?e.LAST_4:" ")+"</div>"),n.appendChild(s);var c,l=e.PROVIDER_PAYMENT_DATE,d=this._doc.createElement("div");this._isUS?c=this.formatDateUS(l):this._isUS||(c=this.formatDateIL(l)),d.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i||"")+" "+(i?c:"")+"</div></div>",n.appendChild(d);var f=this._doc.createElement("div");e.PROVIDER_TRANS_ID&&(f.innerHTML="<div class='itemDiv'><div class='total-name'>"+(a||" ")+" "+(e.PROVIDER_TRANS_ID?e.PROVIDER_TRANS_ID:" ")+"</div></div>"),n.appendChild(f);var _=this._doc.createElement("div");e.CONFIRMATION_NUMBER&&(_.innerHTML="<div class='itemDiv'><div class='total-name'>"+(o||" ")+" "+(e.CONFIRMATION_NUMBER?e.CONFIRMATION_NUMBER:" ")+"</div></div>",n.appendChild(_));var v=this._doc.createElement("div");t.collections.PAYMENT_LIST[0].P_CHANGE&&(v.innerHTML="<div class='changeDiv'><div class='total-name'>"+(u||" ")+"</div><div class='total-amount'>"+(t.collections.PAYMENT_LIST[0].P_CHANGE?Number(t.collections.PAYMENT_LIST[0].P_CHANGE).toFixed(2):" ")+"</div></div >",n.appendChild(v))}return n}},{key:"createTotalsData",value:function(e){var t=this._doc.createElement("div");t.id="tplOrderTotals",t.hasChildNodes()&&(t.classList+=" tpl-body-div");var n=this.$addTaxData.addTaxDataFunc(e);if(null!==n&&t.appendChild(n),this._docObj&&"invoice"===this._dicData.documentType){var r=this.$createVatTemplateService.createVatTemplate(e,this._doc);t.appendChild(r)}else{if(this._docObj&&"deliveryNote"===this._dicData.documentType)return t;var i=this._doc.createElement("div");i.id="OrderTotalsDiv",t.appendChild(i),i.hasChildNodes()&&(i.classList+=" tpl-body-div"),this.fillOrderTotals(i,e)}return t}},{key:"fillOrderTotals",value:function(e,t){var n=this;t.data.totals.length>0&&t.data.totals.forEach(function(t){var r=n._doc.createElement("div");"exclusive_tax"===t.type?r.innerHTML="<div class='itemDiv'><div class='total-name'>&nbsp;&nbsp;"+(t.name?t.name:" ")+" "+(t.rate?t.rate+" &nbsp;%":" ")+"</div> <div class='total-amount "+n.isNegative(t.amount)+"'>"+(t.amount?t.amount:" ")+"</div></div>":"exclusive_tax"!==t.type&&(r.innerHTML="<div class='itemDiv'><div class='total-name'>"+(t.name?t.name:" ")+"</div> <div class='total-amount "+n.isNegative(t.amount)+"'>"+(t.amount?t.amount:" ")+"</div></div>"),e.appendChild(r)})}},{key:"createPaymentsData",value:function(e){var t=this._doc.createElement("div");if(t.id="tplOrderPayments",this._docObj&&"deliveryNote"===this._dicData.documentType)return t;if(this._docObj&&"invoice"===this._dicData.documentType){if("CreditCardPayment"===this._docObj.docPaymentType||"CreditCardRefund"===this._docObj.docPaymentType){var n=this.createCreditTemplate(e);t.appendChild(n)}else if("GiftCard"===this._docObj.docPaymentType){var r=this.createGiftCardDetails(e);t.appendChild(r)}else if("CashPayment"===this._docObj.docPaymentType||"CashRefund"===this._docObj.docPaymentType){var i=this.createCashPaymentFooter(e);t.appendChild(i)}else if("ChequePayment"===this._docObj.docPaymentType||"ChequeRefund"===this.docObj.docPaymentType){var a=this.createChequePaymentFooter(e);t.appendChild(a)}}else{var o=this.fillPaymentsData(e);o.id="OrderPaymentsDiv",t.appendChild(o)}return t}},{key:"fillPaymentsData",value:function(e){var t=this,n=this._doc.createElement("tplOrderPayments");return n.id="OrderPaymentsDiv",e.data.payments.length>0&&e.data.payments.forEach(function(e){var r=t._doc.createElement("div");if(e&&(r.innerHTML="<div class="+("change"===e.type?"changeDiv":"itemDiv")+"><div class='total-name'>"+(e.name?e.name:" ")+"</div> <div class='total-amount "+t.isNegative(e.amount)+"'>"+(e.amount?e.amount:" ")+"</div></div>",n.appendChild(r)),e.holderName){var i=t._doc.createElement("div");i.innerHTML="&nbsp;&nbsp;&nbsp;"+e.holderName,n.appendChild(i)}}),n}},{key:"createGiftCardDetails",value:function(e){var t=this._doc.createElement("div"),n=this.$translate.getText("PAID_GIFTCARD"),r=e.collections.GIFT_CARD_PAYMENTS[0].P_AMOUNT?Number(e.collections.GIFT_CARD_PAYMENTS[0].P_AMOUNT).toFixed(2):"",i=this._doc.createElement("div");i.innerHTML="<div class='itemDiv'><div class='total-name'>"+(n||" ")+"</div><div class='total-amount'>"+r+"</div></div>",t.appendChild(i);var a=this.$translate.getText("CARD_NO"),o=e.collections.GIFT_CARD_PAYMENTS[0].CARD_NUMBER?e.collections.GIFT_CARD_PAYMENTS[0].CARD_NUMBER:"",u=this._doc.createElement("div");u.innerHTML="<div class='itemDiv'><div class='total-name'>"+(a||" ")+" "+o+"</div></div>",t.appendChild(u);var s=this.$translate.getText("TRANSACTION_NO"),c=e.collections.GIFT_CARD_PAYMENTS[0].PROVIDER_TRANS_ID?e.collections.GIFT_CARD_PAYMENTS[0].PROVIDER_TRANS_ID:"",l=this._doc.createElement("div");return l.innerHTML="<div class='itemDiv'><div class='total-name'>"+(s||" ")+" "+c+"</div></div>",t.appendChild(l),t}},{key:"createCashPaymentFooter",value:function(e){var t=this._doc.createElement("div");t.id="cashDiv";var n=this.$translate.getText("PAID_CASH"),r=this.$translate.getText("RETURNED_CASH"),i=e.collections.PAYMENT_LIST[0].P_AMOUNT?e.collections.PAYMENT_LIST[0].P_AMOUNT:"",a=this._doc.createElement("div");if(a.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.isRefund?r:n)+"</div><div class='total-amount "+this.isNegative(i)+"'>"+i.toFixed(2)+"</div></div>",t.appendChild(a),e.collections.PAYMENT_LIST[0].P_CHANGE){var o=this.$translate.getText("TOTAL_CASHBACK"),u=e.collections.PAYMENT_LIST[0].P_CHANGE?Number(e.collections.PAYMENT_LIST[0].P_CHANGE).toFixed(2):"",s=this._doc.createElement("div");s.innerHTML="<div class='changeDiv'><div class='total-name'>"+(o||"")+"</div><div class='total-amount "+this.isNegative(u)+"'>"+u+"</div></div>",t.appendChild(s)}return t}},{key:"createChequePaymentFooter",value:function(e){var t=this._doc.createElement("div");t.id="chequeDiv";var n=this.$translate.getText("PAID_CHEQUE"),r=this.$translate.getText("RETURNED_CHEQUE"),i=e.collections.PAYMENT_LIST[0].P_AMOUNT?e.collections.PAYMENT_LIST[0].P_AMOUNT:"",a=this._doc.createElement("div");if(a.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.isRefund?r:n)+"</div><div class='total-amount "+this.isNegative(i)+"'>"+i.toFixed(2)+"</div></div>",t.appendChild(a),e.collections.PAYMENT_LIST[0].P_CHANGE){var o=this.$translate.getText("TOTAL_CASHBACK"),u=e.collections.PAYMENT_LIST[0].P_CHANGE?Number(e.collections.PAYMENT_LIST[0].P_CHANGE).toFixed(2):"",s=this._doc.createElement("div");s.innerHTML="<div class='changeDiv'><div class='total-name'>"+(o||"")+"</div><div class='total-amount "+this.isNegative(u)+"'>"+u+"</div></div>",t.appendChild(s)}return t}},{key:"makeSVG",value:function(e,t){var n=this._doc.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)n.setAttribute(r,t[r]);return n}},{key:"appendChildren",value:function(e,t){var n=this._doc.createElement("div");return t.length>0&&t.forEach(function(e){n.appendChild(e)}),n}},{key:"isNegative",value:function(e){return parseInt(e)<0?"negative":""}},{key:"formatDateUS",value:function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())+" "+(t.getHours()>12?"PM":"AM")}},{key:"formatDateIL",value:function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()>10?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())}}])&&m(t.prototype,n),r&&m(t,r),e}(),g=n(0),O=n.n(g);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this._isUS,this._tlog,this._configure(t),this.$templateBuilder=new A(this._options),this.$translate=new u({local:t.local})}var t,n,r;return t=e,(n=[{key:"Enums",value:function(){return{DOC_TYPES:{INVOICE:"invoice",REFUND_INVOICE:"refundInvoice"},PaymentTypes:{OTH:"OTH",CreditCardPayment:"CreditCardPayment",ChargeAccountPayment:"ChargeAccountPayment",CashPayment:"CashPayment",ChequePayment:"ChequePayment",GiftCardPayment:"GiftCardPayment",ChargeAccountRefund:"ChargeAccountRefund",CashRefund:"CashRefund",ChequeRefund:"ChequeRefund",CreditCardRefund:"CreditCardRefund"}}}},{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS),e.moment?moment=e.moment:moment=window.moment}},{key:"orderTypesListCreator",value:function(e,t,n){var r=this,i=[];if(n){if(i.push({tlogId:e._id,id:e._id,type:e._type,title:this.$translate.getText("order")+" "+e.number,ep:"tlogs/".concat(e._id,"/bill"),isRefund:!1,isFullOrderBill:!0}),e.order[0].clubMembers&&e.order[0].clubMembers.length&&i.push({tlogId:e._id,id:e._id,type:e._type,title:this.$translate.getText("clubMembers"),ep:"documents/v2/".concat(doc._id,"/printdata"),isRefund:!1}),e.order[0].checks&&e.order[0].checks.length>1&&e.order[0].checks.forEach(function(t){var n=t.payments[0].paymentId;i.push({tlogId:e._id,id:t._id,type:"check",title:r.$translate.getText("CHECK")+" ".concat(t.number),ep:"tlogs/".concat(e._id,"/checks"),md:{paymentId:n,checkNumber:t.number}})}),this._isUS&&e.order&&e.order[0].allDocuments&&e.order[0].allDocuments.length>0){var a=e;e.order[0].allDocuments.forEach(function(t){if(t.payments.length>0&&t.payments[0]){var n,o=t.payments[0],u="";"creditCard"===o.tenderType&&(u=r.$translate.getText("CreditSlip")),"giftCard"===o.tenderType&&(u=r.$translate.getText("GiftCardCreditSlip")),"creditCard"!==o.tenderType&&"giftCard"!==o.tenderType||(a.order[0].allDocuments.forEach(function(e){e.payments.forEach(function(e){e._id===o._id&&(n=e)})}),o.number="".concat(e.order[0].number,"/").concat(o.number),i.push({tlogId:e._id,id:t.id,type:o.tenderType,title:u+"-"+o.number,ep:"documents/v2/".concat(o._id,"/printdata"),md:{paymentId:o._id,signature:n&&n.customerSignature?n.customerSignature.data:null},docPaymentType:o.tenderType?o.tenderType:"",isRefund:o.tenderType.toUpperCase().includes("REFUND")}))}})}if(!this._isUS)if(e.order)if(e.order[0].allDocuments&&e.order[0].allDocuments.length>0)this.filterOmittedPayments(e.order[0].allDocuments).forEach(function(t){switch(t._type){case r.Enums().DOC_TYPES.INVOICE:i.push({tlogId:e._id,id:t._id,type:t._type,title:r.$translate.getText("invoice_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type?t.payments[0]._type:"",isRefund:!1});break;case r.Enums().DOC_TYPES.REFUND_INVOICE:if("ChequeRefund"===t.payments[0]._type||"CashRefund"===t.payments[0]._type||"CreditCardRefund"===t.payments[0]._type){i.push({tlogId:e._id,id:t._id,type:t._type,title:r.$translate.getText("credit_invoice_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type,isRefund:!0});break}case"deliveryNote":if("ChargeAccountPayment"===t.payments[0]._type){i.push({tlogId:e._id,id:t._id,type:t._type,title:r.$translate.getText("delivery_note_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type,isRefund:t._type.toUpperCase().includes("REFUND")});break}case"refundDeliveryNote":if("ChargeAccountRefund"===t.payments[0]._type){i.push({tlogId:e._id,id:t._id,type:t._type,title:r.$translate.getText("refund_note_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type,isRefund:!0});break}}});console.log("orderSelection"),console.log(i)}else i.push({tlogId:"",id:"openOrder",type:"tlog",title:this.$translate.getText("order")+" ",ep:"",isRefund:!1,isFullOrderBill:!1});return i}},{key:"filterOmittedPayments",value:function(e){var t=[];e.forEach(function(n){if("omitted"===n.payments[0].providerTransactionStatus&&"CreditCardPayment"===n.payments[0]._type){var r=e.find(function(e){return e.payments[0].refundedPaymentId===n.payments[0]._id});r&&(t.push(n),t.push(r))}});return t.length>0&&t.forEach(function(t){var n=e.findIndex(function(e){return e.id===t.id});-1!==n&&e.splice(n,1)}),e}},{key:"getDocs",value:function(e,t,n){var r=new l(this._options).resolvePrintData({collections:t.printData.collections,variables:t.printData.variables},this._options._isUS);return this.orderTypesListCreator(e,r,n)}},{key:"getHTMLDocument",value:function(e,t){return this.$templateBuilder.createHTMLFromPrintDATA(e,t)}},{key:"getHTMLDocumentWithoutTlog",value:function(e,t){var n={isRefund:e.documentType.toUpperCase().indexOf("REFUND")>-1};switch(O.a.get(e,"printData.collections.PAYMENT_LIST[0].P_TENDER_TYPE")){case"cash":n.docPaymentType="CashPayment";break;case"creditCard":n.docPaymentType="CreditCardPayment";break;case"giftCard":n.docPaymentType="GiftCardPayment";break;case"cheque":n.docPaymentType="ChequePayment";break;case"chargeAccount":n.docPaymentType="ChargeAccountPayment"}return n.documentNumber=O.a.get(e,"printData.variables.DOCUMENT_NO"),this.getHTMLDocument(n,e)}}])&&y(t.prototype,n),r&&y(t,r),e}();function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.DocumentViewer=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={isUS:!1,local:"he-IL"},this._tlogDocsService=new N(this.options)}var t,n,r;return t=e,(n=[{key:"getDocumentsInfoFromTlog",value:function(e,t){return this._tlogDocsService.getDocs(e,t)}},{key:"getHTMLDocument",value:function(e,t){return this._tlogDocsService.getHTMLDocument(e,t)}},{key:"getHTMLDocumentWithoutTlog",value:function(e,t){return this._tlogDocsService.getHTMLDocumentWithoutTlog(e,t)}}])&&R(t.prototype,n),r&&R(t,r),e}()},function(e,t){}]);