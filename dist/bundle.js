!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist",a(a.s=0)}([function(e,t,a){"use strict";function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}a.r(t);var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"toFixedSafe",value:function(e,t){return e&&void 0!==e?e.toFixed(t):"--"}},{key:"currencyFraction",value:function(e,t){if(!t||e&&!isNaN(e)||(e=0),!isNaN(e)){var a=e/100,i=_this.toFixedSafe(a,2);return parseFloat(i)}}},{key:"isNegative",value:function(e){return parseInt(e)<0?"negative":""}},{key:"twoDecimals",value:function(e){return Number(e).toFixed(2)}},{key:"formatDateUS",value:function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())+" "+(t.getHours()>12?"PM":"AM")}},{key:"formatDateIL",value:function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()>10?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())}}])&&i(t.prototype,a),n&&i(t,n),e}();function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this.configure(t)}var t,a,i;return t=e,(a=[{key:"_translate",value:function(){var e,t;return{"en-US":(e={OTH:"OTH",MANUAL_ITEM_DISCOUNT:"Manual Discount",TOTAL_ORDER:"Subtotal",ORDER_DISCOUNT:"Order Discount",ECVLUSIVE_TAX:"Exclusive Tax",SERVICE_CHARGE:"Service Charge",TIP:"Tip",TOTAL_INC_VAT:"Check Total",CHANGE:"Change",INCLUSIVE_TAXES:"Inclusive Taxes",EXEMPTED_TAXES:"Exempted Taxes",EXEMPTED_TAX:"Tax Exempt",REVERSAL:"Reversal",RETURN:"Return",REFUND:"Refund",PRINT_BY_ORDER:"Order {{order_number}} on {{order_date}} {{order_time}}",WAITER_DINERS:"Server {{waiter}} Guests {{diners}}",TABLE_NUM:"Table {{table}}",TA:"TA",DELIVERY:"Delivery",INITIATED_DISCOUNT:"Initiated.D",CANCEL:"Cancel",CUSTOMER_NAME:"Name",LAST_4:"Last 4 Digits",AMOUNT:"Amount",CHARGE_ACCOUNT:"Charge Account",CASH:"Cash",GIFT_CARD:"Gift Card",GIFT_CARD_LOAD:"Charge Gift Card",CHEQUE:"Cheque",CREDIT:"Credit",CHARGE_ACCOUNT_REFUND:"Charge account refund",CASH_REFUND:"Cash Refund",CHEQUE_REFUND:"Cheque Refund",CREDIT_REFUND:"Credit Refund",OPEN:"Open",ORDER:"Order",CLOSE:"Close",PAYMENT:"Payment",OTH_ORDER_APPLIED:"Order OTH Requested",OTH_ORDER_APPROVED:"Order OTH Approved",OTH_ITEM_APPLIED:"Item OTH Requested",OTH_ITEM_APPROVED:"Item OTH Approved",CANCEL_ITEM_APPLIED:"Cancel Item Requested",CANCEL_ITEM_APPROVED:"Cancel Item Approved",RETURN_ITEM_APPLIED:"Return Item Requested",RETURN_ITEM_APPROVED:"Return Item Approved",PERCENT_OFF_ORDER:"% Off Order",AMOUNT_OFF_ORDER:" Off Order",PERCENT_OFF_ITEM:"% Off Item",APPLIED_SEGMENTATION:"Tag Applied",APPROVED_SEGMENTATION:"Tag Approved",ORDER_TYPES_SEATED:"Seated",ORDER_TYPES_TA:"TA",ORDER_TYPES_DELIVERY:"Delivery",ORDER_TYPES_REFUND:"Refund",ORDER_TYPES_OTC:"OTC",ORDER_TYPES_MEDIAEXCHANGE:"Media Exchange",OTH_TYPE_COMPENSATION:"Compensation",OTH_TYPE_CONSERVATION:"Conservation",OTH_TYPE_ORGANIZATIONAL:"Staff",CreditSlip:"Credit Slip",GiftCardCreditSlip:"Gift Card Slip",TransactionType:"TRANSACTION TYPE",CardType:"Card Type",CardNumber:"CARD No.",CardHolder:"Card Holder",Date:"Date/Time",Merchant:"MERCHANT CODE",Sequence:"SEQUENCE No.",Response:"RESPONSE CODE",Approval:"APPROVAL No.",Entry:"ENTRY METHOD",Amount:"Amount",CheckTotal:"Check Total",Tip:"Tip",Total:"TOTAL",Signature:"Signature",PrintCopy:"Print Copy",Check:"Check",Server:"Server",Table:"Table",Purchase:"PURCHASE",CustomerCopy:"Customer Copy",BN_NUMBER:"B.N.",PHONE:"Phone",INVOICE:"Invoice",RECEIPT:"Receipt",FOR:"For",CHARGE_TRANSACTION:"Charge Transaction",ALL_ORDER_OTH:"Order OTH",ORDER_TYPE:"Order"},r(e,"ORDER_TYPES_SEATED","Seated"),r(e,"ORDER_TYPES_TA","TA"),r(e,"ORDER_TYPES_DELIVERY","Delivery"),r(e,"ORDER_TYPES_REFUND","Refund"),r(e,"ORDER_TYPES_OTC","OTC"),r(e,"ORDER_TYPES_MEDIAEXCHANGE","Media Exchange"),r(e,"CHECK","Check"),r(e,"ORDER","Order"),r(e,"title","Orders Viewer"),r(e,"printer","Printings"),r(e,"printerName","Printer"),r(e,"documentType","Document type"),r(e,"orderState","Order State"),r(e,"general","General"),r(e,"tip_behavior","Tip behavior"),r(e,"amount","Amount"),r(e,"tip","Tip"),r(e,"discount","Discount"),r(e,"optimization","Optimization"),r(e,"time_line","Timeline"),r(e,"action","Action"),r(e,"data","Data"),r(e,"at","At"),r(e,"by","By"),r(e,"orders","Items"),r(e,"item","Item"),r(e,"price","Price"),r(e,"no_orders","No items"),r(e,"cancelled_items","Returns & Voids"),r(e,"no_cancelled_items","No Returns / Voids"),r(e,"unassigned_items","Unassigned Items"),r(e,"no_unassigned_items","No Unassigned Items"),r(e,"payments","Payments"),r(e,"no_payments","No Payments"),r(e,"tender_type","Payment Type"),r(e,"last_4","Last 4 Digits"),r(e,"face_value","Face Value"),r(e,"change","Change"),r(e,"no_changes","No Change"),r(e,"discounts","Discounts"),r(e,"discount_type","Discount Type"),r(e,"reason","Reason"),r(e,"no_discounts","No Discounts"),r(e,"promotions","Promotions"),r(e,"promotion","Promotion"),r(e,"no_promotions","No Promotions"),r(e,"redeem_code","Code"),r(e,"return_type","Return Type"),r(e,"return","Return"),r(e,"comment","Comment"),r(e,"applied","Requested By"),r(e,"approved","Approved"),r(e,"oth","OTH"),r(e,"charge_account","Charge Account"),r(e,"cash","Cash"),r(e,"cheque","Cheque"),r(e,"credit","Credit"),r(e,"giftCard","Gift Card"),r(e,"giftCardLoad","Charge Gift Card"),r(e,"charge_account_refund","Charge Account Refund"),r(e,"cash_refund","Cash Refund"),r(e,"cheque_refund","Cheque Refund"),r(e,"credit_refund","Credit Refund"),r(e,"refund","Refund"),r(e,"TA","TA"),r(e,"delivery","Delivery"),r(e,"order","Order"),r(e,"delivery_note","Delivery Note"),r(e,"refund_note","Refund Note"),r(e,"invoice","Invoice"),r(e,"refund_invoice","Refund invoice"),r(e,"cancel","Cancel"),r(e,"return","Return"),r(e,"open","Open"),r(e,"close","Close"),r(e,"payment","Payment"),r(e,"cancel_item_applied","Cancel Item Requested"),r(e,"cancel_item_approved","Cancel Item Approved"),r(e,"return_item_applied","Return Item Requested"),r(e,"return_item_approved","Return Item Approved"),r(e,"oth_item_applied","Item OTH Requested"),r(e,"oth_item_approved","Item OTH Approved"),r(e,"oth_order_applied","Order OTH Requested"),r(e,"oth_order_approved","Order OTH Approved"),r(e,"percent_off_order","% Off Order"),r(e,"amount_off_order"," Off Order"),r(e,"percent_off_item","% Off Item"),r(e,"amount_off_item"," Off Item"),r(e,"delivery_note_number","Delivery Note "),r(e,"refund_note_number","Refund Note "),r(e,"invoice_number","Invoice "),r(e,"credit_invoice_number","Credit Invoice "),r(e,"forcedClosed","Forced Closed"),r(e,"clubMembers","Club Members"),r(e,"orderer_name","Name"),r(e,"orderer_phone","Phone"),r(e,"orderer_delivery_summary","Address"),r(e,"orderer_delivery_notes","Notes"),r(e,"orderer_courier","Delivery Person"),r(e,"orderer_floor","FL"),r(e,"orderer_apartment","A"),r(e,"total_inc_vat","Check Total"),r(e,"total_order","Subtotal"),r(e,"payments_print","Payments"),r(e,"paid","Paid"),r(e,"bn-number","BN"),r(e,"phone","Phone"),r(e,"print_date","Printed on"),r(e,"print_by_order","Order {{order_number}} on {{order_date}} {{order_time}}"),r(e,"copy","Copy"),r(e,"order_number","Order"),r(e,"table","Table"),r(e,"waiter_diners","Server {{waiter}} Diners {{diners}} Table {{table}}"),r(e,"oth_print","OTH"),r(e,"all_order_oth","Order OTH"),r(e,"order_discount","Order Discount"),r(e,"manual_item_discount","Manual Discount"),r(e,"print_date_document","{{document_type}} created on {{order_date}} time {{order_time}}"),r(e,"print_date_deliveryNote","Delivery note created on {{order_date}} time {{order_time}}"),r(e,"print_date_invoice","Invoice created on {{order_date}} time {{order_time}}"),r(e,"diner","Diner"),r(e,"paid_by","Paid using"),r(e,"refunded_by","Refund using"),r(e,"charge_account_name","Charge account name"),r(e,"company","Company"),r(e,"customer_id","Customer ID"),r(e,"customer_name","Name"),r(e,"card_number","Card Number"),r(e,"order_search_comment","Search is by order closing time"),r(e,"from","From"),r(e,"to","To"),r(e,"appliedSegmentation","Tag Applied"),r(e,"approvedSegmentation","Tag Approved"),r(e,"exclusive_tax","Exclusive Tax"),r(e,"inclusive_tax","Inclusive Tax"),r(e,"inclusive_taxes","Inclusive Taxes"),r(e,"exempted_tax","Tax Exempt"),r(e,"exempted_taxes","Exempted Taxes"),r(e,"total_sales_amount","Total Sales"),r(e,"included","Included"),r(e,"Owner","Owner"),r(e,"reversal","Reversal"),r(e,"kickout","Kickout"),r(e,"Kicked_out","Kicked out"),r(e,"service_charge","Service Charge"),r(e,"type","Type"),r(e,"waiter"," waiter"),r(e,"Diners","Guests"),r(e,"RETURN_TRANSACTION","Return Transaction"),r(e,"BUSINESS_MEAL","Business meal"),r(e,"BEFORE_VAT","before VAT"),r(e,"INCLUDE_VAT","include VAT"),r(e,"VAT","VAT"),r(e,"RETURND_IN_CHARCHACCOUNT_FROM","Returned in charge account from"),r(e,"RETURNED_IN_CREDIT_FROM","Returned in credit from"),r(e,"PAID_IN_CREDIT_FROM","Paid in credit from"),r(e,"TRANSACTION_TIME","Transaction Time"),r(e,"TRANSACTION_NO","Transaction no."),r(e,"APPROVAL_NO","Approval no."),r(e,"TOTAL_AMOUNT","Total amount"),r(e,"PAID_IN_CHARCHACCOUNT_FROM","Paid in charge account from"),r(e,"CHARGE_ACCOUNT_NAME","Charge account name"),r(e,"PAID_GIFTCARD","Paid by gift card"),r(e,"CARD_NO","Card number"),r(e,"PAID_CASH","Paid in cash"),r(e,"RETURNED_CASH","Returned in cash"),r(e,"TOTAL_CASHBACK","Change"),r(e,"PAID_CHEQUE","Paid by cheque"),r(e,"RETURNED_CHEQUE","Returned in cheque"),r(e,"chargeAccountRefundInvoice","Refund Invoice"),r(e,"transactTimeText","DATE/TIME"),e),"he-IL":(t={OTH:"על חשבון הבית",MANUAL_ITEM_DISCOUNT:"הנחה יזומה",TOTAL_ORDER:'סה"כ הזמנה',ORDER_DISCOUNT:"הנחת חשבון",ECVLUSIVE_TAX:"מס שנוסף להזמנה",SERVICE_CHARGE:"Service Charge",TIP:"תשר",TOTAL_INC_VAT:'סה"כ לתשלום',CHANGE:"עודף",INCLUSIVE_TAXES:"Inclusive Taxes",EXEMPTED_TAXES:"Exempted Taxes",EXEMPTED_TAX:"Tax Exempt",REVERSAL:"ביטול",RETURN:"החזרה",REFUND:"החזר",Server:"מלצר",PRINT_BY_ORDER:"לפי הזמנה מס' {{order_number}} בתאריך {{order_date}} בשעה {{order_time}}",WAITER_DINERS:"מלצר {{waiter}} סועדים {{diners}}",TABLE_NUM:"שולחן {{table}}",TA:"TA",DELIVERY:"משלוחים",INITIATED_DISCOUNT:"הנחה יזומה",CANCEL:"ביטול",CUSTOMER_NAME:"שם",LAST_4:"4 ספרות",AMOUNT:"סכום",CHARGE_ACCOUNT:"הקפה",CASH:"מזומן",GIFT_CARD:"כרטיס תשלום",GIFT_CARD_LOAD:"טעינת כרטיס תשלום",CHEQUE:"המחאה",CREDIT:"אשראי",CHARGE_ACCOUNT_REFUND:"החזר הקפה",CASH_REFUND:"החזר מזומן",CHEQUE_REFUND:"החזר המחאה",CREDIT_REFUND:"החזר אשראי",OPEN:"פתיחה",ORDER:"הזמנה",CLOSE:"סגירה",PAYMENT:"תשלום",OTH_ORDER_APPLIED:"בקשה ל-OTH חשבון",OTH_ORDER_APPROVED:"אישור OTH חשבון",OTH_ITEM_APPLIED:"בקשה ל-OTH פריט",OTH_ITEM_APPROVED:"אישור OTH פריט",CANCEL_ITEM_APPLIED:"בקשה לביטול פריט",CANCEL_ITEM_APPROVED:"אישור ביטול פריט",RETURN_ITEM_APPLIED:"בקשה להחזרת פריט",RETURN_ITEM_APPROVED:"אישור החזרת פריט",PERCENT_OFF_ORDER:"% הנחת הזמנה",AMOUNT_OFF_ORDER:" הנחת סכום הזמנה",PERCENT_OFF_ITEM:"% הנחת פריט",APPLIED_SEGMENTATION:"בקשה לתיוג",APPROVED_SEGMENTATION:"אישור תיוג",ORDER_TYPE:"הזמנת",ORDER_TYPES_SEATED:"ישיבה",ORDER_TYPES_TA:" TA",ORDER_TYPES_DELIVERY:"משלוח",ORDER_TYPES_REFUND:"החזר",ORDER_TYPES_OTC:"דלפק (OTC)",ORDER_TYPES_MEDIAEXCHANGE:"טעינת כרטיס",OTH_TYPE_COMPENSATION:"פיצוי לקוחות",OTH_TYPE_CONSERVATION:"שימור לקוחות",OTH_TYPE_ORGANIZATIONAL:"עובדים",BN_NUMBER:"ח.פ.",PHONE:"טל'",INVOICE:"חשבונית מס",RECEIPT:"קבלה",FOR:"עבור",BN_OR_SN:"ח.פ / ת.ז",ALL_ORDER_OTH:"הזמנה על חשבון הבית",CHARGE_TRANSACTION:"עסקת חיוב הקפה"},r(t,"ORDER_TYPES_SEATED","ישיבה"),r(t,"ORDER_TYPES_TA"," TA"),r(t,"ORDER_TYPES_DELIVERY","משלוח"),r(t,"ORDER_TYPES_REFUND","החזר"),r(t,"ORDER_TYPES_OTC","דלפק (OTC)"),r(t,"ORDER_TYPES_MEDIAEXCHANGE","טעינת כרטיס"),r(t,"CHECK","חשבון"),r(t,"title","איתור הזמנה"),r(t,"orderState","מצב הזמנה"),r(t,"general","כללי"),r(t,"tip_behavior","סוג טיפ"),r(t,"printerName","מדפסת"),r(t,"documentType","סוג הדפסה"),r(t,"printer","הדפסות"),r(t,"amount","סכום"),r(t,"tip","תשר"),r(t,"discount","הנחה"),r(t,"optimization","אופטימיזציה"),r(t,"time_line","ציר זמן"),r(t,"action","פעולה"),r(t,"data","מידע"),r(t,"at","זמן"),r(t,"by",'ע"י'),r(t,"orders","מנות"),r(t,"item","פריט"),r(t,"price","מחיר"),r(t,"no_orders","אין מנות"),r(t,"cancelled_items","ביטולים והחזרות"),r(t,"no_cancelled_items","אין ביטולים והחזרות"),r(t,"unassigned_items","פריטים לא משוייכים"),r(t,"no_unassigned_items","אין פריטים לא משוייכים"),r(t,"payments","תשלומים"),r(t,"no_payments","אין תשלומים"),r(t,"tender_type","סוג תשלום"),r(t,"last_4","4 ספרות"),r(t,"face_value","ערך נקוב"),r(t,"change","עודף"),r(t,"no_changes","אין תשלומים"),r(t,"discounts","הנחות"),r(t,"discount_type","סוג הנחה"),r(t,"reason","סיבה"),r(t,"no_discounts","אין הנחות"),r(t,"promotions","מבצעים"),r(t,"promotion","מבצע"),r(t,"no_promotions","אין מבצעים"),r(t,"redeem_code","קוד"),r(t,"return_type","סוג ביטול"),r(t,"return","ביטול"),r(t,"comment","הערה"),r(t,"applied",'בקשה ע"י'),r(t,"approved",'אישור ע"י'),r(t,"oth","OTH"),r(t,"charge_account","הקפה"),r(t,"cash","מזומן"),r(t,"cheque","המחאה"),r(t,"credit","אשראי"),r(t,"giftCard","כרטיס תשלום"),r(t,"giftCardLoad","טעינת כרטיס תשלום"),r(t,"charge_account_refund","החזר הקפה"),r(t,"cash_refund","החזר מזומן"),r(t,"cheque_refund","החזר המחאה"),r(t,"credit_refund","החזר אשראי"),r(t,"refund","החזר"),r(t,"TA","TA"),r(t,"delivery","משלוח"),r(t,"order","הזמנה"),r(t,"delivery_note","תעודת משלוח"),r(t,"refund_note","תעודת החזר"),r(t,"invoice","חשבונית"),r(t,"refund_invoice","חשבונית החזר"),r(t,"cancel","ביטול"),r(t,"return","החזרה"),r(t,"open","פתיחה"),r(t,"close","סגירה"),r(t,"payment","תשלום"),r(t,"cancel_item_applied","בקשה לביטול פריט"),r(t,"cancel_item_approved","אישור ביטול פריט"),r(t,"return_item_applied","בקשה להחזרת פריט"),r(t,"return_item_approved","אישור החזרת פריט"),r(t,"oth_item_applied","בקשה ל-OTH פריט"),r(t,"oth_item_approved","אישור OTH פריט"),r(t,"oth_order_applied","בקשה ל-OTH חשבון"),r(t,"oth_order_approved","אישור OTH חשבון"),r(t,"percent_off_order","% הנחת הזמנה"),r(t,"amount_off_order"," הנחת סכום הזמנה"),r(t,"percent_off_item","% הנחת פריט"),r(t,"amount_off_item"," הנחת סכום פריט"),r(t,"delivery_note_number","תעודת משלוח מס "),r(t,"refund_note_number","תעודת זיכוי מס "),r(t,"invoice_number","חשבונית מס קבלה מס "),r(t,"credit_invoice_number","חשבונית זיכוי מס "),r(t,"forcedClosed","Forced Closed"),r(t,"clubMembers","חברי מועדון"),r(t,"orderer_name","שם"),r(t,"orderer_phone","טלפון"),r(t,"orderer_delivery_summary","כתובת"),r(t,"orderer_delivery_notes","הערות כתובת"),r(t,"orderer_courier","שליח"),r(t,"orderer_floor","ק"),r(t,"orderer_apartment","ד"),r(t,"total_inc_vat",'סה"כ לתשלום'),r(t,"total_order",'סה"כ הזמנה'),r(t,"payments_print","התקבל"),r(t,"bn-number","ח.פ."),r(t,"phone","טל'"),r(t,"print_date","הודפס בתאריך"),r(t,"print_by_order","לפי הזמנה מס' {{order_number}} בתאריך {{order_date}} בשעה {{order_time}}"),r(t,"copy","העתק"),r(t,"order_number","הזמנה מס'"),r(t,"table","שולחן"),r(t,"waiter_diners","מלצר {{waiter}} סועדים {{diners}} שולחן {{table}}"),r(t,"oth_print","על חשבון הבית"),r(t,"all_order_oth","הזמנה על חשבון הבית"),r(t,"order_discount","הנחת חשבון"),r(t,"manual_item_discount","הנחה יזומה"),r(t,"print_date_document","{{document_type}} הופקה בתאריך {{order_date}} בשעה {{order_time}}"),r(t,"print_date_deliveryNote","תעודת משלוח הופקה בתאריך {{order_date}} בשעה {{order_time}}"),r(t,"print_date_invoice","חשבונית הופקה בתאריך {{order_date}} בשעה {{order_time}}"),r(t,"diner","אירוח"),r(t,"paid_by","התקבל ב"),r(t,"refunded_by","הוחזר ב"),r(t,"charge_account_name","חשבון הקפה"),r(t,"company","חברה"),r(t,"customer_id","ח.פ / ת.ז"),r(t,"customer_name","שם"),r(t,"card_number","מספר כרטיס"),r(t,"order_search_comment","חיפוש ההזמנה הינו לפי שעת סגירתה"),r(t,"from","מ-"),r(t,"to","עד"),r(t,"appliedSegmentation","בקשה לתיוג"),r(t,"approvedSegmentation","אישור תיוג"),r(t,"exclusive_tax","מס שנוסף להזמנה"),r(t,"inclusive_tax","מס כלול"),r(t,"inclusive_taxes","מסים כלולים"),r(t,"total_sales_amount",'סה"כ הזמנה'),r(t,"included","כלול"),r(t,"Owner","Owner"),r(t,"reversal","ביטול"),r(t,"kickout","Kickout"),r(t,"Kicked_out","Kicked out"),r(t,"service_charge","Service Charge"),r(t,"type","סוג"),r(t,"waiter"," מלצר/ית"),r(t,"Diners","סועדים"),r(t,"RETURN_TRANSACTION","החזרת עסקה"),r(t,"BUSINESS_MEAL","ארוחה עסקית"),r(t,"BEFORE_VAT",'חייב במע"מ'),r(t,"INCLUDE_VAT",'כולל מע"מ'),r(t,"VAT",'מע"מ'),r(t,"RETURND_IN_CHARCHACCOUNT_FROM","הוחזר בהקפה מ "),r(t,"RETURNED_IN_CREDIT_FROM","הוחזר באשראי מ"),r(t,"PAID_IN_CREDIT_FROM","שולם באשראי מ"),r(t,"TRANSACTION_TIME","זמן העיסקה"),r(t,"TRANSACTION_NO","מספר עסקה"),r(t,"APPROVAL_NO","Approval no."),r(t,"APPROVAL_NO","מספר אישור"),r(t,"TOTAL_AMOUNT",'סה"כ לתשלום'),r(t,"PAID_IN_CHARCHACCOUNT_FROM","התקבל בהקפה מ "),r(t,"CHARGE_ACCOUNT_NAME","חשבון הקפה"),r(t,"PAID_GIFTCARD","התקבל בכרטיס מתנה"),r(t,"CARD_NO","מספר כרטיס"),r(t,"PAID_CASH","התקבל במזומן"),r(t,"RETURNED_CASH","הוחזר במזומן"),r(t,"TOTAL_CASHBACK","עודף"),r(t,"PAID_CHEQUE","התקבל בהמחאה"),r(t,"RETURNED_CHEQUE","הוחזר בהמחאה"),r(t,"chargeAccountRefundInvoice","חשבונית זיכוי"),t)}}},{key:"configure",value:function(e){e.local&&(this._options.local=e.local)}},{key:"getText",value:function(e,t,a){if(void 0!==e){var i=this._translate()[this._options.local][e];return void 0!==i?(void 0!==t&&void 0!==a&&t.length>0&&a.length>0&&t.forEach(function(e,t){i=i.replace("{{"+e+"}}",a[t])}),i):"[".concat(e,"]")}return"Missing Key"}}])&&s(t.prototype,a),i&&s(t,i),e}();function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._isUS,this._configure(t),this.$utils=new n,this.$translate=new o({local:t.local})}var t,a,i;return t=e,(a=[{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS),e.moment?moment=e.moment:moment=window.moment}},{key:"Enums",value:function(){var e;return{PaymentTypes:(e={OTH:"OTH",CreditCardPayment:"CreditCardPayment",ChargeAccountPayment:"ChargeAccountPayment",CashPayment:"CashPayment",ChequePayment:"ChequePayment"},d(e,"CreditCardPayment","CreditCardPayment"),d(e,"ChargeAccountRefund","ChargeAccountRefund"),d(e,"CashRefund","CashRefund"),d(e,"ChequeRefund","ChequeRefund"),d(e,"CreditCardRefund","CreditCardRefund"),e),OrderTypes:{Refund:"Refund",TA:"TA",Delivery:"Delivery",Seated:"Seated",OTC:"OTC"},ReturnTypes:{Cancellation:"cancellation",TransactionBased:"TRANSACTION BASED"},DiscountTypes:{OTH:"OTH"},OfferTypes:{Simple:"Simple",Combo:"Combo",ComplexOne:"Complex-One"},TransTypes:{Reversal:"Reversal",Return:"Return"},Sources:{TabitPay:"tabitPay"}}}},{key:"resolveItems",value:function(e,t){var a=this,i=!1;e.RETURN_TYPE===this.Enums().ReturnTypes.TransactionBased&&(i=!0);var n=t.ORDERED_OFFERS_LIST;i&&(n=t.RETURNED_OFFERS_LIST);var r=!1;t.EXEMPTED_TAXES&&t.EXEMPTED_TAXES.length>0&&this._isUS&&(r=!0);var s=[],o=[];return n&&n.length>0&&n.forEach(function(e){var t=0;if(t=e.SPLIT_DENOMINATOR&&e.SPLIT_NUMERATOR&&100!==e.SPLIT_DENOMINATOR&&100!==e.SPLIT_NUMERATOR?"".concat(e.SPLIT_NUMERATOR,"/").concat(e.SPLIT_DENOMINATOR):e.OFFER_QTY,e.OFFER_TYPE==a.Enums().OfferTypes.Simple){var n={isOffer:!0,name:e.OFFER_NAME,qty:t};e.ON_THE_HOUSE?(n.amount=a.$translate.getText("OTH"),o.push(n)):(e.OFFER_PRICE&&1===e.OFFER_QTY&&(n.amount=a.$utils.toFixedSafe(e.OFFER_PRICE,2),s.push(n)),e.OPEN_PRICE&&(n.amount=a.$utils.toFixedSafe(e.OFFER_PRICE,2),s.push(n))),e.ORDERED_OFFER_DISCOUNTS&&e.ORDERED_OFFER_DISCOUNTS.length>0&&e.ORDERED_OFFER_DISCOUNTS.forEach(function(e){s.push({isOfferDiscount:!0,name:e.DISCOUNT_NAME?e.DISCOUNT_NAME:a.$translate.getText("MANUAL_ITEM_DISCOUNT"),qty:null,amount:a.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})}),e.EXTRA_CHARGE_LIST&&e.EXTRA_CHARGE_LIST.length>0&&e.EXTRA_CHARGE_LIST.forEach(function(e){e.EXTRA_CHARGE_MODIFIERS_LIST&&e.EXTRA_CHARGE_MODIFIERS_LIST.length>0&&e.EXTRA_CHARGE_MODIFIERS_LIST.forEach(function(e){s.push({isItem:!0,name:e.MODIFIER_NAME,qty:null,amount:n.ON_THE_HOUSE?a.$translate.getText("OTH"):a.$utils.toFixedSafe(e.MODIFIER_PRICE,2)}),e.MODIFIER_DISCOUNTS&&e.MODIFIER_DISCOUNTS.length>0&&e.MODIFIER_DISCOUNTS.forEach(function(e){s.push({isItem:!0,name:e.DISCOUNT_NAME,qty:null,amount:n.ON_THE_HOUSE?a.$translate.getText("OTH"):a.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})})}),e.ITEM_DISCOUNTS&&e.ITEM_DISCOUNTS.length>0&&e.ITEM_DISCOUNTS.forEach(function(e){s.push({isItem:!0,name:e.DISCOUNT_NAME,qty:null,amount:a.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})})})}[a.Enums().OfferTypes.ComplexOne,a.Enums().OfferTypes.Combo].indexOf(e.OFFER_TYPE)>-1&&(s.push({isOffer:!0,name:e.OFFER_NAME,qty:t,amount:e.ON_THE_HOUSE?a.$translate.getText("OTH"):a.$utils.toFixedSafe(i?e.OFFER_AMOUNT:e.OFFER_CALC_AMT,2)}),i||e.ORDERED_ITEMS_LIST&&e.ORDERED_ITEMS_LIST.length>0&&e.ORDERED_ITEMS_LIST.forEach(function(e){s.push({isItem:!0,name:e.ITEM_NAME,qty:null,amount:null})}),i||e.EXTRA_CHARGE_LIST&&e.EXTRA_CHARGE_LIST.length>0&&e.EXTRA_CHARGE_LIST.forEach(function(e){e.EXTRA_CHARGE_MODIFIERS_LIST&&e.EXTRA_CHARGE_MODIFIERS_LIST.length>0?e.EXTRA_CHARGE_MODIFIERS_LIST.forEach(function(t){s.push({isItem:!0,name:t.MODIFIER_NAME,qty:null,amount:e.ON_THE_HOUSE?a.$translate.getText("OTH"):a.$utils.toFixedSafe(e.ITEM_AMOUNT,2)})}):e.ITEM_DISCOUNTS&&e.ITEM_DISCOUNTS.length>0?(s.push({isItem:!0,name:e.ITEM_NAME,qty:null,amount:a.$utils.toFixedSafe(e.ITEM_AMOUNT,2)}),e.ITEM_DISCOUNTS&&e.ITEM_DISCOUNTS.length>0&&e.ITEM_DISCOUNTS.forEach(function(e){s.push({isItem:!0,name:e.DISCOUNT_NAME,qty:null,amount:a.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})})):s.push({isItem:!0,name:e.ITEM_NAME,qty:null,amount:e.ON_THE_HOUSE?a.$translate.getText("OTH"):a.$utils.toFixedSafe(e.ITEM_AMOUNT,2)})}),e.ORDERED_OFFER_DISCOUNTS&&e.ORDERED_OFFER_DISCOUNTS.length>0&&e.ORDERED_OFFER_DISCOUNTS.forEach(function(e){s.push({isOfferDiscount:!0,name:e.DISCOUNT_NAME?e.DISCOUNT_NAME:a.$translate.getText("MANUAL_ITEM_DISCOUNT"),qty:null,amount:a.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})}))}),{items:s,oth:o,isReturnOrder:i,isTaxExempt:r}}},{key:"resolveChecksData",value:function(e){var t=e.printData.collections,a=e.printData.variables;if(0!==t.PAYMENT_LIST.length){var i={},n=this.resolveItems(a,t);i.items=n.items,i.oth=n.oth,i.isReturnOrder=n.isReturnOrder,i.isTaxExempt=n.isTaxExempt;var r=this.resolveTotals(a,t,!0);i.totals=r;var s=this.resolvePayments(a,t,!0);i.payments=s;var o=this.resolveTaxes(a,t,!0);return i.taxes=o,new function(e,t,a,i,n){this.collections=e,this.variables=t,this.data=a,this.print_by_order=i,this.waiter_diners=n}(t,a,i,this.resolvePrintByOrder(a),this.resolveWaiterDiners(a))}}},{key:"resolveTotals",value:function(e,t){var a=this,i=[];if(void 0!==e.TOTAL_SALES_AMOUNT&&(t.ORDER_DISCOUNTS_LIST&&t.ORDER_DISCOUNTS_LIST.length>0||void 0!==e.TOTAL_TIPS||this._isUS&&t.EXCLUSIVE_TAXES&&t.EXCLUSIVE_TAXES.length>0)&&i.push({name:this.$translate.getText("TOTAL_ORDER"),amount:this.$utils.toFixedSafe(e.TOTAL_SALES_AMOUNT,2)}),t.ORDER_DISCOUNTS_LIST&&t.ORDER_DISCOUNTS_LIST.length>0&&t.ORDER_DISCOUNTS_LIST.forEach(function(e){i.push({name:e.DISCOUNT_NAME?e.DISCOUNT_NAME:a.$translate.getText("ORDER_DISCOUNT"),amount:a.$utils.toFixedSafe(-1*e.DISCOUNT_AMOUNT,2)})}),t.EXCLUSIVE_TAXES&&t.EXCLUSIVE_TAXES.length>0&&this._isUS&&t.EXCLUSIVE_TAXES.forEach(function(e){i.push({type:"exclusive_tax",name:e.NAME?e.NAME:a.$translate.getText("ECVLUSIVE_TAX"),amount:a.$utils.toFixedSafe(e.AMOUNT,2),rate:e.RATE})}),t.TIPS){var n=t.TIPS.filter(function(e){return"order"===e.SCOPE});n&&n.length>0&&n&&n.length>0&&this._isUS&&n.forEach(function(e){var t=e.NAME?e.NAME:a.$translate.getText("SERVICE_CHARGE"),n=e.PERCENT;void 0!==n&&(t=e.NAME?"".concat(e.NAME," ").concat(n,"%"):"".concat(a.$translate.getText("SERVICE_CHARGE")," ").concat(n,"%")),0!==e.AMOUNT&&i.push({type:"service_charge",name:t,amount:a.$utils.toFixedSafe(e.AMOUNT,2)})})}if(void 0!==e.TOTAL_TIPS_ON_PAYMENTS||void 0!==e.TOTAL_TIPS){var r=0;void 0!==e.TOTAL_TIPS_ON_PAYMENTS&&0!==e.TOTAL_TIPS_ON_PAYMENTS?r=e.TOTAL_TIPS_ON_PAYMENTS:void 0!==e.TOTAL_TIPS&&0!==e.TOTAL_TIPS&&(r=e.TOTAL_TIPS),r>0&&i.push({type:"tips",name:this.$translate.getText("TIP"),amount:this.$utils.toFixedSafe(r,2)}),t.PAYMENT_LIST[0].TRANS_TYPE===this.Enums().TransTypes.Return&&0!==t.PAYMENT_LIST[0].TIP_AMOUNT&&i.push({type:"tips",name:this.$translate.getText("TIP"),amount:this.$utils.toFixedSafe(-1*t.PAYMENT_LIST[0].TIP_AMOUNT,2)})}return this._isUS||i.push({name:this.$translate.getText("TOTAL_INC_VAT"),amount:this.$utils.toFixedSafe(e.TOTAL_IN_VAT||0,2)}),this._isUS&&i.push({name:this.$translate.getText("TOTAL_INC_VAT"),amount:this.$utils.toFixedSafe(e.TOTAL_AMOUNT||0,2)}),i}},{key:"filterOmittedPayments",value:function(e){var t=[];e.forEach(function(a){if("omitted"===a.PROVIDER_TRANS_STATUS&&a.CANCELED){var i=e.find(function(e){return!e.CANCELED&&"REFUND"===e.PAYMENT_TYPE&&e.P_AMOUNT===a.P_AMOUNT&&"omitted"===e.PROVIDER_TRANS_STATUS});i&&(t.push(a),t.push(i))}});return t.length>0&&t.forEach(function(t){var a=e.findIndex(function(e){return e.P_ID===t.P_ID});-1!==a&&e.splice(a,1)}),e}},{key:"resolvePayments",value:function(e,t){var a=this,i=this.filterOmittedPayments(t.PAYMENT_LIST),n=[];return i.forEach(function(e){n.push({name:a.resolvePaymentName(e),amount:e.PAYMENT_TYPE?a.$utils.toFixedSafe(-1*e.P_AMOUNT,2):a.$utils.toFixedSafe(e.P_AMOUNT,2),holderName:void 0!==e.CUSTOMER_NAME?e.CUSTOMER_NAME:""})}),n.push({type:"change",name:this.$translate.getText("CHANGE"),amount:this.$utils.toFixedSafe(e.CHANGE,2)}),n}},{key:"resolveTaxes",value:function(e,t){var a=this,i={InclusiveTaxes:[],ExemptedTaxes:[],ExemptedTaxData:[]};return t.INCLUSIVE_TAXES&&t.INCLUSIVE_TAXES.length>0&&this._isUS&&(i.InclusiveTaxes.push({type:"title",name:"".concat(this.$translate.getText("INCLUSIVE_TAXES"),":"),amount:void 0}),t.INCLUSIVE_TAXES.forEach(function(e){i.InclusiveTaxes.push({type:"inclusive_tax",name:e.NAME?e.NAME:a.$translate.getText("INCLUSIVE_TAXES"),amount:a.$utils.toFixedSafe(e.AMOUNT,2)})})),t.EXEMPTED_TAXES&&t.EXEMPTED_TAXES.length>0&&this._isUS&&(i.ExemptedTaxes.push({type:"title",name:"".concat(this.$translate.getText("EXEMPTED_TAXES"),":"),amount:void 0}),t.EXEMPTED_TAXES.forEach(function(e){i.ExemptedTaxes.push({type:"exempted_tax",name:e.NAME?e.NAME:a.$translate.getText("EXEMPTED_TAX"),amount:a.$utils.toFixedSafe(e.AMOUNT,2)})})),i}},{key:"resolvePaymentName",value:function(e){var t="";return"REFUND"===e.PAYMENT_TYPE&&(t=e.TRANS_TYPE===this.Enums().TransTypes.Reversal?this.$translate.getText("REVERSAL"):e.TRANS_TYPE===this.Enums().TransTypes.Return?this.$translate.getText("RETURN"):this.$translate.getText("REFUND")),"creditCard"===e.P_TENDER_TYPE||"gidtCard"===e.P_TENDER_TYPE?""!==t?"".concat(t," (").concat(e.CARD_TYPE," ").concat(e.LAST_4,")"):"".concat(e.CARD_TYPE," ").concat(e.LAST_4):"".concat(t," ").concat(e.P_NAME)}},{key:"resolvePrintByOrder",value:function(e){return this.$translate.getText("PRINT_BY_ORDER",["order_number","order_date","order_time"],[e.ORDER_NO,moment(e.CREATED_AT).format("DD/MM/YYYY"),moment(e.CREATED_AT).format("HH:mm:ss")])}},{key:"resolveWaiterDiners",value:function(e){var t="";void 0!==e.F_NAME&&(t+=e.F_NAME),void 0!==e.L_NAME&&(t+=" ".concat(e.L_NAME[0]));void 0!==e.TABLE_NO&&e.TABLE_NO;var a="";return a+=this.$translate.getText("WAITER_DINERS",["waiter","diners"],["".concat(t),e.NUMBER_OF_GUESTS])}},{key:"resolvePrintData",value:function(e,t){var a=e.collections,i=e.variables,n={},r=this.resolveItems(i,a);n.items=r.items,n.oth=r.oth,n.isReturnOrder=r.isReturnOrder,n.isTaxExempt=r.isTaxExempt;var s=this.resolveTotals(i,a,!0);n.totals=s;var o=this.resolvePayments(i,a,!0);n.payments=o;var d=this.resolveTaxes(i,a,!0);return n.taxes=d,n.isUS=t,new function(e,t,a,i,n){this.collections=e,this.variables=t,this.data=a,this.print_by_order=i,this.waiter_diners=n}(a,i,n,this.resolvePrintByOrder(i),this.resolveWaiterDiners(i))}}])&&l(t.prototype,a),i&&l(t,i),e}();function _(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$utils=new n}var t,a,i;return t=e,(a=[{key:"isNegative",value:function(e){return this.$utils.isNegative(e)}},{key:"addTaxDataFunc",value:function(e){var t=this,a=null;return e.data.taxes.InclusiveTaxes.length>0||void 0!==e.data.taxes.InclusiveTaxes[0]||e.data.taxes.ExemptedTaxes.length>0||void 0!==e.data.taxes.ExemptedTaxes[0]?((a=_doc.createElement("div")).id="taxDataDiv",e.data.totals&&e.data.totals.length>0&&e.data.totals.forEach(function(e){var i=_doc.createElement("div");i.id="totalItemDiv",i.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.name?e.name:" ")+e.rate+"%</div> <div class='total-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div></div>",a.appendChild(i)}),e.data.payments&&e.data.payments.length>0&&e.data.payments.forEach(function(e){var i=_doc.createElement("div");i.id="paymentItemDiv",i.innerHTML="<div class='itemDiv'><div class='payment-name'>"+(e.name?e.name:" ")+"</div> <div class='payment-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div></div><div class='itemDiv'>"+e.holderName+"</div > ",a.appendChild(i)}),(e.data.taxes.InclusiveTaxes&&e.data.taxes.InclusiveTaxes.length>0||e.data.taxes.ExemptedTaxes&&e.data.taxes.ExemptedTaxes.length>0)&&(e.data.taxes.InclusiveTaxes.length>0&&e.data.taxes.InclusiveTaxes.forEach(function(e){var i=_doc.createElement("div");i.id="incTaxItemDiv",i.innerHTML="<div class='itemDiv'><div class='incTax-name'>"+(e.name?e.name:" ")+"</div> <div class='incTax-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div>"+a.appendChild(i)}),e.data.taxes.ExemptedTaxes.length>0&&e.data.taxes.ExemptedTaxes.forEach(function(e){var i=_doc.createElement("div");i.id="exmTaxItemDiv",i.innerHTML="<div class='itemDiv'><div class='incTax-name'>"+(e.name?e.name:" ")+"</div> <div class='incTax-amount "+t.isNegative(e.amount)+"'>"+(e.amount?Number(e.amount).toFixed(2):" ")+"</div>"+a.appendChild(i)})),a):null}}])&&_(t.prototype,a),i&&_(t,i),e}();function v(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._configure(t),this._local,this._isUS,this._doc,this.$translate=new o({local:t.local}),this.$utils=new n,t&&t.local?this._local=t.local:this._local="he-IL"}var t,a,i;return t=e,(a=[{key:"isNegative",value:function(e){return this.$utils.isNegative(e)}},{key:"formatDateIL",value:function(e){return this.$utils.formatDateIL(e)}},{key:"formatDateUS",value:function(e){return this.$utils.formatDateUS(e)}},{key:"twoDecimals",value:function(e){return this.$utils.twoDecimals(e)}},{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS,"en-US"===e.local&&(this._options.isUS=!0)),e.moment?moment=e.moment:moment=window.moment}},{key:"createVatTemplate",value:function(e,t){var a=this;this._doc=t;var i=this._doc.createElement("div");i.id="vatTemplate";var n=this._doc.createElement("div");n.id="vatHeaderDiv";var r={};if(e.collections.DOCUMENT_ITEMS&&e.collections.DOCUMENT_ITEMS.length>0){(r=e.collections.DOCUMENT_ITEMS).forEach(function(t){var r=null,s=null,o=null;if(e.isRefund){var d=a.$translate.getText("refund");n.classList.add("bold"),r=d}else if(e.isRefund||"MULTI_DOC"!==e.variables.ORDER_DOCUMENT_PRINT){if(!e.isRefund&&"SINGLE_DOC"===e.variables.ORDER_DOCUMENT_PRINT){var l=a.$translate.getText("TOTAL_AMOUNT");n.classList.add("bold"),o=l}}else{var c=a.$translate.getText("BUSINESS_MEAL");n.classList.add("bold"),s=c}n.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==r?r:"")+(s||"")+(o||"")+"</div> <div class='total-amount "+a.isNegative(t.ITEM_AMOUNT)+"'>"+(t.ITEM_AMOUNT?Number(t.ITEM_AMOUNT).toFixed(2):"")+"</div></div>",i.appendChild(n)});var s=this.createVatDataTemplate(r,!0);i.appendChild(s)}else{var o=null,d=null,l=null;if(e.isRefund){var c=this.$translate.getText("refund");n.classList.add("bold"),o=c}else if(e.isRefund||"MULTI_DOC"!==e.variables.ORDER_DOCUMENT_PRINT){if(!e.isRefund&&"SINGLE_DOC"===e.variables.ORDER_DOCUMENT_PRINT){var _=this.$translate.getText("TOTAL_AMOUNT");n.classList.add("bold"),l=_}}else{var T=this.$translate.getText("BUSINESS_MEAL");n.classList.add("bold"),d=T}r.TOTAL_EX_VAT=e.variables.TOTAL_EX_VAT,r.TOTAL_INCLUDED_TAX=e.variables.TOTAL_INCLUDED_TAX,r.VAT_PERCENT=e.variables.VAT_PERCENT,r.TOTAL_IN_VAT=e.variables.TOTAL_IN_VAT,r.ITEM_AMOUNT=e.variables.TOTAL_AMOUNT,n.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==o?o:"")+(d||"")+(l||"")+"</div> <div class='total-amount "+this.isNegative(r.ITEM_AMOUNT)+"'>"+(r.ITEM_AMOUNT?Number(r.ITEM_AMOUNT).toFixed(2):"")+"</div></div>",i.appendChild(n);s=this.createVatDataTemplate(r,!1);i.appendChild(s)}return i}},{key:"createVatDataTemplate",value:function(e,t){var a=this._doc.createElement("div");a.id="VatDataTemplate";var i=this._doc.createElement("div");i.id="vatDataDiv",i.classList+=" padding-bottom",i.classList+=" padding-top",i.classList+=" tpl-body-div";var n=this.$translate.getText("BEFORE_VAT"),r=this.$translate.getText("VAT"),s=this.$translate.getText("INCLUDE_VAT"),o=this._doc.createElement("div"),d=this._doc.createElement("div"),l=this._doc.createElement("div");return t?(o.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e[0].ITEM_AMOUNT_EX_VAT?n:"")+"</div> <div class='total-amount "+this.isNegative(e[0].ITEM_AMOUNT_EX_VAT)+"'>"+(e[0].ITEM_AMOUNT_EX_VAT?Number(e[0].ITEM_AMOUNT_EX_VAT).toFixed(2):"")+"</div></div>",d.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e[0].ITEM_VAT_PERCENT?r:"")+" "+e[0].ITEM_VAT_PERCENT+"%</div> <div class='total-amount "+this.isNegative(e[0].ITEM_VAT_AMOUNT)+"'>"+(e[0].ITEM_VAT_AMOUNT?Number(e[0].ITEM_VAT_AMOUNT).toFixed(2):"")+"</div></div>",l.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e[0].ITEM_AMOUNT?s:"")+"</div> <div class='total-amount "+this.isNegative(e[0].ITEM_AMOUNT)+"'>"+(e[0].ITEM_AMOUNT?Number(e[0].ITEM_AMOUNT).toFixed(2):"")+"</div></div>"):(o.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.TOTAL_EX_VAT?n:"")+"</div> <div class='total-amount "+this.isNegative(e.TOTAL_EX_VAT)+"'>"+(e.TOTAL_EX_VAT?Number(e.TOTAL_EX_VAT).toFixed(2):"")+"</div></div>",d.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.TOTAL_INCLUDED_TAX?r:"")+" "+e.VAT_PERCENT+"%</div> <div class='total-amount "+this.isNegative(e.TOTAL_INCLUDED_TAX)+"'>"+(e.TOTAL_INCLUDED_TAX?this.twoDecimals(e.TOTAL_INCLUDED_TAX):"")+"</div></div>",l.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.TOTAL_IN_VAT?s:"")+"</div> <div class='total-amount "+this.isNegative(e.TOTAL_IN_VAT)+"'>"+(e.TOTAL_IN_VAT?this.twoDecimals(e.TOTAL_IN_VAT):"")+"</div></div>"),i.appendChild(o),i.appendChild(d),i.appendChild(l),a.appendChild(i),a}}])&&v(t.prototype,a),i&&v(t,i),e}();function E(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._local,this._isUS,this._doc,this._configure(t),this.$translate=new o({local:t.local}),this.$createVatTemplateService=new u(t),this.$utils=new n,t&&t.local?this._local=t.local:this._local="he-IL"}var t,a,i;return t=e,(a=[{key:"isNegative",value:function(e){return this.$utils.isNegative(e)}},{key:"formatDateIL",value:function(e){return this.$utils.formatDateIL(e)}},{key:"formatDateUS",value:function(e){return this.$utils.formatDateUS(e)}},{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS,"en-US"===e.local&&(this._options.isUS=!0)),e.moment?moment=e.moment:moment=window.moment}},{key:"createDeliveryNoteTransactionData",value:function(e,t){this._doc=t;var a=this._doc.createElement("div");a.id="deliveryNoteTransactionDiv";var i,n=this.$createVatTemplateService.createVatTemplate(e,this._doc);n.id="deliveryVat",n.classList+=" padding-bottom",n.classList+=" padding-top",n.classList+=" tpl-body-div",a.appendChild(n),e.collections.HOUSE_ACCOUNT_PAYMENTS[0]&&(i=e.collections.HOUSE_ACCOUNT_PAYMENTS[0]);var r=this._doc.createElement("div");if(r.id="dNoteChargeAccntDiv",!0===e.isRefund){var s=this.$translate.getText("RETURND_IN_CHARCHACCOUNT_FROM");(o=this._doc.createElement("div")).id="refundTextDiv",o.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i?s+" "+i.CHARGE_ACCOUNT_NAME:"")+"</div><div class='total-amount "+this.isNegative(i.P_AMOUNT)+"'>"+(i.P_AMOUNT?i.P_AMOUNT:"")+"</div></div>",o.classList+=" padding-bottom",o.classList+=" padding-top",o.classList+=" tpl-body-div",r.appendChild(o)}else if(!e.isRefund&&i&&i.P_AMOUNT){var o;s=this.$translate.getText("PAID_IN_CHARCHACCOUNT_FROM");(o=this._doc.createElement("div")).id="refundTextDiv",o.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i?s+" "+i.CHARGE_ACCOUNT_NAME:"")+"</div><div class='total-amount "+this.isNegative(i.P_AMOUNT)+"'>"+(i.P_AMOUNT?Number(i.P_AMOUNT).toFixed(2):"")+"</div > </div>",o.classList+=" padding-bottom",o.classList+=" padding-top",o.classList+=" tpl-body-div",r.appendChild(o)}if(i){if(i.P_CHANGE>0){var d=this.$translate.getText("TOTAL_CASHBACK"),l=this._doc.createElement("div");l.id="cashBackDiv",cashbackDiv.innerHTML="<div class='changeDiv'><div class='total-name'>"+(i?d:"")+"</div><div class='total-amount "+this.isNegative(i.P_CHANGE)+"'>"+(i.P_CHANGE?Number(i.P_CHANGE).toFixed(2):"")+"</div></div>",r.appendChild(l)}if(i.PROVIDER_TRANS_ID){var c=this.$translate.getText("CHARGE_TRANSACTION"),_=this._doc.createElement("div");_.id="providerTransDiv",_.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i?c:"")+"</div><div class='total-amount'>"+(i.PROVIDER_TRANS_ID?i.PROVIDER_TRANS_ID:"")+"</div></div>",r.appendChild(_)}if(i.CHARGE_ACCOUNT_NAME){var T=this.$translate.getText("CHARGE_ACCOUNT_NAME"),v=this._doc.createElement("div");v.id="cAccountNameDiv",v.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i?T:"")+" "+(i.CHARGE_ACCOUNT_NAME?i.CHARGE_ACCOUNT_NAME:"")+"</div></div>",r.appendChild(v)}if(i.COMPANY_NAME){var u=this.$translate.getText("company"),E=this._doc.createElement("div");E.id="companyNameDiv",E.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i?u:"")+": "+(i.COMPANY_NAME?i.COMPANY_NAME:"")+"</div></div>",r.appendChild(E)}if(i.LAST_4){var m=this.$translate.getText("LAST_4"),h=this._doc.createElement("div");h.id="lastFourDiv",h.innerHTML="<div class='itemDiv'><div class='item-name'>"+(i?m:" ")+"  "+(i.LAST_4?i.LAST_4:" ")+"</div>",r.appendChild(h)}if(i.PROVIDER_PAYMENT_DATE){e.collections.HOUSE_ACCOUNT_PAYMENTS[0];var p,A=i.PROVIDER_PAYMENT_DATE,O=this.$translate.getText("TRANSACTION_TIME"),N=this._doc.createElement("div");this._isUS?p=this.formatDateUS(A):this._isUS||(p=this.formatDateIL(A)),N.innerHTML="<div class='itemDiv'><div class='item-name'>"+(i?O:"")+" "+(i.PROVIDER_PAYMENT_DATE?p:"")+"</div>",r.appendChild(N)}}return r.classList+=" tpl-body-div",a.appendChild(r),a}}])&&E(t.prototype,a),i&&E(t,i),e}();function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options={},this._local,this._isUS,this._doc}var t,a,i;return t=e,(a=[{key:"createCreditSlip",value:function(e,t,a){this._doc=a;var i=this._doc.createElement("div");i.id="creditSlipDiv";var n=e.collections.PAYMENT_LIST&&e.collections.PAYMENT_LIST[0]?e.collections.PAYMENT_LIST[0]:null;if(n){var r=this._doc.createElement("div");r.id="transactionTypeDiv";var s=$translate.getText("TransactionType");r.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==s?s:"")+": "+(n.TRANS_TYPE?n.TRANS_TYPE:"")+"</div></div>",r.classList+=" padding-top",i.appendChild(r);var o=this._doc.createElement("div");o.id="cardTypeDiv";var d=$translate.getText("CardType");o.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==d?d:"")+": "+(n.CARD_TYPE?n.CARD_TYPE:"")+"</div></div>",i.appendChild(o);var l=this._doc.createElement("div");l.id="cardNumDiv";var c=$translate.getText("CardNumber");if(l.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==c?c:"")+": "+(n.CARD_NUMBER_MASKED?n.CARD_NUMBER_MASKED:"XXXX-"+n.LAST_4)+"</div></div>",i.appendChild(l),"creditCard"===n.P_TENDER_TYPE){var _=this._doc.createElement("div");_.id="pTenderTypeDiv";var T=$translate.getText("CardHolder");_.innerHTML="<div class='itemDiv'>"+(null!==T?T:"")+": "+(n.CUSTOMER_NAME?n.CUSTOMER_NAME:"")+"</div></div>",i.appendChild(_)}var v,u=n.PROVIDER_PAYMENT_DATE,E=$translate.getText("transactTimeText"),m=this._doc.createElement("div");this._isUS?v=formatDateUS(u):this._isUS||(v=formatDateIL(u)),m.innerHTML="<div class='itemDiv'><div class='total-name'>"+(E||"")+": "+(E?v:"")+"</div></div>",m.classList+=" padding-bottom",m.classList+=" tpl-body-div",i.appendChild(m);var h=this._doc.createElement("div");h.id="merchantDiv";var p=$translate.getText("Merchant");h.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==p?p:"")+": "+(n.MERCHANT_NUMBER?n.MERCHANT_NUMBER:"")+"</div></div>",h.classList+=" padding-top",i.appendChild(h);var A=this._doc.createElement("div");A.id="sequenceDiv";var O=$translate.getText("Sequence");A.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==O?O:"")+": "+ +(n.PROVIDER_TRANS_ID?n.PROVIDER_TRANS_ID:"")+"</div></div>",i.appendChild(A);var N=this._doc.createElement("div");N.id="responseDiv";var R=$translate.getText("Response"),C=n.PROVIDER_RESPONSE_MESSAGE?n.PROVIDER_RESPONSE_MESSAGE:"";N.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!=R?R:"")+": "+(n.PROVIDER_RESPONSE_CODE?n.PROVIDER_RESPONSE_CODE+"/"+C:"")+"</div></div>",i.appendChild(N);var D=this._doc.createElement("div");D.id="approvalDiv";var f=$translate.getText("Approval");D.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==f?f:"")+": "+(n.CONFIRMATION_NUMBER?n.CONFIRMATION_NUMBER:"")+"</div></div>",i.appendChild(D);var I=this._doc.createElement("div");I.classList+=" tpl-body-div",I.id="entryDiv";var S=$translate.getText("Entry");I.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==S?S:"")+": "+(n.ENTRY_METHOD?n.ENTRY_METHOD:"")+"</div></div>",I.classList+=" padding-bottom",I.classList+=" tpl-body-div",i.appendChild(I);var M=this._doc.createElement("div");M.id="checkTotalDiv";var y=$translate.getText("CheckTotal");M.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==y?y:"")+": </div ><div class='total-amount'>"+(n.P_AMOUNT_WO_TIP?Number(n.P_AMOUNT_WO_TIP).toFixed(2):"")+"</div></div>",M.classList+=" padding-top",i.appendChild(M);var P=this._doc.createElement("div");P.id="tipDiv";var g,L=$translate.getText("Tip");g=void 0!==n.TIP_AMOUNT&&null!==n.TIP_AMOUNT?n.TIP_AMOUNT:0,P.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==L?L:"")+": </div ><div class='total-amount'>"+(g?Number(g).toFixed(2):0)+"</div></div>",i.appendChild(P);var U=this._doc.createElement("div");U.id="totalDiv";var b=$translate.getText("Total");if(U.innerHTML="<div class='itemDiv'><div class='total-name'>"+(b||"")+": </div ><div class='total-amount'>"+(n.P_AMOUNT?Number(n.P_AMOUNT).toFixed(2):"")+"</div></div>",i.appendChild(U),t.md.signature){var x=t.md.signature,H=this._doc.createElement("div");H.id="signatureDiv",H.classList+=" signature-container";var F=this._doc.createElement("div");F.id="elementSVGDiv",F.classList+=" signature-container";var $=this._doc.createElement("div");$.id="newSVG",F.appendChild($),$.outerHTML+="<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" id='svg' width='100%' height='100' transform='translate(0, 0)'  viewBox=\"0 0 500 150\" ></svg>";var Y=F.getElementsByTagName("svg")[0];Y.classList+=" signature-container",F.appendChild(Y),H.appendChild(F);var V=H.getElementsByTagName("svg")[0];V.id="elementSVG";var k=makeSVG("path",{d:x,version:"1.1",xmlns:"http://www.w3.org/2000/svg",stroke:"#06067f","stroke-width":"2",height:"auto",transform:"translate(50,-80) scale(0.5,0.5)","stroke-linecap":"butt",fill:"none","stroke-linejoin":"miter"});k.setAttribute("width","50%"),k.setAttribute("height","auto"),V.setAttribute("width","100"),V.setAttribute("height","auto"),V.innerHTML="",V.appendChild(k),V.setAttribute("width","100%"),V.setAttribute("height","auto"),F.appendChild(V),i.appendChild(H)}}return i}}])&&h(t.prototype,a),i&&h(t,i),e}();function A(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this._docData,this._docObj,this._printData,this._isUS,this._doc,this._local,this._configure(t),this.$translate=new o({local:t.local}),t&&t.local?this._local=t.local:this._local="he-IL",this.$billService=new c(this._options),this.$createVatTemplateService=new u(this._options),this.$createCreditSlipService=new p,this.$deliveryNoteTransactionService=new m(this._options),this.$addTaxData=new T;var a=document.implementation.createHTMLDocument("BillTemplate");this._doc=a;var i=this._doc.createElement("style");i.id="styleTag",this._doc.head.appendChild(i);var n=this._doc.createTextNode("\n        .templateDiv{\n            background-color:white;\n        }\n        ");i.appendChild(n)}var t,a,i;return t=e,(a=[{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS,"en-US"===e.local&&(this._options.isUS=!0)),e.moment?moment=e.moment:moment=window.moment}},{key:"createHTMLFromPrintDATA",value:function(e,t){var a=e.isRefund;this._docObj=e,this._dicData=t,this._printData=this.$billService.resolvePrintData(t.printData,this._isUS),this._printData.isRefund=a;var i=this.createDocTemplate(e);this._doc.body.appendChild(i);var n=this._doc;return(new XMLSerializer).serializeToString(n)}},{key:"createDocTemplate",value:function(e){var t=this._doc.createElement("div");t.id="docTemplate",t.classList.add("basicTemplate"),"he-IL"==this._local?(t.classList+=" rtl",t.classList.remove("ltr")):(t.classList+=" ltr",t.classList.remove("rtl"));var a,i=this.createHeader(this._printData);t.appendChild(i),"he-IL"==this._local&&"check"===e.documentType&&(a=!0);var n=e.md&&"creditCard"===e.type&&!e.isFullOrderBill&&!e.md.checkNumber&&!a;if(null!==n&&n){var r=this.$createCreditSlipService.createCreditSlip(this._printData,e,this._doc);t.appendChild(r)}else{if("REFUND"!==this._printData.variables.ORDER_TYPE.toUpperCase()){var s=this.createOrderPaymentData(this._printData);s.id="tplOrderPaymentData",s.hasChildNodes()&&(s.classList+=" body-div")}var o=this.createTotalsData(this._printData),d=this.createPaymentsData(this._printData);o.id="tplOrderTotals",d.id="tplOrderPayments",o.hasChildNodes()&&(o.classList+=" body-div tpl-body-div"),d.hasChildNodes()&&(d.classList+=" body-div tpl-body-div"),"REFUND"!==this._printData.variables.ORDER_TYPE.toUpperCase()&&t.appendChild(s),o.hasChildNodes()&&t.appendChild(o),d.hasChildNodes()&&t.appendChild(d)}return t}},{key:"createHeader",value:function(e){var t=this,a=this._doc.createElement("div");a.id="headerDiv";var i=this._doc.createElement("div");i.id="tplHeaderConstants",i.classList+=" rowPadding";["ORGANIZATION_NAME","ORGANIZATION_LEGAL_NAME","ORGANIZATION_ADDR_STREET","ORGANIZATION_ADDR_CITY","ORGANIZATION_TEL"].forEach(function(a){var n=t.placeHeaderData(e,a);i.appendChild(n)});var n=this._doc.createElement("div");n.id="tplHeader",n.setAttribute("style","text-align:center;"),n.classList+=" rowPadding";var r=this.createOrderHeader(e);r.id="orderHeader",r.classList+=" rowPadding";var s=this.createOrderInfoText(e);return s.id="tplOrderInfoText",n.appendChild(i),n.appendChild(r),n.appendChild(s),a.appendChild(n),a.classList.add("header-div"),a.classList.add("header-border"),a}},{key:"placeHeaderData",value:function(e,t){var a=this._doc.createElement("div");if(a.id="tplHeaderLine",e.variables.hasOwnProperty(t))switch(t){case"ORGANIZATION_NAME":a.innerHTML=e.variables.ORGANIZATION_NAME,a.classList+=" big-chars";break;case"ORGANIZATION_LEGAL_NAME":if(this._isUS)a.innerHTML=e.variables.ORGANIZATION_LEGAL_NAME;else{var i=this.$translate.getText("BN_NUMBER"),n=e.variables.ORGANIZATION_LEGAL_NAME+"-"+i+" "+e.variables.ORGANIZATION_BN_NUMBER;a.innerHTML=n}break;case"ORGANIZATION_ADDR_STREET":a.innerHTML=e.variables.ORGANIZATION_ADDR_STREET;break;case"ORGANIZATION_ADDR_CITY":a.innerHTML=e.variables.ORGANIZATION_ADDR_CITY;break;case"ORGANIZATION_TEL":var r=this.$translate.getText("PHONE")+" "+e.variables.ORGANIZATION_TEL;a.innerHTML=r}return a}},{key:"createOrderHeader",value:function(e){var t=this._doc.createElement("div");t.id="tplOrderHeader";var a=this._doc.createElement("div");a.id="tplOrderCustomer";var i=this._doc.createElement("div");i.id="tplOrderDateTime",i.classList.add("mystyle");var n=this._doc.createElement("div");n.id="tplOrderType",n.setAttribute("style","text-align:center;");var r=this._doc.createElement("div");r.id="tplOrderTable";var s=this._doc.createElement("div");s.id="tplOrderServerClients";var o=[a,i,n,r,s],d=[];return this.placeOrderHeaderData(e,o,d),this.appendChildren(t,d)}},{key:"placeOrderHeaderData",value:function(e,t,a){var i=this;t.forEach(function(t){var n=i.fillOrderHeaderData(e,t);a.push(n)})}},{key:"fillOrderHeaderData",value:function(e,t){switch(t.id){case"tplOrderCustomer":if(e.variables.CUSTOMER_ID){var a=this.$translate.getText("FOR"),i=this.$translate.getText("BN_OR_SN"),n=e.collections.PAYMENT_LIST[0].CUSTOMER_NAME,r=e.collections.PAYMENT_LIST[0].CUSTOMER_ID;t.innerText=a+": "+n+" "+i+": "+r}break;case"tplOrderDateTime":if(e.variables.CREATED_AT){var s=e.variables.CREATED_AT;this._isUS?t.innerHTML=this.formatDateUS(s):this._isUS||(t.innerHTML=this.formatDateIL(s)),t.setAttribute("class","med-chars")}break;case"tplOrderType":if(e.variables.ORDER_TYPE&&"REFUND"!==e.variables.ORDER_TYPE.toUpperCase()){var o=this.$translate.getText("ORDER_TYPE"),d="ORDER_TYPES_"+e.variables.ORDER_TYPE,l=this.$translate.getText(d);t.innerHTML="<div class='centralize' style='justify-content:center;'><span>"+o+"</span>&nbsp;<span>"+l+"</span > &nbsp; <span> #"+e.variables.ORDER_NO+"</span ></div > ",t.setAttribute("class","med-chars")}break;case"tplOrderTable":if("SEATED"===e.variables.ORDER_TYPE&&e.variables.TABLE_NO){var c=this.$translate.getText("table");t.innerHTML=c+" "+e.variables.TABLE_NO,t.setAttribute("class","med-chars")}break;case"tplOrderServerClients":if("invoice"!==this._dicData.documentType&&"deliveryNote"!==this._dicData.documentType){var _=this.$translate.getText("Server"),T=this.$translate.getText("Diners"),v=e.variables.F_NAME&&null!==e.variables.F_NAME?e.variables.F_NAME:"",u=e.variables.L_NAME&&null!==e.variables.L_NAME?e.variables.L_NAME:"";t.innerHTML="<span> "+_+": "+v+" "+u.substring(0,1)+" - "+T+": "+e.variables.NUMBER_OF_GUESTS+"</span>"}}return t}},{key:"createOrderInfoText",value:function(e){var t=this._doc.createElement("div");if(t.id="tplOrderInfoText","1"===e.variables.ORDER_ON_THE_HOUSE){var a=this._doc.createElement("div");a.id="allOrderOthTextDiv",a.innerHTML=this.$translate.getText("ALL_ORDER_OTH"),a.classList+=" othDiv",t.appendChild(a)}if(e.data.isReturnOrder){var i=this._doc.createElement("div");if(i.id="isReturnOrderTextDiv",i.innerHTML=this.$translate.getText("RETURN_TRANSACTION"),t.appendChild(i),e.variables.RETURN_COMMENT){var n=this._doc.createElement("div");n.id="returnOrderCommentDiv",n.innerHTML=e.variables.RETURN_COMMENT,t.appendChild(n)}}if(e.data.isTaxExempt){var r;if(e.variables.TAX_EXEMPTION_CODE)(r=this._doc.createElement("div")).id="isTaxExemptCodeDiv",r.innerHTML=e.variables.TAX_EXEMPTION_CODE,t.appendChild(r);if(e.variables.TAX_EXEMPTION_COMMENT)(r=this._doc.createElement("div")).id="isTaxExemptCodeDiv",r.innerHTML=e.variables.TAX_EXEMPTION_COMMENT,t.appendChild(r)}return t}},{key:"createOrderPaymentData",value:function(e){var t=this._doc.createElement("div"),a=this.$billService.resolveItems(e.variables,e.collections);t.classList+=" tpl-body-div";var i=this._doc.createElement("div");if(i.id="paymentDataDiv",i.classList+=" padding-top",i.classList+=" padding-bottom",t.appendChild(i),this._docObj&&"deliveryNote"!==this._dicData.documentType)this.fillItemsData(i,a,e),this.fillOthData(i,a);else if(this._docObj&&"deliveryNote"===this._dicData.documentType){this.fillItemsData(i,a,e),this.fillOthData(i,a);var n=this.$deliveryNoteTransactionService.createDeliveryNoteTransactionData(e,this._doc);t.appendChild(n)}return t}},{key:"fillItemsData",value:function(e,t,a){var i=this;a.isRefund||t.items.forEach(function(t){var a=i._doc.createElement("div");t.isOffer?(a.classList.add("bold"),t.space=""):t.isOffer||(a.classList.add("itemDiv"),t.qty="&nbsp;&nbsp;",t.space="&emsp;"),a.innerHTML="<div class='itemDiv'><div class='item-qty'>"+(t.qty?t.qty:" ")+"</div> <div class='item-name'>"+t.space+(t.name?t.name:"")+"</div> <div class='total-amount "+i.isNegative(t.amount)+"'>"+(t.amount?t.amount:"")+"</div></div>",e.appendChild(a)})}},{key:"fillOthData",value:function(e,t){var a=this;t.oth.forEach(function(t){var i=a._doc.createElement("div");t.isOffer?(i.classList.add("bold"),t.space=""):t.isOffer||(t.id="singleOthDiv",t.qty="&nbsp;&nbsp;",t.space="&emsp;"),i.innerHTML="<div class='itemDiv'><div class='item-qty'>"+(t.qty?t.qty:" ")+"</div> <div class='item-name'>"+t.space+(t.name?t.name:"")+"</div> <div class='total-amount "+a.isNegative(t.amount)+"'>"+(t.amount?t.amount:"")+"</div></div>",e.appendChild(i)})}},{key:"createCreditTemplate",value:function(e){var t=this._doc.createElement("div");t.id="CreditTemplate";var a=this._doc.createElement("div");a.id="CreditHeaderDiv";var i={};if(e.collections.CREDIT_PAYMENTS&&e.collections.CREDIT_PAYMENTS.length>0){var n=null,r=null,s=(i=e.collections.CREDIT_PAYMENTS[0]).ISSUER,o=i.P_AMOUNT;if(e.isRefund){var d=this.$translate.getText("RETURNED_IN_CREDIT_FROM");a.classList.add("bold"),n=d,a.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==n?n:"")+" "+(s||"")+"</div> <div class='total-amount "+this.isNegative(o)+"'>"+(o?Number(o).toFixed(2):"")+"</div></div>",t.appendChild(a)}else{var l=this.$translate.getText("PAID_IN_CREDIT_FROM");a.classList.add("bold"),r=l,a.innerHTML="<div class='itemDiv'><div class='total-name'>"+(null!==r?r:"")+" "+(s||"")+"</div> <div class='total-amount "+this.isNegative(o)+"'>"+(o?Number(o).toFixed(2):"")+"</div></div>",t.appendChild(a)}var c=this.createCreditDataTemplate(i,e);t.appendChild(c)}return t}},{key:"createCreditDataTemplate",value:function(e,t){var a=this._doc.createElement("div");if(a.id="creditDataDiv",e){var i=this.$translate.getText(e.LAST_4?"LAST_4":""),n=this.$translate.getText(e.PROVIDER_PAYMENT_DATE?"TRANSACTION_TIME":""),r=this.$translate.getText(e.PROVIDER_TRANS_ID?"TRANSACTION_NO":""),s=this.$translate.getText(e.CONFIRMATION_NUMBER?"APPROVAL_NO":""),o=this.$translate.getText(t.variables.CHANGE?"TOTAL_CASHBACK":""),d=this._doc.createElement("div");i&&(d.innerHTML="<div class='itemDiv'><div class='total-name'>"+(i||" ")+" "+(e.LAST_4?e.LAST_4:" ")+"</div>"),a.appendChild(d);var l,c=e.PROVIDER_PAYMENT_DATE,_=this._doc.createElement("div");this._isUS?l=this.formatDateUS(c):this._isUS||(l=this.formatDateIL(c)),_.innerHTML="<div class='itemDiv'><div class='total-name'>"+(n||"")+" "+(n?l:"")+"</div></div>",a.appendChild(_);var T=this._doc.createElement("div");e.PROVIDER_TRANS_ID&&(T.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r||" ")+" "+(e.PROVIDER_TRANS_ID?e.PROVIDER_TRANS_ID:" ")+"</div></div>"),a.appendChild(T);var v=this._doc.createElement("div");e.CONFIRMATION_NUMBER&&(v.innerHTML="<div class='itemDiv'><div class='total-name'>"+(s||" ")+" "+(e.CONFIRMATION_NUMBER?e.CONFIRMATION_NUMBER:" ")+"</div></div>",a.appendChild(v));var u=this._doc.createElement("div");t.collections.PAYMENT_LIST[0].P_CHANGE&&(u.innerHTML="<div class='changeDiv'><div class='total-name'>"+(o||" ")+"</div><div class='total-amount'>"+(t.collections.PAYMENT_LIST[0].P_CHANGE?Number(t.collections.PAYMENT_LIST[0].P_CHANGE).toFixed(2):" ")+"</div></div >",a.appendChild(u))}return a}},{key:"createTotalsData",value:function(e){var t=this._doc.createElement("div");t.id="tplOrderTotals",t.hasChildNodes()&&(t.classList+=" tpl-body-div");var a=this.$addTaxData.addTaxDataFunc(e);if(null!==a&&t.appendChild(a),this._docObj&&"invoice"===this._dicData.documentType){var i=this.$createVatTemplateService.createVatTemplate(e,this._doc);t.appendChild(i)}else{if(this._docObj&&"deliveryNote"===this._dicData.documentType)return t;var n=this._doc.createElement("div");n.id="OrderTotalsDiv",t.appendChild(n),n.hasChildNodes()&&(n.classList+=" tpl-body-div"),this.fillOrderTotals(n,e)}return t}},{key:"fillOrderTotals",value:function(e,t){var a=this;t.data.totals.length>0&&t.data.totals.forEach(function(t){var i=a._doc.createElement("div");"exclusive_tax"===t.type?i.innerHTML="<div class='itemDiv'><div class='total-name'>&nbsp;&nbsp;"+(t.name?t.name:" ")+" "+(t.rate?t.rate+" &nbsp;%":" ")+"</div> <div class='total-amount "+a.isNegative(t.amount)+"'>"+(t.amount?t.amount:" ")+"</div></div>":"exclusive_tax"!==t.type&&(i.innerHTML="<div class='itemDiv'><div class='total-name'>"+(t.name?t.name:" ")+"</div> <div class='total-amount "+a.isNegative(t.amount)+"'>"+(t.amount?t.amount:" ")+"</div></div>"),e.appendChild(i)})}},{key:"createPaymentsData",value:function(e){var t=this._doc.createElement("div");if(t.id="tplOrderPayments",this._docObj&&"deliveryNote"===this._dicData.documentType)return t;if(this._docObj&&"invoice"===this._dicData.documentType){if("CreditCardPayment"===this._docObj.docPaymentType||"CreditCardRefund"===this._docObj.docPaymentType){var a=this.createCreditTemplate(e);t.appendChild(a)}else if("GiftCard"===this._docObj.docPaymentType){var i=this.createGiftCardDetails(e);t.appendChild(i)}else if("CashPayment"===this._docObj.docPaymentType||"CashRefund"===this._docObj.docPaymentType){var n=this.createCashPaymentFooter(e);t.appendChild(n)}else if("ChequePayment"===this._docObj.docPaymentType||"ChequeRefund"===this.docObj.docPaymentType){var r=this.createChequePaymentFooter(e);t.appendChild(r)}}else{var s=this.fillPaymentsData(e);s.id="OrderPaymentsDiv",t.appendChild(s)}return t}},{key:"fillPaymentsData",value:function(e){var t=this,a=this._doc.createElement("tplOrderPayments");return a.id="OrderPaymentsDiv",e.data.payments.length>0&&e.data.payments.forEach(function(e){var i=t._doc.createElement("div");if(e&&(i.innerHTML="<div class="+("change"===e.type?"changeDiv":"itemDiv")+"><div class='total-name'>"+(e.name?e.name:" ")+"</div> <div class='total-amount "+t.isNegative(e.amount)+"'>"+(e.amount?e.amount:" ")+"</div></div>",a.appendChild(i)),e.holderName){var n=t._doc.createElement("div");n.innerHTML="&nbsp;&nbsp;&nbsp;"+e.holderName,a.appendChild(n)}}),a}},{key:"createGiftCardDetails",value:function(e){var t=this._doc.createElement("div"),a=this.$translate.getText("PAID_GIFTCARD"),i=e.collections.GIFT_CARD_PAYMENTS[0].P_AMOUNT?Number(e.collections.GIFT_CARD_PAYMENTS[0].P_AMOUNT).toFixed(2):"",n=this._doc.createElement("div");n.innerHTML="<div class='itemDiv'><div class='total-name'>"+(a||" ")+"</div><div class='total-amount'>"+i+"</div></div>",t.appendChild(n);var r=this.$translate.getText("CARD_NO"),s=e.collections.GIFT_CARD_PAYMENTS[0].CARD_NUMBER?e.collections.GIFT_CARD_PAYMENTS[0].CARD_NUMBER:"",o=this._doc.createElement("div");o.innerHTML="<div class='itemDiv'><div class='total-name'>"+(r||" ")+" "+s+"</div></div>",t.appendChild(o);var d=this.$translate.getText("TRANSACTION_NO"),l=e.collections.GIFT_CARD_PAYMENTS[0].PROVIDER_TRANS_ID?e.collections.GIFT_CARD_PAYMENTS[0].PROVIDER_TRANS_ID:"",c=this._doc.createElement("div");return c.innerHTML="<div class='itemDiv'><div class='total-name'>"+(d||" ")+" "+l+"</div></div>",t.appendChild(c),t}},{key:"createCashPaymentFooter",value:function(e){var t=this._doc.createElement("div");t.id="cashDiv";var a=this.$translate.getText("PAID_CASH"),i=this.$translate.getText("RETURNED_CASH"),n=e.collections.PAYMENT_LIST[0].P_AMOUNT?e.collections.PAYMENT_LIST[0].P_AMOUNT:"",r=this._doc.createElement("div");if(r.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.isRefund?i:a)+"</div><div class='total-amount "+this.isNegative(n)+"'>"+n.toFixed(2)+"</div></div>",t.appendChild(r),e.collections.PAYMENT_LIST[0].P_CHANGE){var s=this.$translate.getText("TOTAL_CASHBACK"),o=e.collections.PAYMENT_LIST[0].P_CHANGE?Number(e.collections.PAYMENT_LIST[0].P_CHANGE).toFixed(2):"",d=this._doc.createElement("div");d.innerHTML="<div class='changeDiv'><div class='total-name'>"+(s||"")+"</div><div class='total-amount "+this.isNegative(o)+"'>"+o+"</div></div>",t.appendChild(d)}return t}},{key:"createChequePaymentFooter",value:function(e){var t=this._doc.createElement("div");t.id="chequeDiv";var a=this.$translate.getText("PAID_CHEQUE"),i=this.$translate.getText("RETURNED_CHEQUE"),n=e.collections.PAYMENT_LIST[0].P_AMOUNT?e.collections.PAYMENT_LIST[0].P_AMOUNT:"",r=this._doc.createElement("div");if(r.innerHTML="<div class='itemDiv'><div class='total-name'>"+(e.isRefund?i:a)+"</div><div class='total-amount "+this.isNegative(n)+"'>"+n.toFixed(2)+"</div></div>",t.appendChild(r),e.collections.PAYMENT_LIST[0].P_CHANGE){var s=this.$translate.getText("TOTAL_CASHBACK"),o=e.collections.PAYMENT_LIST[0].P_CHANGE?Number(e.collections.PAYMENT_LIST[0].P_CHANGE).toFixed(2):"",d=this._doc.createElement("div");d.innerHTML="<div class='changeDiv'><div class='total-name'>"+(s||"")+"</div><div class='total-amount "+this.isNegative(o)+"'>"+o+"</div></div>",t.appendChild(d)}return t}},{key:"makeSVG",value:function(e,t){var a=this._doc.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)a.setAttribute(i,t[i]);return a}},{key:"appendChildren",value:function(e,t){var a=this._doc.createElement("div");return t.length>0&&t.forEach(function(e){a.appendChild(e)}),a}},{key:"isNegative",value:function(e){return parseInt(e)<0?"negative":""}},{key:"formatDateUS",value:function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())+" "+(t.getHours()>12?"PM":"AM")}},{key:"formatDateIL",value:function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+(t.getHours()>10?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>10?t.getMinutes():"0"+t.getMinutes())}}])&&A(t.prototype,a),i&&A(t,i),e}();function N(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this._isUS,this._tlog,this._configure(t),this.$templateBuilder=new O(this._options),this.$translate=new o({local:t.local})}var t,a,i;return t=e,(a=[{key:"Enums",value:function(){return{DOC_TYPES:{INVOICE:"invoice",REFUND_INVOICE:"refundInvoice"},PaymentTypes:{OTH:"OTH",CreditCardPayment:"CreditCardPayment",ChargeAccountPayment:"ChargeAccountPayment",CashPayment:"CashPayment",ChequePayment:"ChequePayment",GiftCardPayment:"GiftCardPayment",ChargeAccountRefund:"ChargeAccountRefund",CashRefund:"CashRefund",ChequeRefund:"ChequeRefund",CreditCardRefund:"CreditCardRefund"}}}},{key:"_configure",value:function(e){e.local&&(this._options.local=e.local),void 0!==e.isUS&&(this._options.isUS=e.isUS,this._isUS=e.isUS),e.moment?moment=e.moment:moment=window.moment}},{key:"orderTypesListCreator",value:function(e,t,a){var i=this,n=[];if(a){if(n.push({tlogId:e._id,id:e._id,type:e._type,title:this.$translate.getText("order")+" "+e.number,ep:"tlogs/".concat(e._id,"/bill"),isRefund:!1,isFullOrderBill:!0}),e.order[0].clubMembers&&e.order[0].clubMembers.length&&n.push({tlogId:e._id,id:e._id,type:e._type,title:this.$translate.getText("clubMembers"),ep:"documents/v2/".concat(doc._id,"/printdata"),isRefund:!1}),e.order[0].checks&&e.order[0].checks.length>1&&e.order[0].checks.forEach(function(t){var a=t.payments[0].paymentId;n.push({tlogId:e._id,id:t._id,type:"check",title:i.$translate.getText("CHECK")+" ".concat(t.number),ep:"tlogs/".concat(e._id,"/checks"),md:{paymentId:a,checkNumber:t.number}})}),this._isUS&&e.order&&e.order[0].allDocuments&&e.order[0].allDocuments.length>0){var r=e;e.order[0].allDocuments.forEach(function(t){if(t.payments.length>0&&t.payments[0]){var a,s=t.payments[0],o="";"creditCard"===s.tenderType&&(o=i.$translate.getText("CreditSlip")),"giftCard"===s.tenderType&&(o=i.$translate.getText("GiftCardCreditSlip")),"creditCard"!==s.tenderType&&"giftCard"!==s.tenderType||(r.order[0].allDocuments.forEach(function(e){e.payments.forEach(function(e){e._id===s._id&&(a=e)})}),s.number="".concat(e.order[0].number,"/").concat(s.number),n.push({tlogId:e._id,id:t.id,type:s.tenderType,title:o+"-"+s.number,ep:"documents/v2/".concat(s._id,"/printdata"),md:{paymentId:s._id,signature:a&&a.customerSignature?a.customerSignature.data:null},docPaymentType:s.tenderType?s.tenderType:"",isRefund:s.tenderType.toUpperCase().includes("REFUND")}))}})}if(!this._isUS)if(e.order)if(e.order[0].allDocuments&&e.order[0].allDocuments.length>0)this.filterOmittedPayments(e.order[0].allDocuments).forEach(function(t){switch(t._type){case i.Enums().DOC_TYPES.INVOICE:n.push({tlogId:e._id,id:t._id,type:t._type,title:i.$translate.getText("invoice_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type?t.payments[0]._type:"",isRefund:!1});break;case i.Enums().DOC_TYPES.REFUND_INVOICE:if("ChequeRefund"===t.payments[0]._type||"CashRefund"===t.payments[0]._type||"CreditCardRefund"===t.payments[0]._type){n.push({tlogId:e._id,id:t._id,type:t._type,title:i.$translate.getText("credit_invoice_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type,isRefund:!0});break}case"deliveryNote":if("ChargeAccountPayment"===t.payments[0]._type){n.push({tlogId:e._id,id:t._id,type:t._type,title:i.$translate.getText("delivery_note_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type,isRefund:t._type.toUpperCase().includes("REFUND")});break}case"refundDeliveryNote":if("ChargeAccountRefund"===t.payments[0]._type){n.push({tlogId:e._id,id:t._id,type:t._type,title:i.$translate.getText("refund_note_number")+t.number,ep:"documents/v2/".concat(t._id,"/printdata"),docPaymentType:t.payments[0]._type,isRefund:!0});break}}});console.log("orderSelection"),console.log(n)}else n.push({tlogId:"",id:"openOrder",type:"tlog",title:this.$translate.getText("order")+" ",ep:"",isRefund:!1,isFullOrderBill:!1});return n}},{key:"filterOmittedPayments",value:function(e){var t=[];e.forEach(function(a){if("omitted"===a.payments[0].providerTransactionStatus&&"CreditCardPayment"===a.payments[0]._type){var i=e.find(function(e){return e.payments[0].refundedPaymentId===a.payments[0]._id});i&&(t.push(a),t.push(i))}});return t.length>0&&t.forEach(function(t){var a=e.findIndex(function(e){return e.id===t.id});-1!==a&&e.splice(a,1)}),e}},{key:"getDocs",value:function(e,t,a){var i=new c(this._options).resolvePrintData({collections:t.printData.collections,variables:t.printData.variables},this._options._isUS);return this.orderTypesListCreator(e,i,a)}},{key:"getHTMLDocument",value:function(e,t){return this.$templateBuilder.createHTMLFromPrintDATA(e,t)}},{key:"getHTMLDocumentWithoutTlog",value:function(e,t){console.log("document: "+e);var a={};if(a.isRefund=e.documentType.toUpperCase().indexOf("REFUND")>-1,a.docPaymentType,e.printData.collections.PAYMENT_LIST[0])switch(e.printData.collections.PAYMENT_LIST[0].P_TENDER_TYPE){case"cash":a.docPaymentType="CashPayment";break;case"creditCard":a.docPaymentType="CreditCardPayment";break;case"giftCard":a.docPaymentType="GiftCardPayment";break;case"cheque":a.docPaymentType="ChequePayment";break;case"chargeAccount":a.docPaymentType="ChargeAccountPayment"}e.printData.variables.DOCUMENT_NO?a.documentNumber=e.printData.variables.DOCUMENT_NO:e.printData.variables.DOCUMENT_NO;var i=e.printData;return this.getHTMLDocument(a,i)}}])&&N(t.prototype,a),i&&N(t,i),e}();function C(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}window.DocumentViewer=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={isUS:!1,local:"he-IL"},this._tlogDocsService=new R(this.options)}var t,a,i;return t=e,(a=[{key:"getDocumentsInfoFromTlog",value:function(e,t){return this._tlogDocsService.getDocs(e,t)}},{key:"getHTMLDocument",value:function(e,t){return this._tlogDocsService.getHTMLDocument(e,t)}},{key:"getHTMLDocumentWithoutTlog",value:function(e,t){return this._tlogDocsService.getHTMLDocumentWithoutTlog(e,t)}}])&&C(t.prototype,a),i&&C(t,i),e}()}]);